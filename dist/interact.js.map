{"version":3,"sources":["src\\header.js","node_modules\\browser-pack\\_prelude.js","index.js","src\\Eventable.js","src\\InteractEvent.js","src\\Interactable.js","src\\Interaction.js","src\\actions\\base.js","src\\actions\\drag.js","src\\actions\\drop.js","src\\actions\\gesture.js","src\\actions\\resize.js","src\\autoScroll.js","src\\autoStart\\InteractableMethods.js","src\\autoStart\\base.js","src\\autoStart\\delay.js","src\\autoStart\\drag.js","src\\autoStart\\gesture.js","src\\autoStart\\resize.js","src\\defaultOptions.js","src\\index.js","src\\inertia.js","src\\interact.js","src\\interactablePreventDefault.js","src\\legacyBrowsers.js","src\\modifiers\\index.js","src\\modifiers\\restrict.js","src\\modifiers\\restrictEdges.js","src\\modifiers\\restrictSize.js","src\\modifiers\\snap.js","src\\modifiers\\snapSize.js","src\\pointerEvents\\PointerEvent.js","src\\pointerEvents\\base.js","src\\pointerEvents\\holdRepeat.js","src\\pointerEvents\\interactableTargets.js","src\\scope.js","src\\utils\\Signals.js","src\\utils\\arr.js","src\\utils\\browser.js","src\\utils\\domObjects.js","src\\utils\\domUtils.js","src\\utils\\events.js","src\\utils\\extend.js","src\\utils\\getOriginXY.js","src\\utils\\hypot.js","src\\utils\\index.js","src\\utils\\interactionFinder.js","src\\utils\\is.js","src\\utils\\isWindow.js","src\\utils\\pointerExtend.js","src\\utils\\pointerUtils.js","src\\utils\\raf.js","src\\utils\\rect.js","src\\utils\\window.js"],"names":[],"mappings":"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","file":"interact.js","sourceRoot":"","sourcesContent":["/**\r\n * interact.js v1.3.0-alpha+sha.52dcf7b\r\n *\r\n * Copyright (c) 2012-2017 Taye Adeyemi <dev@taye.me>\r\n * Open source under the MIT License.\r\n * https://raw.github.com/taye/interact.js/master/LICENSE\r\n */\r\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\r\n * In a (windowless) server environment this file exports a factory function\r\n * that takes the window to use.\r\n *\r\n *     var interact = require('interact.js')(windowObject);\r\n *\r\n * See https://github.com/taye/interact.js/issues/187\r\n */\r\nif (typeof window === 'undefined') {\r\n  module.exports = function (window) {\r\n    require('./src/utils/window').init(window);\r\n\r\n    return require('./src/index');\r\n  };\r\n}\r\nelse {\r\n  module.exports = require('./src/index');\r\n}\r\n","const { indexOf } = require('./utils/arr');\r\nconst extend = require('./utils/extend.js');\r\n\r\nfunction fireUntilImmediateStopped (event, listeners) {\r\n  for (let i = 0, len = listeners.length; i < len && !event.immediatePropagationStopped; i++) {\r\n    listeners[i](event);\r\n  }\r\n}\r\n\r\nclass Eventable {\r\n\r\n  constructor (options) {\r\n    this.options = extend({}, options || {});\r\n  }\r\n\r\n  fire (event) {\r\n    let listeners;\r\n    const onEvent = 'on' + event.type;\r\n    const global = this.global;\r\n\r\n    // Interactable#on() listeners\r\n    if ((listeners = this[event.type])) {\r\n      fireUntilImmediateStopped(event, listeners);\r\n    }\r\n\r\n    // interactable.onevent listener\r\n    if (this[onEvent]) {\r\n      this[onEvent](event);\r\n    }\r\n\r\n    // interact.on() listeners\r\n    if (!event.propagationStopped && global && (listeners = global[event.type]))  {\r\n      fireUntilImmediateStopped(event, listeners);\r\n    }\r\n  }\r\n\r\n  on (eventType, listener) {\r\n    // if this type of event was never bound\r\n    if (this[eventType]) {\r\n      this[eventType].push(listener);\r\n    }\r\n    else {\r\n      this[eventType] = [listener];\r\n    }\r\n  }\r\n\r\n  off (eventType, listener) {\r\n    // if it is an action event type\r\n    const eventList = this[eventType];\r\n    const index     = eventList? indexOf(eventList, listener) : -1;\r\n\r\n    if (index !== -1) {\r\n      eventList.splice(index, 1);\r\n    }\r\n\r\n    if (eventList && eventList.length === 0 || !listener) {\r\n      this[eventType] = listener;\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = Eventable;\r\n","const extend      = require('./utils/extend');\r\nconst getOriginXY = require('./utils/getOriginXY');\r\nconst defaults    = require('./defaultOptions');\r\nconst signals     = require('./utils/Signals').new();\r\n\r\nclass InteractEvent {\r\n  constructor (interaction, event, action, phase, element, related, preEnd = false) {\r\n    const target      = interaction.target;\r\n    const deltaSource = (target && target.options || defaults).deltaSource;\r\n    const origin      = getOriginXY(target, element, action);\r\n    const starting    = phase === 'start';\r\n    const ending      = phase === 'end';\r\n    const coords      = starting? interaction.startCoords : interaction.curCoords;\r\n    const prevEvent   = interaction.prevEvent;\r\n\r\n    element = element || interaction.element;\r\n\r\n    const page   = extend({}, coords.page);\r\n    const client = extend({}, coords.client);\r\n\r\n    page.x -= origin.x;\r\n    page.y -= origin.y;\r\n\r\n    client.x -= origin.x;\r\n    client.y -= origin.y;\r\n\r\n    this.ctrlKey       = event.ctrlKey;\r\n    this.altKey        = event.altKey;\r\n    this.shiftKey      = event.shiftKey;\r\n    this.metaKey       = event.metaKey;\r\n    this.button        = event.button;\r\n    this.buttons       = event.buttons;\r\n    this.target        = element;\r\n    this.currentTarget = element;\r\n    this.relatedTarget = related || null;\r\n    this.preEnd        = preEnd;\r\n    this.type          = action + (phase || '');\r\n    this.interaction   = interaction;\r\n    this.interactable  = target;\r\n\r\n    this.t0 = starting ? interaction.downTimes[interaction.downTimes.length - 1]\r\n                       : prevEvent.t0;\r\n\r\n    const signalArg = {\r\n      interaction,\r\n      event,\r\n      action,\r\n      phase,\r\n      element,\r\n      related,\r\n      page,\r\n      client,\r\n      coords,\r\n      starting,\r\n      ending,\r\n      deltaSource,\r\n      iEvent: this,\r\n    };\r\n\r\n    signals.fire('set-xy', signalArg);\r\n\r\n    if (ending) {\r\n      // use previous coords when ending\r\n      this.pageX = prevEvent.pageX;\r\n      this.pageY = prevEvent.pageY;\r\n      this.clientX = prevEvent.clientX;\r\n      this.clientY = prevEvent.clientY;\r\n    }\r\n    else {\r\n      this.pageX     = page.x;\r\n      this.pageY     = page.y;\r\n      this.clientX   = client.x;\r\n      this.clientY   = client.y;\r\n    }\r\n\r\n    this.x0        = interaction.startCoords.page.x - origin.x;\r\n    this.y0        = interaction.startCoords.page.y - origin.y;\r\n    this.clientX0  = interaction.startCoords.client.x - origin.x;\r\n    this.clientY0  = interaction.startCoords.client.y - origin.y;\r\n\r\n    signals.fire('set-delta', signalArg);\r\n\r\n    this.timeStamp = coords.timeStamp;\r\n    this.dt        = interaction.pointerDelta.timeStamp;\r\n    this.duration  = this.timeStamp - this.t0;\r\n\r\n    // speed and velocity in pixels per second\r\n    this.speed = interaction.pointerDelta[deltaSource].speed;\r\n    this.velocityX = interaction.pointerDelta[deltaSource].vx;\r\n    this.velocityY = interaction.pointerDelta[deltaSource].vy;\r\n\r\n    this.swipe = (ending || phase === 'inertiastart')? this.getSwipe() : null;\r\n\r\n    signals.fire('new', signalArg);\r\n  }\r\n\r\n  getSwipe () {\r\n    const interaction = this.interaction;\r\n\r\n    if (interaction.prevEvent.speed < 600\r\n        || this.timeStamp - interaction.prevEvent.timeStamp > 150) {\r\n      return null;\r\n    }\r\n\r\n    let angle = 180 * Math.atan2(interaction.prevEvent.velocityY, interaction.prevEvent.velocityX) / Math.PI;\r\n    const overlap = 22.5;\r\n\r\n    if (angle < 0) {\r\n      angle += 360;\r\n    }\r\n\r\n    const left = 135 - overlap <= angle && angle < 225 + overlap;\r\n    const up   = 225 - overlap <= angle && angle < 315 + overlap;\r\n\r\n    const right = !left && (315 - overlap <= angle || angle <  45 + overlap);\r\n    const down  = !up   &&   45 - overlap <= angle && angle < 135 + overlap;\r\n\r\n    return {\r\n      up,\r\n      down,\r\n      left,\r\n      right,\r\n      angle,\r\n      speed: interaction.prevEvent.speed,\r\n      velocity: {\r\n        x: interaction.prevEvent.velocityX,\r\n        y: interaction.prevEvent.velocityY,\r\n      },\r\n    };\r\n  }\r\n\r\n  preventDefault () {}\r\n\r\n  stopImmediatePropagation () {\r\n    this.immediatePropagationStopped = this.propagationStopped = true;\r\n  }\r\n\r\n  stopPropagation () {\r\n    this.propagationStopped = true;\r\n  }\r\n}\r\n\r\nsignals.on('set-delta', function ({ iEvent, interaction, starting, deltaSource }) {\r\n  const prevEvent = starting? iEvent : interaction.prevEvent;\r\n\r\n  if (deltaSource === 'client') {\r\n    iEvent.dx = iEvent.clientX - prevEvent.clientX;\r\n    iEvent.dy = iEvent.clientY - prevEvent.clientY;\r\n  }\r\n  else {\r\n    iEvent.dx = iEvent.pageX - prevEvent.pageX;\r\n    iEvent.dy = iEvent.pageY - prevEvent.pageY;\r\n  }\r\n});\r\n\r\nInteractEvent.signals = signals;\r\n\r\nmodule.exports = InteractEvent;\r\n","const is        = require('./utils/is');\r\nconst events    = require('./utils/events');\r\nconst extend    = require('./utils/extend');\r\nconst actions   = require('./actions/base');\r\nconst scope     = require('./scope');\r\nconst Eventable = require('./Eventable');\r\nconst defaults  = require('./defaultOptions');\r\nconst signals   = require('./utils/Signals').new();\r\n\r\nconst {\r\n  getElementRect,\r\n  nodeContains,\r\n  trySelector,\r\n}                           = require('./utils/domUtils');\r\nconst { getWindow }         = require('./utils/window');\r\nconst { indexOf, contains } = require('./utils/arr');\r\nconst { wheelEvent }        = require('./utils/browser');\r\n\r\n// all set interactables\r\nscope.interactables = [];\r\n\r\n/*\\\r\n * Interactable\r\n [ property ]\r\n **\r\n * Object type returned by @interact\r\n\\*/\r\nclass Interactable {\r\n  constructor (target, options) {\r\n    options = options || {};\r\n\r\n    this.target   = target;\r\n    this.events   = new Eventable();\r\n    this._context = options.context || scope.document;\r\n    this._win     = getWindow(trySelector(target)? this._context : target);\r\n    this._doc     = this._win.document;\r\n\r\n    signals.fire('new', {\r\n      target,\r\n      options,\r\n      interactable: this,\r\n      win: this._win,\r\n    });\r\n\r\n    scope.addDocument( this._doc, this._win );\r\n\r\n    scope.interactables.push(this);\r\n\r\n    this.set(options);\r\n  }\r\n\r\n  setOnEvents (action, phases) {\r\n    const onAction = 'on' + action;\r\n\r\n    if (is.function(phases.onstart)       ) { this.events[onAction + 'start'        ] = phases.onstart         ; }\r\n    if (is.function(phases.onmove)        ) { this.events[onAction + 'move'         ] = phases.onmove          ; }\r\n    if (is.function(phases.onend)         ) { this.events[onAction + 'end'          ] = phases.onend           ; }\r\n    if (is.function(phases.oninertiastart)) { this.events[onAction + 'inertiastart' ] = phases.oninertiastart  ; }\r\n\r\n    return this;\r\n  }\r\n\r\n  setPerAction (action, options) {\r\n    // for all the default per-action options\r\n    for (const option in options) {\r\n      // if this option exists for this action\r\n      if (option in defaults[action]) {\r\n        // if the option in the options arg is an object value\r\n        if (is.object(options[option])) {\r\n          // duplicate the object\r\n          this.options[action][option] = extend(this.options[action][option] || {}, options[option]);\r\n\r\n          if (is.object(defaults.perAction[option]) && 'enabled' in defaults.perAction[option]) {\r\n            this.options[action][option].enabled = options[option].enabled === false? false : true;\r\n          }\r\n        }\r\n        else if (is.bool(options[option]) && is.object(defaults.perAction[option])) {\r\n          this.options[action][option].enabled = options[option];\r\n        }\r\n        else if (options[option] !== undefined) {\r\n          // or if it's not undefined, do a plain assignment\r\n          this.options[action][option] = options[option];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\\\r\n   * Interactable.getRect\r\n   [ method ]\r\n   *\r\n   * The default function to get an Interactables bounding rect. Can be\r\n   * overridden using @Interactable.rectChecker.\r\n   *\r\n   - element (Element) #optional The element to measure.\r\n   = (object) The object's bounding rectangle.\r\n   o {\r\n   o     top   : 0,\r\n   o     left  : 0,\r\n   o     bottom: 0,\r\n   o     right : 0,\r\n   o     width : 0,\r\n   o     height: 0\r\n   o }\r\n  \\*/\r\n  getRect (element) {\r\n    element = element || this.target;\r\n\r\n    if (is.string(this.target) && !(is.element(element))) {\r\n      element = this._context.querySelector(this.target);\r\n    }\r\n\r\n    return getElementRect(element);\r\n  }\r\n\r\n  /*\\\r\n   * Interactable.rectChecker\r\n   [ method ]\r\n   *\r\n   * Returns or sets the function used to calculate the interactable's\r\n   * element's rectangle\r\n   *\r\n   - checker (function) #optional A function which returns this Interactable's bounding rectangle. See @Interactable.getRect\r\n   = (function | object) The checker function or this Interactable\r\n  \\*/\r\n  rectChecker (checker) {\r\n    if (is.function(checker)) {\r\n      this.getRect = checker;\r\n\r\n      return this;\r\n    }\r\n\r\n    if (checker === null) {\r\n      delete this.options.getRect;\r\n\r\n      return this;\r\n    }\r\n\r\n    return this.getRect;\r\n  }\r\n\r\n  _backCompatOption (optionName, newValue) {\r\n    if (trySelector(newValue) || is.object(newValue)) {\r\n      this.options[optionName] = newValue;\r\n\r\n      for (const action of actions.names) {\r\n        this.options[action][optionName] = newValue;\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    return this.options[optionName];\r\n  }\r\n\r\n  /*\\\r\n   * Interactable.origin\r\n   [ method ]\r\n   *\r\n   * Gets or sets the origin of the Interactable's element.  The x and y\r\n   * of the origin will be subtracted from action event coordinates.\r\n   *\r\n   - origin (object | string) #optional An object eg. { x: 0, y: 0 } or string 'parent', 'self' or any CSS selector\r\n   * OR\r\n   - origin (Element) #optional An HTML or SVG Element whose rect will be used\r\n   **\r\n   = (object) The current origin or this Interactable\r\n  \\*/\r\n  origin (newValue) {\r\n    return this._backCompatOption('origin', newValue);\r\n  }\r\n\r\n  /*\\\r\n   * Interactable.deltaSource\r\n   [ method ]\r\n   *\r\n   * Returns or sets the mouse coordinate types used to calculate the\r\n   * movement of the pointer.\r\n   *\r\n   - newValue (string) #optional Use 'client' if you will be scrolling while interacting; Use 'page' if you want autoScroll to work\r\n   = (string | object) The current deltaSource or this Interactable\r\n  \\*/\r\n  deltaSource (newValue) {\r\n    if (newValue === 'page' || newValue === 'client') {\r\n      this.options.deltaSource = newValue;\r\n\r\n      return this;\r\n    }\r\n\r\n    return this.options.deltaSource;\r\n  }\r\n\r\n  /*\\\r\n   * Interactable.context\r\n   [ method ]\r\n   *\r\n   * Gets the selector context Node of the Interactable. The default is `window.document`.\r\n   *\r\n   = (Node) The context Node of this Interactable\r\n   **\r\n  \\*/\r\n  context () {\r\n    return this._context;\r\n  }\r\n\r\n  inContext (element) {\r\n    return (this._context === element.ownerDocument\r\n            || nodeContains(this._context, element));\r\n  }\r\n\r\n  /*\\\r\n   * Interactable.fire\r\n   [ method ]\r\n   *\r\n   * Calls listeners for the given InteractEvent type bound globally\r\n   * and directly to this Interactable\r\n   *\r\n   - iEvent (InteractEvent) The InteractEvent object to be fired on this Interactable\r\n   = (Interactable) this Interactable\r\n  \\*/\r\n  fire (iEvent) {\r\n    this.events.fire(iEvent);\r\n\r\n    return this;\r\n  }\r\n\r\n  _onOffMultiple (method, eventType, listener, useCapture) {\r\n    if (is.string(eventType) && eventType.search(' ') !== -1) {\r\n      eventType = eventType.trim().split(/ +/);\r\n    }\r\n\r\n    if (is.array(eventType)) {\r\n      for (let i = 0; i < eventType.length; i++) {\r\n        this[method](eventType[i], listener, useCapture);\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    if (is.object(eventType)) {\r\n      for (const prop in eventType) {\r\n        this[method](prop, eventType[prop], listener);\r\n      }\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  /*\\\r\n   * Interactable.on\r\n   [ method ]\r\n   *\r\n   * Binds a listener for an InteractEvent, pointerEvent or DOM event.\r\n   *\r\n   - eventType  (string | array | object) The types of events to listen for\r\n   - listener   (function) The function event (s)\r\n   - useCapture (boolean) #optional useCapture flag for addEventListener\r\n   = (object) This Interactable\r\n  \\*/\r\n  on (eventType, listener, useCapture) {\r\n    // convert to boolean\r\n    useCapture = !!useCapture;\r\n\r\n    if (this._onOffMultiple('on', eventType, listener, useCapture)) {\r\n      return this;\r\n    }\r\n\r\n    if (eventType === 'wheel') { eventType = wheelEvent; }\r\n\r\n    if (contains(Interactable.eventTypes, eventType)) {\r\n      this.events.on(eventType, listener);\r\n    }\r\n    // delegated event for selector\r\n    else if (is.string(this.target)) {\r\n      events.addDelegate(this.target, this._context, eventType, listener, useCapture);\r\n    }\r\n    else {\r\n      events.add(this.target, eventType, listener, useCapture);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /*\\\r\n   * Interactable.off\r\n   [ method ]\r\n   *\r\n   * Removes an InteractEvent, pointerEvent or DOM event listener\r\n   *\r\n   - eventType  (string | array | object) The types of events that were listened for\r\n   - listener   (function) The listener function to be removed\r\n   - useCapture (boolean) #optional useCapture flag for removeEventListener\r\n   = (object) This Interactable\r\n  \\*/\r\n  off (eventType, listener, useCapture) {\r\n    // convert to boolean\r\n    useCapture = !!useCapture;\r\n\r\n    if (this._onOffMultiple('off', eventType, listener, useCapture)) {\r\n      return this;\r\n    }\r\n\r\n    if (eventType === 'wheel') { eventType = wheelEvent; }\r\n\r\n    // if it is an action event type\r\n    if (contains(Interactable.eventTypes, eventType)) {\r\n      this.events.off(eventType, listener);\r\n    }\r\n    // delegated event\r\n    else if (is.string(this.target)) {\r\n      events.removeDelegate(this.target, this._context, eventType, listener, useCapture);\r\n    }\r\n    // remove listener from this Interatable's element\r\n    else {\r\n      events.remove(this.target, eventType, listener, useCapture);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /*\\\r\n   * Interactable.set\r\n   [ method ]\r\n   *\r\n   * Reset the options of this Interactable\r\n   - options (object) The new settings to apply\r\n   = (object) This Interactable\r\n  \\*/\r\n  set (options) {\r\n    if (!is.object(options)) {\r\n      options = {};\r\n    }\r\n\r\n    this.options = extend({}, defaults.base);\r\n\r\n    const perActions = extend({}, defaults.perAction);\r\n\r\n    for (const actionName in actions.methodDict) {\r\n      const methodName = actions.methodDict[actionName];\r\n\r\n      this.options[actionName] = extend({}, defaults[actionName]);\r\n\r\n      this.setPerAction(actionName, perActions);\r\n\r\n      this[methodName](options[actionName]);\r\n    }\r\n\r\n    for (const setting of Interactable.settingsMethods) {\r\n      this.options[setting] = defaults.base[setting];\r\n\r\n      if (setting in options) {\r\n        this[setting](options[setting]);\r\n      }\r\n    }\r\n\r\n    signals.fire('set', {\r\n      options,\r\n      interactable: this,\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  /*\\\r\n   * Interactable.unset\r\n   [ method ]\r\n   *\r\n   * Remove this interactable from the list of interactables and remove\r\n   * it's action capabilities and event listeners\r\n   *\r\n   = (object) @interact\r\n  \\*/\r\n  unset () {\r\n    events.remove(this.target, 'all');\r\n\r\n    if (is.string(this.target)) {\r\n      // remove delegated events\r\n      for (const type in events.delegatedEvents) {\r\n        const delegated = events.delegatedEvents[type];\r\n\r\n        if (delegated.selectors[0] === this.target\r\n            && delegated.contexts[0] === this._context) {\r\n\r\n          delegated.selectors.splice(0, 1);\r\n          delegated.contexts .splice(0, 1);\r\n          delegated.listeners.splice(0, 1);\r\n\r\n          // remove the arrays if they are empty\r\n          if (!delegated.selectors.length) {\r\n            delegated[type] = null;\r\n          }\r\n        }\r\n\r\n        events.remove(this._context, type, events.delegateListener);\r\n        events.remove(this._context, type, events.delegateUseCapture, true);\r\n      }\r\n    }\r\n    else {\r\n      events.remove(this, 'all');\r\n    }\r\n\r\n    signals.fire('unset', { interactable: this });\r\n\r\n    scope.interactables.splice(indexOf(scope.interactables, this), 1);\r\n\r\n    // Stop related interactions when an Interactable is unset\r\n    for (const interaction of scope.interactions || []) {\r\n      if (interaction.target === this && interaction.interacting()) {\r\n        interaction.stop();\r\n      }\r\n    }\r\n\r\n    return scope.interact;\r\n  }\r\n}\r\n\r\nscope.interactables.indexOfElement = function indexOfElement (target, context) {\r\n  context = context || scope.document;\r\n\r\n  for (let i = 0; i < this.length; i++) {\r\n    const interactable = this[i];\r\n\r\n    if (interactable.target === target && interactable._context === context) {\r\n      return i;\r\n    }\r\n  }\r\n  return -1;\r\n};\r\n\r\nscope.interactables.get = function interactableGet (element, options, dontCheckInContext) {\r\n  const ret = this[this.indexOfElement(element, options && options.context)];\r\n\r\n  return ret && (is.string(element) || dontCheckInContext || ret.inContext(element))? ret : null;\r\n};\r\n\r\nscope.interactables.forEachSelector = function (callback, element) {\r\n  for (let i = 0; i < this.length; i++) {\r\n    const interactable = this[i];\r\n\r\n    // skip non CSS selector targets and out of context elements\r\n    if (!is.string(interactable.target)\r\n        || (element && !interactable.inContext(element))) {\r\n      continue;\r\n    }\r\n\r\n    const ret = callback(interactable, interactable.target, interactable._context, i, this);\r\n\r\n    if (ret !== undefined) {\r\n      return ret;\r\n    }\r\n  }\r\n};\r\n\r\n// all interact.js eventTypes\r\nInteractable.eventTypes = scope.eventTypes = [];\r\n\r\nInteractable.signals = signals;\r\n\r\nInteractable.settingsMethods = [ 'deltaSource', 'origin', 'preventDefault', 'rectChecker' ];\r\n\r\nmodule.exports = Interactable;\r\n","const scope   = require('./scope');\r\nconst utils   = require('./utils');\r\nconst events  = require('./utils/events');\r\nconst browser = require('./utils/browser');\r\nconst finder  = require('./utils/interactionFinder');\r\nconst signals = require('./utils/Signals').new();\r\n\r\nconst listeners   = {};\r\nconst methodNames = [\r\n  'pointerDown', 'pointerMove', 'pointerUp',\r\n  'updatePointer', 'removePointer',\r\n];\r\n\r\n// for ignoring browser's simulated mouse events\r\nlet prevTouchTime = 0;\r\n\r\n// all active and idle interactions\r\nscope.interactions = [];\r\n\r\nclass Interaction {\r\n  constructor () {\r\n    this.target        = null; // current interactable being interacted with\r\n    this.element       = null; // the target element of the interactable\r\n\r\n    this.prepared      = {     // action that's ready to be fired on next move event\r\n      name : null,\r\n      axis : null,\r\n      edges: null,\r\n    };\r\n\r\n    // keep track of added pointers\r\n    this.pointers    = [];\r\n    this.pointerIds  = [];\r\n    this.downTargets = [];\r\n    this.downTimes   = [];\r\n\r\n    // Previous native pointer move event coordinates\r\n    this.prevCoords = {\r\n      page     : { x: 0, y: 0 },\r\n      client   : { x: 0, y: 0 },\r\n      timeStamp: 0,\r\n    };\r\n    // current native pointer move event coordinates\r\n    this.curCoords = {\r\n      page     : { x: 0, y: 0 },\r\n      client   : { x: 0, y: 0 },\r\n      timeStamp: 0,\r\n    };\r\n\r\n    // Starting InteractEvent pointer coordinates\r\n    this.startCoords = {\r\n      page     : { x: 0, y: 0 },\r\n      client   : { x: 0, y: 0 },\r\n      timeStamp: 0,\r\n    };\r\n\r\n    // Change in coordinates and time of the pointer\r\n    this.pointerDelta = {\r\n      page     : { x: 0, y: 0, vx: 0, vy: 0, speed: 0 },\r\n      client   : { x: 0, y: 0, vx: 0, vy: 0, speed: 0 },\r\n      timeStamp: 0,\r\n    };\r\n\r\n    this.downEvent   = null;    // pointerdown/mousedown/touchstart event\r\n    this.downPointer = {};\r\n\r\n    this._eventTarget    = null;\r\n    this._curEventTarget = null;\r\n\r\n    this.prevEvent = null;      // previous action event\r\n\r\n    this.pointerIsDown   = false;\r\n    this.pointerWasMoved = false;\r\n    this._interacting    = false;\r\n\r\n    this.mouse = false;\r\n\r\n    signals.fire('new', this);\r\n\r\n    scope.interactions.push(this);\r\n  }\r\n\r\n  pointerDown (pointer, event, eventTarget) {\r\n    const pointerIndex = this.updatePointer(pointer, event, true);\r\n\r\n    signals.fire('down', {\r\n      pointer,\r\n      event,\r\n      eventTarget,\r\n      pointerIndex,\r\n      interaction: this,\r\n    });\r\n  }\r\n\r\n  /*\\\r\n   * Interaction.start\r\n   [ method ]\r\n   *\r\n   * Start an action with the given Interactable and Element as tartgets. The\r\n   * action must be enabled for the target Interactable and an appropriate number\r\n   * of pointers must be held down - 1 for drag/resize, 2 for gesture.\r\n   *\r\n   * Use it with `interactable.<action>able({ manualStart: false })` to always\r\n   * [start actions manually](https://github.com/taye/interact.js/issues/114)\r\n   *\r\n   - action  (object)  The action to be performed - drag, resize, etc.\r\n   - target  (Interactable) The Interactable to target\r\n   - element (Element) The DOM Element to target\r\n   = (object) interact\r\n   **\r\n   | interact(target)\r\n   |   .draggable({\r\n   |     // disable the default drag start by down->move\r\n   |     manualStart: true\r\n   |   })\r\n   |   // start dragging after the user holds the pointer down\r\n   |   .on('hold', function (event) {\r\n   |     var interaction = event.interaction;\r\n   |\r\n   |     if (!interaction.interacting()) {\r\n   |       interaction.start({ name: 'drag' },\r\n   |                         event.interactable,\r\n   |                         event.currentTarget);\r\n   |     }\r\n   | });\r\n   \\*/\r\n  start (action, target, element) {\r\n    if (this.interacting()\r\n        || !this.pointerIsDown\r\n        || this.pointerIds.length < (action.name === 'gesture'? 2 : 1)) {\r\n      return;\r\n    }\r\n\r\n    // if this interaction had been removed after stopping\r\n    // add it back\r\n    if (utils.indexOf(scope.interactions, this) === -1) {\r\n      scope.interactions.push(this);\r\n    }\r\n\r\n    utils.copyAction(this.prepared, action);\r\n    this.target         = target;\r\n    this.element        = element;\r\n\r\n    signals.fire('action-start', {\r\n      interaction: this,\r\n      event: this.downEvent,\r\n    });\r\n  }\r\n\r\n  pointerMove (pointer, event, eventTarget) {\r\n    if (!this.simulation) {\r\n      this.updatePointer(pointer);\r\n      utils.setCoords(this.curCoords, this.pointers);\r\n    }\r\n\r\n    const duplicateMove = (this.curCoords.page.x === this.prevCoords.page.x\r\n                           && this.curCoords.page.y === this.prevCoords.page.y\r\n                           && this.curCoords.client.x === this.prevCoords.client.x\r\n                           && this.curCoords.client.y === this.prevCoords.client.y);\r\n\r\n    let dx;\r\n    let dy;\r\n\r\n    // register movement greater than pointerMoveTolerance\r\n    if (this.pointerIsDown && !this.pointerWasMoved) {\r\n      dx = this.curCoords.client.x - this.startCoords.client.x;\r\n      dy = this.curCoords.client.y - this.startCoords.client.y;\r\n\r\n      this.pointerWasMoved = utils.hypot(dx, dy) > Interaction.pointerMoveTolerance;\r\n    }\r\n\r\n    const signalArg = {\r\n      pointer,\r\n      pointerIndex: this.getPointerIndex(pointer),\r\n      event,\r\n      eventTarget,\r\n      dx,\r\n      dy,\r\n      duplicate: duplicateMove,\r\n      interaction: this,\r\n      interactingBeforeMove: this.interacting(),\r\n    };\r\n\r\n    if (!duplicateMove) {\r\n      // set pointer coordinate, time changes and speeds\r\n      utils.setCoordDeltas(this.pointerDelta, this.prevCoords, this.curCoords);\r\n    }\r\n\r\n    signals.fire('move', signalArg);\r\n\r\n    if (!duplicateMove) {\r\n      // if interacting, fire an 'action-move' signal etc\r\n      if (this.interacting()) {\r\n        this.doMove(signalArg);\r\n      }\r\n\r\n      if (this.pointerWasMoved) {\r\n        utils.copyCoords(this.prevCoords, this.curCoords);\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\\\r\n   * Interaction.doMove\r\n   [ method ]\r\n   *\r\n   * Force a move of the current action at the same coordinates. Useful if\r\n   * snap/restrict has been changed and you want a movement with the new\r\n   * settings.\r\n   *\r\n   **\r\n   | interact(target)\r\n   |   .draggable(true)\r\n   |   .on('dragmove', function (event) {\r\n   |     if (someCondition) {\r\n   |       // change the snap settings\r\n   |       event.interactable.draggable({ snap: { targets: [] }});\r\n   |       // fire another move event with re-calculated snap\r\n   |       event.interaction.doMove();\r\n   |     }\r\n   |   });\r\n   \\*/\r\n  doMove (signalArg) {\r\n    signalArg = utils.extend({\r\n      pointer: this.pointers[0],\r\n      event: this.prevEvent,\r\n      eventTarget: this._eventTarget,\r\n      interaction: this,\r\n    }, signalArg || {});\r\n\r\n    signals.fire('before-action-move', signalArg);\r\n\r\n    if (!this._dontFireMove) {\r\n      signals.fire('action-move', signalArg);\r\n    }\r\n\r\n    this._dontFireMove = false;\r\n  }\r\n\r\n  // End interact move events and stop auto-scroll unless simulation is running\r\n  pointerUp (pointer, event, eventTarget, curEventTarget) {\r\n    const pointerIndex = this.getPointerIndex(pointer);\r\n\r\n    signals.fire(/cancel$/i.test(event.type)? 'cancel' : 'up', {\r\n      pointer,\r\n      pointerIndex,\r\n      event,\r\n      eventTarget,\r\n      curEventTarget,\r\n      interaction: this,\r\n    });\r\n\r\n    if (!this.simulation) {\r\n      this.end(event);\r\n    }\r\n\r\n    this.pointerIsDown = false;\r\n    this.removePointer(pointer, event);\r\n  }\r\n\r\n  /*\\\r\n   * Interaction.end\r\n   [ method ]\r\n   *\r\n   * Stop the current action and fire an end event. Inertial movement does\r\n   * not happen.\r\n   *\r\n   - event (PointerEvent) #optional\r\n   **\r\n   | interact(target)\r\n   |   .draggable(true)\r\n   |   .on('move', function (event) {\r\n   |     if (event.pageX > 1000) {\r\n   |       // end the current action\r\n   |       event.interaction.end();\r\n   |       // stop all further listeners from being called\r\n   |       event.stopImmediatePropagation();\r\n   |     }\r\n   |   });\r\n   \\*/\r\n  end (event) {\r\n    event = event || this.prevEvent;\r\n\r\n    if (this.interacting()) {\r\n      signals.fire('action-end', {\r\n        event,\r\n        interaction: this,\r\n      });\r\n    }\r\n\r\n    this.stop();\r\n  }\r\n\r\n  currentAction () {\r\n    return this._interacting? this.prepared.name: null;\r\n  }\r\n\r\n  interacting () {\r\n    return this._interacting;\r\n  }\r\n\r\n  stop () {\r\n    signals.fire('stop', { interaction: this });\r\n\r\n    if (this._interacting) {\r\n      signals.fire('stop-active', { interaction: this });\r\n      signals.fire('stop-' + this.prepared.name, { interaction: this });\r\n    }\r\n\r\n    this.target = this.element = null;\r\n\r\n    this._interacting = false;\r\n    this.prepared.name = this.prevEvent = null;\r\n  }\r\n\r\n  getPointerIndex (pointer) {\r\n    return utils.indexOf(this.pointerIds, utils.getPointerId(pointer));\r\n  }\r\n\r\n  updatePointer (pointer, event, down = event && /(down|start)$/i.test(event.type)) {\r\n    const id = utils.getPointerId(pointer);\r\n    let index = this.getPointerIndex(pointer);\r\n\r\n    if (index === -1) {\r\n      index = this.pointerIds.length;\r\n      this.pointerIds[index] = id;\r\n    }\r\n\r\n    if (down) {\r\n      signals.fire('update-pointer-down', {\r\n        pointer,\r\n        event,\r\n        down,\r\n        pointerId: id,\r\n        pointerIndex: index,\r\n        interaction: this,\r\n      });\r\n    }\r\n\r\n    this.pointers[index] = pointer;\r\n\r\n    return index;\r\n  }\r\n\r\n  removePointer (pointer, event) {\r\n    const id = utils.getPointerId(pointer);\r\n    const index = this.mouse? 0 : utils.indexOf(this.pointerIds, id);\r\n\r\n    if (index === -1) { return; }\r\n\r\n    signals.fire('remove-pointer', {\r\n      pointer,\r\n      event,\r\n      pointerIndex: index,\r\n      interaction: this,\r\n    });\r\n\r\n    this.pointers   .splice(index, 1);\r\n    this.pointerIds .splice(index, 1);\r\n    this.downTargets.splice(index, 1);\r\n    this.downTimes  .splice(index, 1);\r\n  }\r\n\r\n  _updateEventTargets (target, currentTarget) {\r\n    this._eventTarget    = target;\r\n    this._curEventTarget = currentTarget;\r\n  }\r\n}\r\n\r\nfor (let i = 0, len = methodNames.length; i < len; i++) {\r\n  const method = methodNames[i];\r\n\r\n  listeners[method] = doOnInteractions(method);\r\n}\r\n\r\nfunction doOnInteractions (method) {\r\n  return (function (event) {\r\n    const [eventTarget, curEventTarget] = utils.getEventTargets(event);\r\n    const matches = []; // [ [pointer, interaction], ...]\r\n\r\n    if (browser.supportsTouch && /touch/.test(event.type)) {\r\n      prevTouchTime = new Date().getTime();\r\n\r\n      for (let i = 0; i < event.changedTouches.length; i++) {\r\n        const pointer = event.changedTouches[i];\r\n        const interaction = finder.search(pointer, event.type, eventTarget);\r\n\r\n        matches.push([pointer, interaction || new Interaction()]);\r\n      }\r\n    }\r\n    else {\r\n      let invalidPointer = false;\r\n\r\n      if (!browser.supportsPointerEvent && /mouse/.test(event.type)) {\r\n        // ignore mouse events while touch interactions are active\r\n        for (let i = 0; i < scope.interactions.length && !invalidPointer; i++) {\r\n          invalidPointer = !scope.interactions[i].mouse && scope.interactions[i].pointerIsDown;\r\n        }\r\n\r\n        // try to ignore mouse events that are simulated by the browser\r\n        // after a touch event\r\n        invalidPointer = invalidPointer\r\n          || (new Date().getTime() - prevTouchTime < 500)\r\n          // on iOS and Firefox Mobile, MouseEvent.timeStamp is zero if simulated\r\n          || event.timeStamp === 0;\r\n      }\r\n\r\n      if (!invalidPointer) {\r\n        let interaction = finder.search(event, event.type, eventTarget);\r\n\r\n        if (!interaction) {\r\n\r\n          interaction = new Interaction();\r\n          interaction.mouse = (/mouse/i.test(event.pointerType || event.type)\r\n                               // MSPointerEvent.MSPOINTER_TYPE_MOUSE\r\n                               || event.pointerType === 4\r\n                               || !event.pointerType);\r\n        }\r\n\r\n        matches.push([event, interaction]);\r\n      }\r\n    }\r\n\r\n    for (const [pointer, interaction] of matches) {\r\n      interaction._updateEventTargets(eventTarget, curEventTarget);\r\n      interaction[method](pointer, event, eventTarget, curEventTarget);\r\n    }\r\n  });\r\n}\r\n\r\nfunction endAll (event) {\r\n  for (let i = 0; i < scope.interactions.length; i++) {\r\n    const interaction = scope.interactions[i];\r\n\r\n    interaction.end(event);\r\n    signals.fire('endall', { event, interaction });\r\n  }\r\n}\r\n\r\nconst docEvents = { /* 'eventType': listenerFunc */ };\r\nconst pEventTypes = browser.pEventTypes;\r\n\r\nif (scope.PointerEvent) {\r\n  docEvents[pEventTypes.down  ] = listeners.pointerDown;\r\n  docEvents[pEventTypes.move  ] = listeners.pointerMove;\r\n  docEvents[pEventTypes.up    ] = listeners.pointerUp;\r\n  docEvents[pEventTypes.cancel] = listeners.pointerUp;\r\n}\r\nelse {\r\n  docEvents.mousedown   = listeners.pointerDown;\r\n  docEvents.mousemove   = listeners.pointerMove;\r\n  docEvents.mouseup     = listeners.pointerUp;\r\n\r\n  docEvents.touchstart  = listeners.pointerDown;\r\n  docEvents.touchmove   = listeners.pointerMove;\r\n  docEvents.touchend    = listeners.pointerUp;\r\n  docEvents.touchcancel = listeners.pointerUp;\r\n}\r\n\r\ndocEvents.blur = endAll;\r\n\r\nfunction onDocSignal ({ doc }, signalName) {\r\n  const eventMethod = signalName.indexOf('add') === 0\r\n    ? events.add : events.remove;\r\n\r\n  // delegate event listener\r\n  for (const eventType in scope.delegatedEvents) {\r\n    eventMethod(doc, eventType, events.delegateListener);\r\n    eventMethod(doc, eventType, events.delegateUseCapture, true);\r\n  }\r\n\r\n  for (const eventType in docEvents) {\r\n    eventMethod(doc, eventType, docEvents[eventType]);\r\n  }\r\n}\r\n\r\nsignals.on('update-pointer-down', ({ interaction, pointer, pointerId, pointerIndex, event, eventTarget, down }) => {\r\n  interaction.pointerIds[pointerIndex] = pointerId;\r\n  interaction.pointers[pointerIndex] = pointer;\r\n\r\n  if (down) {\r\n    interaction.pointerIsDown = true;\r\n  }\r\n\r\n  if (!interaction.interacting()) {\r\n    utils.setCoords(interaction.startCoords, interaction.pointers);\r\n\r\n    utils.copyCoords(interaction.curCoords , interaction.startCoords);\r\n    utils.copyCoords(interaction.prevCoords, interaction.startCoords);\r\n\r\n    interaction.downEvent                 = event;\r\n    interaction.downTimes[pointerIndex]   = interaction.curCoords.timeStamp;\r\n    interaction.downTargets[pointerIndex] = eventTarget || event && utils.getEventTargets(event)[0];\r\n    interaction.pointerWasMoved           = false;\r\n\r\n    utils.pointerExtend(interaction.downPointer, pointer);\r\n  }\r\n});\r\n\r\nscope.signals.on('add-document'   , onDocSignal);\r\nscope.signals.on('remove-document', onDocSignal);\r\n\r\nInteraction.pointerMoveTolerance = 1;\r\nInteraction.doOnInteractions = doOnInteractions;\r\nInteraction.endAll = endAll;\r\nInteraction.signals = signals;\r\nInteraction.docEvents = docEvents;\r\n\r\nscope.endAllInteractions = endAll;\r\n\r\nmodule.exports = Interaction;\r\n","const Interaction   = require('../Interaction');\r\nconst InteractEvent = require('../InteractEvent');\r\n\r\nconst actions = {\r\n  firePrepared,\r\n  names: [],\r\n  methodDict: {},\r\n};\r\n\r\nInteraction.signals.on('action-start', function ({ interaction, event }) {\r\n  interaction._interacting = true;\r\n  firePrepared(interaction, event, 'start');\r\n});\r\n\r\nInteraction.signals.on('action-move', function ({ interaction, event, preEnd }) {\r\n  firePrepared(interaction, event, 'move', preEnd);\r\n\r\n  // if the action was ended in a listener\r\n  if (!interaction.interacting()) { return false; }\r\n});\r\n\r\nInteraction.signals.on('action-end', function ({ interaction, event }) {\r\n  firePrepared(interaction, event, 'end');\r\n});\r\n\r\nfunction firePrepared (interaction, event, phase, preEnd) {\r\n  const actionName = interaction.prepared.name;\r\n\r\n  const newEvent = new InteractEvent(interaction, event, actionName, phase, interaction.element, null, preEnd);\r\n\r\n  interaction.target.fire(newEvent);\r\n  interaction.prevEvent = newEvent;\r\n}\r\n\r\nmodule.exports = actions;\r\n","const actions        = require('./base');\r\nconst utils          = require('../utils');\r\nconst InteractEvent  = require('../InteractEvent');\r\nconst Interactable   = require('../Interactable');\r\nconst Interaction    = require('../Interaction');\r\nconst defaultOptions = require('../defaultOptions');\r\n\r\nconst drag = {\r\n  defaults: {\r\n    enabled     : false,\r\n    mouseButtons: null,\r\n\r\n    origin    : null,\r\n    snap      : null,\r\n    restrict  : null,\r\n    inertia   : null,\r\n    autoScroll: null,\r\n\r\n    startAxis : 'xy',\r\n    lockAxis  : 'xy',\r\n  },\r\n\r\n  checker: function (pointer, event, interactable) {\r\n    const dragOptions = interactable.options.drag;\r\n\r\n    return dragOptions.enabled\r\n      ? { name: 'drag', axis: (dragOptions.lockAxis === 'start'\r\n                               ? dragOptions.startAxis\r\n                               : dragOptions.lockAxis)}\r\n      : null;\r\n  },\r\n\r\n  getCursor: function () {\r\n    return 'move';\r\n  },\r\n};\r\n\r\nInteraction.signals.on('before-action-move', function ({ interaction }) {\r\n  if (interaction.prepared.name !== 'drag') { return; }\r\n\r\n  const axis = interaction.prepared.axis;\r\n\r\n  if (axis === 'x') {\r\n    interaction.curCoords.page.y   = interaction.startCoords.page.y;\r\n    interaction.curCoords.client.y = interaction.startCoords.client.y;\r\n\r\n    interaction.pointerDelta.page.speed   = Math.abs(interaction.pointerDelta.page.vx);\r\n    interaction.pointerDelta.client.speed = Math.abs(interaction.pointerDelta.client.vx);\r\n    interaction.pointerDelta.client.vy = 0;\r\n    interaction.pointerDelta.page.vy   = 0;\r\n  }\r\n  else if (axis === 'y') {\r\n    interaction.curCoords.page.x   = interaction.startCoords.page.x;\r\n    interaction.curCoords.client.x = interaction.startCoords.client.x;\r\n\r\n    interaction.pointerDelta.page.speed   = Math.abs(interaction.pointerDelta.page.vy);\r\n    interaction.pointerDelta.client.speed = Math.abs(interaction.pointerDelta.client.vy);\r\n    interaction.pointerDelta.client.vx = 0;\r\n    interaction.pointerDelta.page.vx   = 0;\r\n  }\r\n});\r\n\r\n// dragmove\r\nInteractEvent.signals.on('new', function ({ iEvent, interaction }) {\r\n  if (iEvent.type !== 'dragmove') { return; }\r\n\r\n  const axis = interaction.prepared.axis;\r\n\r\n  if (axis === 'x') {\r\n    iEvent.pageY   = interaction.startCoords.page.y;\r\n    iEvent.clientY = interaction.startCoords.client.y;\r\n    iEvent.dy = 0;\r\n  }\r\n  else if (axis === 'y') {\r\n    iEvent.pageX   = interaction.startCoords.page.x;\r\n    iEvent.clientX = interaction.startCoords.client.x;\r\n    iEvent.dx = 0;\r\n  }\r\n});\r\n\r\n/*\\\r\n * Interactable.draggable\r\n [ method ]\r\n *\r\n * Gets or sets whether drag actions can be performed on the\r\n * Interactable\r\n *\r\n = (boolean) Indicates if this can be the target of drag events\r\n | var isDraggable = interact('ul li').draggable();\r\n * or\r\n - options (boolean | object) #optional true/false or An object with event listeners to be fired on drag events (object makes the Interactable draggable)\r\n = (object) This Interactable\r\n | interact(element).draggable({\r\n |     onstart: function (event) {},\r\n |     onmove : function (event) {},\r\n |     onend  : function (event) {},\r\n |\r\n |     // the axis in which the first movement must be\r\n |     // for the drag sequence to start\r\n |     // 'xy' by default - any direction\r\n |     startAxis: 'x' || 'y' || 'xy',\r\n |\r\n |     // 'xy' by default - don't restrict to one axis (move in any direction)\r\n |     // 'x' or 'y' to restrict movement to either axis\r\n |     // 'start' to restrict movement to the axis the drag started in\r\n |     lockAxis: 'x' || 'y' || 'xy' || 'start',\r\n |\r\n |     // max number of drags that can happen concurrently\r\n |     // with elements of this Interactable. Infinity by default\r\n |     max: Infinity,\r\n |\r\n |     // max number of drags that can target the same element+Interactable\r\n |     // 1 by default\r\n |     maxPerElement: 2\r\n | });\r\n\\*/\r\nInteractable.prototype.draggable = function (options) {\r\n  if (utils.is.object(options)) {\r\n    this.options.drag.enabled = options.enabled === false? false: true;\r\n    this.setPerAction('drag', options);\r\n    this.setOnEvents('drag', options);\r\n\r\n    if (/^(xy|x|y|start)$/.test(options.lockAxis)) {\r\n      this.options.drag.lockAxis = options.lockAxis;\r\n    }\r\n    if (/^(xy|x|y)$/.test(options.startAxis)) {\r\n      this.options.drag.startAxis = options.startAxis;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  if (utils.is.bool(options)) {\r\n    this.options.drag.enabled = options;\r\n\r\n    if (!options) {\r\n      this.ondragstart = this.ondragstart = this.ondragend = null;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  return this.options.drag;\r\n};\r\n\r\nactions.drag = drag;\r\nactions.names.push('drag');\r\nutils.merge(Interactable.eventTypes, [\r\n  'dragstart',\r\n  'dragmove',\r\n  'draginertiastart',\r\n  'draginertiaresume',\r\n  'dragend',\r\n]);\r\nactions.methodDict.drag = 'draggable';\r\n\r\ndefaultOptions.drag = drag.defaults;\r\n\r\nmodule.exports = drag;\r\n","const actions        = require('./base');\r\nconst utils          = require('../utils');\r\nconst scope          = require('../scope');\r\nconst interact       = require('../interact');\r\nconst InteractEvent  = require('../InteractEvent');\r\nconst Interactable   = require('../Interactable');\r\nconst Interaction    = require('../Interaction');\r\nconst defaultOptions = require('../defaultOptions');\r\n\r\nconst drop = {\r\n  defaults: {\r\n    enabled: false,\r\n    accept : null,\r\n    overlap: 'pointer',\r\n  },\r\n};\r\n\r\nlet dynamicDrop = false;\r\n\r\nInteraction.signals.on('action-start', function ({ interaction, event }) {\r\n  if (interaction.prepared.name !== 'drag') { return; }\r\n\r\n  // reset active dropzones\r\n  interaction.activeDrops.dropzones = [];\r\n  interaction.activeDrops.elements  = [];\r\n  interaction.activeDrops.rects     = [];\r\n\r\n  interaction.dropEvents = null;\r\n\r\n  if (!interaction.dynamicDrop) {\r\n    setActiveDrops(interaction, interaction.element);\r\n  }\r\n\r\n  const dragEvent = interaction.prevEvent;\r\n  const dropEvents = getDropEvents(interaction, event, dragEvent);\r\n\r\n  if (dropEvents.activate) {\r\n    fireActiveDrops(interaction, dropEvents.activate);\r\n  }\r\n});\r\n\r\nInteractEvent.signals.on('new', function ({ interaction, iEvent, event }) {\r\n  if (iEvent.type !== 'dragmove' && iEvent.type !== 'dragend') { return; }\r\n\r\n  const draggableElement = interaction.element;\r\n  const dragEvent = iEvent;\r\n  const dropResult = getDrop(dragEvent, event, draggableElement);\r\n\r\n  interaction.dropTarget  = dropResult.dropzone;\r\n  interaction.dropElement = dropResult.element;\r\n\r\n  interaction.dropEvents = getDropEvents(interaction, event, dragEvent);\r\n});\r\n\r\nInteraction.signals.on('action-move', function ({ interaction }) {\r\n  if (interaction.prepared.name !== 'drag') { return; }\r\n\r\n  fireDropEvents(interaction, interaction.dropEvents);\r\n});\r\n\r\nInteraction.signals.on('action-end', function ({ interaction }) {\r\n  if (interaction.prepared.name === 'drag') {\r\n    fireDropEvents(interaction, interaction.dropEvents);\r\n  }\r\n});\r\n\r\nInteraction.signals.on('stop-drag', function ({ interaction }) {\r\n  interaction.activeDrops.dropzones =\r\n    interaction.activeDrops.elements =\r\n    interaction.activeDrops.rects =\r\n    interaction.dropEvents = null;\r\n});\r\n\r\nfunction collectDrops (interaction, element) {\r\n  const drops = [];\r\n  const elements = [];\r\n\r\n  element = element || interaction.element;\r\n\r\n  // collect all dropzones and their elements which qualify for a drop\r\n  for (const current of scope.interactables) {\r\n    if (!current.options.drop.enabled) { continue; }\r\n\r\n    const accept = current.options.drop.accept;\r\n\r\n    // test the draggable element against the dropzone's accept setting\r\n    if ((utils.is.element(accept) && accept !== element)\r\n        || (utils.is.string(accept)\r\n        && !utils.matchesSelector(element, accept))) {\r\n\r\n      continue;\r\n    }\r\n\r\n    // query for new elements if necessary\r\n    const dropElements = utils.is.string(current.target)\r\n      ? current._context.querySelectorAll(current.target)\r\n      : [current.target];\r\n\r\n    for (let i = 0; i < dropElements.length; i++) {\r\n      const currentElement = dropElements[i];\r\n\r\n      if (currentElement !== element) {\r\n        drops.push(current);\r\n        elements.push(currentElement);\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    elements,\r\n    dropzones: drops,\r\n  };\r\n}\r\n\r\nfunction fireActiveDrops (interaction, event) {\r\n  let prevElement;\r\n\r\n  // loop through all active dropzones and trigger event\r\n  for (let i = 0; i < interaction.activeDrops.dropzones.length; i++) {\r\n    const current = interaction.activeDrops.dropzones[i];\r\n    const currentElement = interaction.activeDrops.elements [i];\r\n\r\n    // prevent trigger of duplicate events on same element\r\n    if (currentElement !== prevElement) {\r\n      // set current element as event target\r\n      event.target = currentElement;\r\n      current.fire(event);\r\n    }\r\n    prevElement = currentElement;\r\n  }\r\n}\r\n\r\n// Collect a new set of possible drops and save them in activeDrops.\r\n// setActiveDrops should always be called when a drag has just started or a\r\n// drag event happens while dynamicDrop is true\r\nfunction setActiveDrops (interaction, dragElement) {\r\n  // get dropzones and their elements that could receive the draggable\r\n  const possibleDrops = collectDrops(interaction, dragElement, true);\r\n\r\n  interaction.activeDrops.dropzones = possibleDrops.dropzones;\r\n  interaction.activeDrops.elements  = possibleDrops.elements;\r\n  interaction.activeDrops.rects     = [];\r\n\r\n  for (let i = 0; i < interaction.activeDrops.dropzones.length; i++) {\r\n    interaction.activeDrops.rects[i] =\r\n      interaction.activeDrops.dropzones[i].getRect(interaction.activeDrops.elements[i]);\r\n  }\r\n}\r\n\r\nfunction getDrop (dragEvent, event, dragElement) {\r\n  const interaction = dragEvent.interaction;\r\n  const validDrops = [];\r\n\r\n  if (dynamicDrop) {\r\n    setActiveDrops(interaction, dragElement);\r\n  }\r\n\r\n  // collect all dropzones and their elements which qualify for a drop\r\n  for (let j = 0; j < interaction.activeDrops.dropzones.length; j++) {\r\n    const current        = interaction.activeDrops.dropzones[j];\r\n    const currentElement = interaction.activeDrops.elements [j];\r\n    const rect           = interaction.activeDrops.rects    [j];\r\n\r\n    validDrops.push(current.dropCheck(dragEvent, event, interaction.target, dragElement, currentElement, rect)\r\n      ? currentElement\r\n      : null);\r\n  }\r\n\r\n  // get the most appropriate dropzone based on DOM depth and order\r\n  const dropIndex = utils.indexOfDeepestElement(validDrops);\r\n\r\n  return {\r\n    dropzone: interaction.activeDrops.dropzones[dropIndex] || null,\r\n    element : interaction.activeDrops.elements [dropIndex] || null,\r\n  };\r\n}\r\n\r\nfunction getDropEvents (interaction, pointerEvent, dragEvent) {\r\n  const dropEvents = {\r\n    enter     : null,\r\n    leave     : null,\r\n    activate  : null,\r\n    deactivate: null,\r\n    move      : null,\r\n    drop      : null,\r\n  };\r\n\r\n  const tmpl = {\r\n    dragEvent,\r\n    interaction,\r\n    target       : interaction.dropElement,\r\n    dropzone     : interaction.dropTarget,\r\n    relatedTarget: dragEvent.target,\r\n    draggable    : dragEvent.interactable,\r\n    timeStamp    : dragEvent.timeStamp,\r\n  };\r\n\r\n  if (interaction.dropElement !== interaction.prevDropElement) {\r\n    // if there was a prevDropTarget, create a dragleave event\r\n    if (interaction.prevDropTarget) {\r\n      dropEvents.leave = utils.extend({ type: 'dragleave' }, tmpl);\r\n\r\n      dragEvent.dragLeave    = dropEvents.leave.target   = interaction.prevDropElement;\r\n      dragEvent.prevDropzone = dropEvents.leave.dropzone = interaction.prevDropTarget;\r\n    }\r\n    // if the dropTarget is not null, create a dragenter event\r\n    if (interaction.dropTarget) {\r\n      dropEvents.enter = {\r\n        dragEvent,\r\n        interaction,\r\n        target       : interaction.dropElement,\r\n        dropzone     : interaction.dropTarget,\r\n        relatedTarget: dragEvent.target,\r\n        draggable    : dragEvent.interactable,\r\n        timeStamp    : dragEvent.timeStamp,\r\n        type         : 'dragenter',\r\n      };\r\n\r\n      dragEvent.dragEnter = interaction.dropElement;\r\n      dragEvent.dropzone = interaction.dropTarget;\r\n    }\r\n  }\r\n\r\n  if (dragEvent.type === 'dragend' && interaction.dropTarget) {\r\n    dropEvents.drop = utils.extend({ type: 'drop' }, tmpl);\r\n\r\n    dragEvent.dropzone = interaction.dropTarget;\r\n    dragEvent.relatedTarget = interaction.dropElement;\r\n  }\r\n  if (dragEvent.type === 'dragstart') {\r\n    dropEvents.activate = utils.extend({ type: 'dropactivate' }, tmpl);\r\n\r\n    dropEvents.activate.target   = null;\r\n    dropEvents.activate.dropzone = null;\r\n  }\r\n  if (dragEvent.type === 'dragend') {\r\n    dropEvents.deactivate = utils.extend({ type: 'dropdeactivate' }, tmpl);\r\n\r\n    dropEvents.deactivate.target   = null;\r\n    dropEvents.deactivate.dropzone = null;\r\n  }\r\n  if (dragEvent.type === 'dragmove' && interaction.dropTarget) {\r\n    dropEvents.move = utils.extend({\r\n      dragmove     : dragEvent,\r\n      type         : 'dropmove',\r\n    }, tmpl);\r\n\r\n    dragEvent.dropzone = interaction.dropTarget;\r\n  }\r\n\r\n  return dropEvents;\r\n}\r\n\r\nfunction fireDropEvents (interaction, dropEvents) {\r\n  if (dropEvents.leave) { interaction.prevDropTarget.fire(dropEvents.leave); }\r\n  if (dropEvents.move ) {     interaction.dropTarget.fire(dropEvents.move ); }\r\n  if (dropEvents.enter) {     interaction.dropTarget.fire(dropEvents.enter); }\r\n  if (dropEvents.drop ) {     interaction.dropTarget.fire(dropEvents.drop ); }\r\n  if (dropEvents.deactivate) {\r\n    fireActiveDrops(interaction, dropEvents.deactivate);\r\n  }\r\n\r\n  interaction.prevDropTarget  = interaction.dropTarget;\r\n  interaction.prevDropElement = interaction.dropElement;\r\n}\r\n\r\n/*\\\r\n * Interactable.dropzone\r\n [ method ]\r\n *\r\n * Returns or sets whether elements can be dropped onto this\r\n * Interactable to trigger drop events\r\n *\r\n * Dropzones can receive the following events:\r\n *  - `dropactivate` and `dropdeactivate` when an acceptable drag starts and ends\r\n *  - `dragenter` and `dragleave` when a draggable enters and leaves the dropzone\r\n *  - `dragmove` when a draggable that has entered the dropzone is moved\r\n *  - `drop` when a draggable is dropped into this dropzone\r\n *\r\n * Use the `accept` option to allow only elements that match the given CSS\r\n * selector or element. The value can be:\r\n *\r\n *  - **an Element** - only that element can be dropped into this dropzone.\r\n *  - **a string**, - the element being dragged must match it as a CSS selector.\r\n *  - **`null`** - accept options is cleared - it accepts any element.\r\n *\r\n * Use the `overlap` option to set how drops are checked for. The allowed\r\n * values are:\r\n *\r\n *   - `'pointer'`, the pointer must be over the dropzone (default)\r\n *   - `'center'`, the draggable element's center must be over the dropzone\r\n *   - a number from 0-1 which is the `(intersection area) / (draggable area)`.\r\n *   e.g. `0.5` for drop to happen when half of the area of the draggable is\r\n *   over the dropzone\r\n *\r\n * Use the `checker` option to specify a function to check if a dragged\r\n * element is over this Interactable.\r\n *\r\n | interact(target)\r\n | .dropChecker(function(dragEvent,         // related dragmove or dragend event\r\n |                       event,             // TouchEvent/PointerEvent/MouseEvent\r\n |                       dropped,           // bool result of the default checker\r\n |                       dropzone,          // dropzone Interactable\r\n |                       dropElement,       // dropzone elemnt\r\n |                       draggable,         // draggable Interactable\r\n |                       draggableElement) {// draggable element\r\n |\r\n |   return dropped && event.target.hasAttribute('allow-drop');\r\n | }\r\n *\r\n *\r\n - options (boolean | object | null) #optional The new value to be set.\r\n | interact('.drop').dropzone({\r\n |   accept: '.can-drop' || document.getElementById('single-drop'),\r\n |   overlap: 'pointer' || 'center' || zeroToOne\r\n | }\r\n = (boolean | object) The current setting or this Interactable\r\n\\*/\r\nInteractable.prototype.dropzone = function (options) {\r\n  if (utils.is.object(options)) {\r\n    this.options.drop.enabled = options.enabled === false? false: true;\r\n\r\n    if (utils.is.function(options.ondrop)          ) { this.events.ondrop           = options.ondrop          ; }\r\n    if (utils.is.function(options.ondropactivate)  ) { this.events.ondropactivate   = options.ondropactivate  ; }\r\n    if (utils.is.function(options.ondropdeactivate)) { this.events.ondropdeactivate = options.ondropdeactivate; }\r\n    if (utils.is.function(options.ondragenter)     ) { this.events.ondragenter      = options.ondragenter     ; }\r\n    if (utils.is.function(options.ondragleave)     ) { this.events.ondragleave      = options.ondragleave     ; }\r\n    if (utils.is.function(options.ondropmove)      ) { this.events.ondropmove       = options.ondropmove      ; }\r\n\r\n    if (/^(pointer|center)$/.test(options.overlap)) {\r\n      this.options.drop.overlap = options.overlap;\r\n    }\r\n    else if (utils.is.number(options.overlap)) {\r\n      this.options.drop.overlap = Math.max(Math.min(1, options.overlap), 0);\r\n    }\r\n    if ('accept' in options) {\r\n      this.options.drop.accept = options.accept;\r\n    }\r\n    if ('checker' in options) {\r\n      this.options.drop.checker = options.checker;\r\n    }\r\n\r\n\r\n    return this;\r\n  }\r\n\r\n  if (utils.is.bool(options)) {\r\n    this.options.drop.enabled = options;\r\n\r\n    if (!options) {\r\n      this.ondragenter = this.ondragleave = this.ondrop\r\n        = this.ondropactivate = this.ondropdeactivate = null;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  return this.options.drop;\r\n};\r\n\r\nInteractable.prototype.dropCheck = function (dragEvent, event, draggable, draggableElement, dropElement, rect) {\r\n  let dropped = false;\r\n\r\n  // if the dropzone has no rect (eg. display: none)\r\n  // call the custom dropChecker or just return false\r\n  if (!(rect = rect || this.getRect(dropElement))) {\r\n    return (this.options.drop.checker\r\n      ? this.options.drop.checker(dragEvent, event, dropped, this, dropElement, draggable, draggableElement)\r\n      : false);\r\n  }\r\n\r\n  const dropOverlap = this.options.drop.overlap;\r\n\r\n  if (dropOverlap === 'pointer') {\r\n    const origin = utils.getOriginXY(draggable, draggableElement, 'drag');\r\n    const page = utils.getPageXY(dragEvent);\r\n\r\n    page.x += origin.x;\r\n    page.y += origin.y;\r\n\r\n    const horizontal = (page.x > rect.left) && (page.x < rect.right);\r\n    const vertical   = (page.y > rect.top ) && (page.y < rect.bottom);\r\n\r\n    dropped = horizontal && vertical;\r\n  }\r\n\r\n  const dragRect = draggable.getRect(draggableElement);\r\n\r\n  if (dragRect && dropOverlap === 'center') {\r\n    const cx = dragRect.left + dragRect.width  / 2;\r\n    const cy = dragRect.top  + dragRect.height / 2;\r\n\r\n    dropped = cx >= rect.left && cx <= rect.right && cy >= rect.top && cy <= rect.bottom;\r\n  }\r\n\r\n  if (dragRect && utils.is.number(dropOverlap)) {\r\n    const overlapArea  = (Math.max(0, Math.min(rect.right , dragRect.right ) - Math.max(rect.left, dragRect.left))\r\n                          * Math.max(0, Math.min(rect.bottom, dragRect.bottom) - Math.max(rect.top , dragRect.top )));\r\n\r\n    const overlapRatio = overlapArea / (dragRect.width * dragRect.height);\r\n\r\n    dropped = overlapRatio >= dropOverlap;\r\n  }\r\n\r\n  if (this.options.drop.checker) {\r\n    dropped = this.options.drop.checker(dragEvent, event, dropped, this, dropElement, draggable, draggableElement);\r\n  }\r\n\r\n  return dropped;\r\n};\r\n\r\nInteractable.signals.on('unset', function ({ interactable }) {\r\n  interactable.dropzone(false);\r\n});\r\n\r\nInteractable.settingsMethods.push('dropChecker');\r\n\r\nInteraction.signals.on('new', function (interaction) {\r\n  interaction.dropTarget      = null; // the dropzone a drag target might be dropped into\r\n  interaction.dropElement     = null; // the element at the time of checking\r\n  interaction.prevDropTarget  = null; // the dropzone that was recently dragged away from\r\n  interaction.prevDropElement = null; // the element at the time of checking\r\n  interaction.dropEvents      = null; // the dropEvents related to the current drag event\r\n\r\n  interaction.activeDrops = {\r\n    dropzones: [],      // the dropzones that are mentioned below\r\n    elements : [],      // elements of dropzones that accept the target draggable\r\n    rects    : [],      // the rects of the elements mentioned above\r\n  };\r\n\r\n});\r\n\r\nInteraction.signals.on('stop', function ({ interaction }) {\r\n  interaction.dropTarget = interaction.dropElement =\r\n    interaction.prevDropTarget = interaction.prevDropElement = null;\r\n});\r\n\r\n/*\\\r\n * interact.dynamicDrop\r\n [ method ]\r\n *\r\n * Returns or sets whether the dimensions of dropzone elements are\r\n * calculated on every dragmove or only on dragstart for the default\r\n * dropChecker\r\n *\r\n - newValue (boolean) #optional True to check on each move. False to check only before start\r\n = (boolean | interact) The current setting or interact\r\n\\*/\r\ninteract.dynamicDrop = function (newValue) {\r\n  if (utils.is.bool(newValue)) {\r\n    //if (dragging && dynamicDrop !== newValue && !newValue) {\r\n      //calcRects(dropzones);\r\n    //}\r\n\r\n    dynamicDrop = newValue;\r\n\r\n    return interact;\r\n  }\r\n  return dynamicDrop;\r\n};\r\n\r\nutils.merge(Interactable.eventTypes, [\r\n  'dragenter',\r\n  'dragleave',\r\n  'dropactivate',\r\n  'dropdeactivate',\r\n  'dropmove',\r\n  'drop',\r\n]);\r\nactions.methodDict.drop = 'dropzone';\r\n\r\ndefaultOptions.drop = drop.defaults;\r\n\r\nmodule.exports = drop;\r\n","const actions        = require('./base');\r\nconst utils          = require('../utils');\r\nconst InteractEvent  = require('../InteractEvent');\r\nconst Interactable   = require('../Interactable');\r\nconst Interaction    = require('../Interaction');\r\nconst defaultOptions = require('../defaultOptions');\r\n\r\nconst gesture = {\r\n  defaults: {\r\n    enabled : false,\r\n    origin  : null,\r\n    restrict: null,\r\n  },\r\n\r\n  checker: function (pointer, event, interactable, element, interaction) {\r\n    if (interaction.pointerIds.length >= 2) {\r\n      return { name: 'gesture' };\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  getCursor: function () {\r\n    return '';\r\n  },\r\n};\r\n\r\nInteractEvent.signals.on('new', function ({ iEvent, interaction }) {\r\n  if (iEvent.type !== 'gesturestart') { return; }\r\n  iEvent.ds = 0;\r\n\r\n  interaction.gesture.startDistance = interaction.gesture.prevDistance = iEvent.distance;\r\n  interaction.gesture.startAngle = interaction.gesture.prevAngle = iEvent.angle;\r\n  interaction.gesture.scale = 1;\r\n});\r\n\r\nInteractEvent.signals.on('new', function ({ iEvent, interaction }) {\r\n  if (iEvent.type !== 'gesturemove') { return; }\r\n\r\n  iEvent.ds = iEvent.scale - interaction.gesture.scale;\r\n\r\n  interaction.target.fire(iEvent);\r\n\r\n  interaction.gesture.prevAngle = iEvent.angle;\r\n  interaction.gesture.prevDistance = iEvent.distance;\r\n\r\n  if (iEvent.scale !== Infinity\r\n      && iEvent.scale !== null\r\n      && iEvent.scale !== undefined\r\n      && !isNaN(iEvent.scale)) {\r\n\r\n    interaction.gesture.scale = iEvent.scale;\r\n  }\r\n});\r\n\r\n/*\\\r\n * Interactable.gesturable\r\n [ method ]\r\n *\r\n * Gets or sets whether multitouch gestures can be performed on the\r\n * Interactable's element\r\n *\r\n = (boolean) Indicates if this can be the target of gesture events\r\n   | var isGestureable = interact(element).gesturable();\r\n * or\r\n - options (boolean | object) #optional true/false or An object with event listeners to be fired on gesture events (makes the Interactable gesturable)\r\n = (object) this Interactable\r\n | interact(element).gesturable({\r\n |     onstart: function (event) {},\r\n |     onmove : function (event) {},\r\n |     onend  : function (event) {},\r\n |\r\n |     // limit multiple gestures.\r\n |     // See the explanation in @Interactable.draggable example\r\n |     max: Infinity,\r\n |     maxPerElement: 1,\r\n | });\r\n\\*/\r\nInteractable.prototype.gesturable = function (options) {\r\n  if (utils.is.object(options)) {\r\n    this.options.gesture.enabled = options.enabled === false? false: true;\r\n    this.setPerAction('gesture', options);\r\n    this.setOnEvents('gesture', options);\r\n\r\n    return this;\r\n  }\r\n\r\n  if (utils.is.bool(options)) {\r\n    this.options.gesture.enabled = options;\r\n\r\n    if (!options) {\r\n      this.ongesturestart = this.ongesturestart = this.ongestureend = null;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  return this.options.gesture;\r\n};\r\n\r\nInteractEvent.signals.on('set-delta', function ({ interaction, iEvent, action, event, starting, ending, deltaSource }) {\r\n  if (action !== 'gesture') { return; }\r\n\r\n  const pointers = interaction.pointers;\r\n\r\n  iEvent.touches = [pointers[0], pointers[1]];\r\n\r\n  if (starting) {\r\n    iEvent.distance = utils.touchDistance(pointers, deltaSource);\r\n    iEvent.box      = utils.touchBBox(pointers);\r\n    iEvent.scale    = 1;\r\n    iEvent.ds       = 0;\r\n    iEvent.angle    = utils.touchAngle(pointers, undefined, deltaSource);\r\n    iEvent.da       = 0;\r\n  }\r\n  else if (ending || event instanceof InteractEvent) {\r\n    iEvent.distance = interaction.prevEvent.distance;\r\n    iEvent.box      = interaction.prevEvent.box;\r\n    iEvent.scale    = interaction.prevEvent.scale;\r\n    iEvent.ds       = iEvent.scale - 1;\r\n    iEvent.angle    = interaction.prevEvent.angle;\r\n    iEvent.da       = iEvent.angle - interaction.gesture.startAngle;\r\n  }\r\n  else {\r\n    iEvent.distance = utils.touchDistance(pointers, deltaSource);\r\n    iEvent.box      = utils.touchBBox(pointers);\r\n    iEvent.scale    = iEvent.distance / interaction.gesture.startDistance;\r\n    iEvent.angle    = utils.touchAngle(pointers, interaction.gesture.prevAngle, deltaSource);\r\n\r\n    iEvent.ds = iEvent.scale - interaction.gesture.prevScale;\r\n    iEvent.da = iEvent.angle - interaction.gesture.prevAngle;\r\n  }\r\n});\r\n\r\nInteraction.signals.on('new', function (interaction) {\r\n  interaction.gesture = {\r\n    start: { x: 0, y: 0 },\r\n\r\n    startDistance: 0,   // distance between two touches of touchStart\r\n    prevDistance : 0,\r\n    distance     : 0,\r\n\r\n    scale: 1,           // gesture.distance / gesture.startDistance\r\n\r\n    startAngle: 0,      // angle of line joining two touches\r\n    prevAngle : 0,      // angle of the previous gesture event\r\n  };\r\n});\r\n\r\nactions.gesture = gesture;\r\nactions.names.push('gesture');\r\nutils.merge(Interactable.eventTypes, [\r\n  'gesturestart',\r\n  'gesturemove',\r\n  'gestureend',\r\n]);\r\nactions.methodDict.gesture = 'gesturable';\r\n\r\ndefaultOptions.gesture = gesture.defaults;\r\n\r\nmodule.exports = gesture;\r\n","const actions        = require('./base');\r\nconst utils          = require('../utils');\r\nconst browser        = require('../utils/browser');\r\nconst InteractEvent  = require('../InteractEvent');\r\nconst Interactable   = require('../Interactable');\r\nconst Interaction    = require('../Interaction');\r\nconst defaultOptions = require('../defaultOptions');\r\n\r\n// Less Precision with touch input\r\nconst defaultMargin = browser.supportsTouch || browser.supportsPointerEvent? 20: 10;\r\n\r\nconst resize = {\r\n  defaults: {\r\n    enabled     : false,\r\n    mouseButtons: null,\r\n\r\n    origin    : null,\r\n    snap      : null,\r\n    restrict  : null,\r\n    inertia   : null,\r\n    autoScroll: null,\r\n\r\n    square: false,\r\n    preserveAspectRatio: false,\r\n    axis: 'xy',\r\n\r\n    // use default margin\r\n    margin: NaN,\r\n\r\n    // object with props left, right, top, bottom which are\r\n    // true/false values to resize when the pointer is over that edge,\r\n    // CSS selectors to match the handles for each direction\r\n    // or the Elements for each handle\r\n    edges: null,\r\n\r\n    // a value of 'none' will limit the resize rect to a minimum of 0x0\r\n    // 'negate' will alow the rect to have negative width/height\r\n    // 'reposition' will keep the width/height positive by swapping\r\n    // the top and bottom edges and/or swapping the left and right edges\r\n    invert: 'none',\r\n  },\r\n\r\n  checker: function (pointer, event, interactable, element, interaction, rect) {\r\n    if (!rect) { return null; }\r\n\r\n    const page = utils.extend({}, interaction.curCoords.page);\r\n    const options = interactable.options;\r\n\r\n    if (options.resize.enabled) {\r\n      const resizeOptions = options.resize;\r\n      const resizeEdges = { left: false, right: false, top: false, bottom: false };\r\n\r\n      // if using resize.edges\r\n      if (utils.is.object(resizeOptions.edges)) {\r\n        for (const edge in resizeEdges) {\r\n          resizeEdges[edge] = checkResizeEdge(edge,\r\n                                              resizeOptions.edges[edge],\r\n                                              page,\r\n                                              interaction._eventTarget,\r\n                                              element,\r\n                                              rect,\r\n                                              resizeOptions.margin || defaultMargin);\r\n        }\r\n\r\n        resizeEdges.left = resizeEdges.left && !resizeEdges.right;\r\n        resizeEdges.top  = resizeEdges.top  && !resizeEdges.bottom;\r\n\r\n        if (resizeEdges.left || resizeEdges.right || resizeEdges.top || resizeEdges.bottom) {\r\n          return {\r\n            name: 'resize',\r\n            edges: resizeEdges,\r\n          };\r\n        }\r\n      }\r\n      else {\r\n        const right  = options.resize.axis !== 'y' && page.x > (rect.right  - defaultMargin);\r\n        const bottom = options.resize.axis !== 'x' && page.y > (rect.bottom - defaultMargin);\r\n\r\n        if (right || bottom) {\r\n          return {\r\n            name: 'resize',\r\n            axes: (right? 'x' : '') + (bottom? 'y' : ''),\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  cursors: (browser.isIe9OrOlder ? {\r\n    x : 'e-resize',\r\n    y : 's-resize',\r\n    xy: 'se-resize',\r\n\r\n    top        : 'n-resize',\r\n    left       : 'w-resize',\r\n    bottom     : 's-resize',\r\n    right      : 'e-resize',\r\n    topleft    : 'se-resize',\r\n    bottomright: 'se-resize',\r\n    topright   : 'ne-resize',\r\n    bottomleft : 'ne-resize',\r\n  } : {\r\n    x : 'ew-resize',\r\n    y : 'ns-resize',\r\n    xy: 'nwse-resize',\r\n\r\n    top        : 'ns-resize',\r\n    left       : 'ew-resize',\r\n    bottom     : 'ns-resize',\r\n    right      : 'ew-resize',\r\n    topleft    : 'nwse-resize',\r\n    bottomright: 'nwse-resize',\r\n    topright   : 'nesw-resize',\r\n    bottomleft : 'nesw-resize',\r\n  }),\r\n\r\n  getCursor: function (action) {\r\n    if (action.axis) {\r\n      return resize.cursors[action.name + action.axis];\r\n    }\r\n    else if (action.edges) {\r\n      let cursorKey = '';\r\n      const edgeNames = ['top', 'bottom', 'left', 'right'];\r\n\r\n      for (let i = 0; i < 4; i++) {\r\n        if (action.edges[edgeNames[i]]) {\r\n          cursorKey += edgeNames[i];\r\n        }\r\n      }\r\n\r\n      return resize.cursors[cursorKey];\r\n    }\r\n  },\r\n};\r\n\r\n// resizestart\r\nInteractEvent.signals.on('new', function ({ iEvent, interaction }) {\r\n  if (iEvent.type !== 'resizestart' || !interaction.prepared.edges) {\r\n    return;\r\n  }\r\n\r\n  const startRect = interaction.target.getRect(interaction.element);\r\n  const resizeOptions = interaction.target.options.resize;\r\n\r\n  /*\r\n   * When using the `resizable.square` or `resizable.preserveAspectRatio` options, resizing from one edge\r\n   * will affect another. E.g. with `resizable.square`, resizing to make the right edge larger will make\r\n   * the bottom edge larger by the same amount. We call these 'linked' edges. Any linked edges will depend\r\n   * on the active edges and the edge being interacted with.\r\n   */\r\n  if (resizeOptions.square || resizeOptions.preserveAspectRatio) {\r\n    const linkedEdges = utils.extend({}, interaction.prepared.edges);\r\n\r\n    linkedEdges.top    = linkedEdges.top    || (linkedEdges.left   && !linkedEdges.bottom);\r\n    linkedEdges.left   = linkedEdges.left   || (linkedEdges.top    && !linkedEdges.right );\r\n    linkedEdges.bottom = linkedEdges.bottom || (linkedEdges.right  && !linkedEdges.top   );\r\n    linkedEdges.right  = linkedEdges.right  || (linkedEdges.bottom && !linkedEdges.left  );\r\n\r\n    interaction.prepared._linkedEdges = linkedEdges;\r\n  }\r\n  else {\r\n    interaction.prepared._linkedEdges = null;\r\n  }\r\n\r\n  // if using `resizable.preserveAspectRatio` option, record aspect ratio at the start of the resize\r\n  if (resizeOptions.preserveAspectRatio) {\r\n    interaction.resizeStartAspectRatio = startRect.width / startRect.height;\r\n  }\r\n\r\n  interaction.resizeRects = {\r\n    start     : startRect,\r\n    current   : utils.extend({}, startRect),\r\n    inverted  : utils.extend({}, startRect),\r\n    previous  : utils.extend({}, startRect),\r\n    delta     : {\r\n      left: 0, right : 0, width : 0,\r\n      top : 0, bottom: 0, height: 0,\r\n    },\r\n  };\r\n\r\n  iEvent.rect = interaction.resizeRects.inverted;\r\n  iEvent.deltaRect = interaction.resizeRects.delta;\r\n});\r\n\r\n// resizemove\r\nInteractEvent.signals.on('new', function ({ iEvent, phase, interaction }) {\r\n  if (phase !== 'move' || !interaction.prepared.edges) { return; }\r\n\r\n  const resizeOptions = interaction.target.options.resize;\r\n  const invert = resizeOptions.invert;\r\n  const invertible = invert === 'reposition' || invert === 'negate';\r\n\r\n  let edges = interaction.prepared.edges;\r\n\r\n  const start      = interaction.resizeRects.start;\r\n  const current    = interaction.resizeRects.current;\r\n  const inverted   = interaction.resizeRects.inverted;\r\n  const delta      = interaction.resizeRects.delta;\r\n  const previous   = utils.extend(interaction.resizeRects.previous, inverted);\r\n  const originalEdges = edges;\r\n\r\n  let dx = iEvent.dx;\r\n  let dy = iEvent.dy;\r\n\r\n  if (resizeOptions.preserveAspectRatio || resizeOptions.square) {\r\n    // `resize.preserveAspectRatio` takes precedence over `resize.square`\r\n    const startAspectRatio = resizeOptions.preserveAspectRatio\r\n      ? interaction.resizeStartAspectRatio\r\n      : 1;\r\n\r\n    edges = interaction.prepared._linkedEdges;\r\n\r\n    if ((originalEdges.left && originalEdges.bottom)\r\n        || (originalEdges.right && originalEdges.top)) {\r\n      dy = -dx / startAspectRatio;\r\n    }\r\n    else if (originalEdges.left || originalEdges.right ) { dy = dx / startAspectRatio; }\r\n    else if (originalEdges.top  || originalEdges.bottom) { dx = dy * startAspectRatio; }\r\n  }\r\n\r\n  // update the 'current' rect without modifications\r\n  if (edges.top   ) { current.top    += dy; }\r\n  if (edges.bottom) { current.bottom += dy; }\r\n  if (edges.left  ) { current.left   += dx; }\r\n  if (edges.right ) { current.right  += dx; }\r\n\r\n  if (invertible) {\r\n    // if invertible, copy the current rect\r\n    utils.extend(inverted, current);\r\n\r\n    if (invert === 'reposition') {\r\n      // swap edge values if necessary to keep width/height positive\r\n      let swap;\r\n\r\n      if (inverted.top > inverted.bottom) {\r\n        swap = inverted.top;\r\n\r\n        inverted.top = inverted.bottom;\r\n        inverted.bottom = swap;\r\n      }\r\n      if (inverted.left > inverted.right) {\r\n        swap = inverted.left;\r\n\r\n        inverted.left = inverted.right;\r\n        inverted.right = swap;\r\n      }\r\n    }\r\n  }\r\n  else {\r\n    // if not invertible, restrict to minimum of 0x0 rect\r\n    inverted.top    = Math.min(current.top, start.bottom);\r\n    inverted.bottom = Math.max(current.bottom, start.top);\r\n    inverted.left   = Math.min(current.left, start.right);\r\n    inverted.right  = Math.max(current.right, start.left);\r\n  }\r\n\r\n  inverted.width  = inverted.right  - inverted.left;\r\n  inverted.height = inverted.bottom - inverted.top ;\r\n\r\n  for (const edge in inverted) {\r\n    delta[edge] = inverted[edge] - previous[edge];\r\n  }\r\n\r\n  iEvent.edges = interaction.prepared.edges;\r\n  iEvent.rect = inverted;\r\n  iEvent.deltaRect = delta;\r\n});\r\n\r\n/*\\\r\n * Interactable.resizable\r\n [ method ]\r\n *\r\n * Gets or sets whether resize actions can be performed on the\r\n * Interactable\r\n *\r\n = (boolean) Indicates if this can be the target of resize elements\r\n   | var isResizeable = interact('input[type=text]').resizable();\r\n * or\r\n - options (boolean | object) #optional true/false or An object with event listeners to be fired on resize events (object makes the Interactable resizable)\r\n = (object) This Interactable\r\n   | interact(element).resizable({\r\n   |   onstart: function (event) {},\r\n   |   onmove : function (event) {},\r\n   |   onend  : function (event) {},\r\n   |\r\n   |   edges: {\r\n   |     top   : true,       // Use pointer coords to check for resize.\r\n   |     left  : false,      // Disable resizing from left edge.\r\n   |     bottom: '.resize-s',// Resize if pointer target matches selector\r\n   |     right : handleEl    // Resize if pointer target is the given Element\r\n   |   },\r\n   |\r\n   |     // Width and height can be adjusted independently. When `true`, width and\r\n   |     // height are adjusted at a 1:1 ratio.\r\n   |     square: false,\r\n   |\r\n   |     // Width and height can be adjusted independently. When `true`, width and\r\n   |     // height maintain the aspect ratio they had when resizing started.\r\n   |     preserveAspectRatio: false,\r\n   |\r\n   |   // a value of 'none' will limit the resize rect to a minimum of 0x0\r\n   |   // 'negate' will allow the rect to have negative width/height\r\n   |   // 'reposition' will keep the width/height positive by swapping\r\n   |   // the top and bottom edges and/or swapping the left and right edges\r\n   |   invert: 'none' || 'negate' || 'reposition'\r\n   |\r\n   |   // limit multiple resizes.\r\n   |   // See the explanation in the @Interactable.draggable example\r\n   |   max: Infinity,\r\n   |   maxPerElement: 1,\r\n   | });\r\n  \\*/\r\nInteractable.prototype.resizable = function (options) {\r\n  if (utils.is.object(options)) {\r\n    this.options.resize.enabled = options.enabled === false? false: true;\r\n    this.setPerAction('resize', options);\r\n    this.setOnEvents('resize', options);\r\n\r\n    if (/^x$|^y$|^xy$/.test(options.axis)) {\r\n      this.options.resize.axis = options.axis;\r\n    }\r\n    else if (options.axis === null) {\r\n      this.options.resize.axis = defaultOptions.resize.axis;\r\n    }\r\n\r\n    if (utils.is.bool(options.preserveAspectRatio)) {\r\n      this.options.resize.preserveAspectRatio = options.preserveAspectRatio;\r\n    }\r\n    else if (utils.is.bool(options.square)) {\r\n      this.options.resize.square = options.square;\r\n    }\r\n\r\n    return this;\r\n  }\r\n  if (utils.is.bool(options)) {\r\n    this.options.resize.enabled = options;\r\n\r\n    if (!options) {\r\n      this.onresizestart = this.onresizestart = this.onresizeend = null;\r\n    }\r\n\r\n    return this;\r\n  }\r\n  return this.options.resize;\r\n};\r\n\r\nfunction checkResizeEdge (name, value, page, element, interactableElement, rect, margin) {\r\n  // false, '', undefined, null\r\n  if (!value) { return false; }\r\n\r\n  // true value, use pointer coords and element rect\r\n  if (value === true) {\r\n    // if dimensions are negative, \"switch\" edges\r\n    const width  = utils.is.number(rect.width )? rect.width  : rect.right  - rect.left;\r\n    const height = utils.is.number(rect.height)? rect.height : rect.bottom - rect.top ;\r\n\r\n    if (width < 0) {\r\n      if      (name === 'left' ) { name = 'right'; }\r\n      else if (name === 'right') { name = 'left' ; }\r\n    }\r\n    if (height < 0) {\r\n      if      (name === 'top'   ) { name = 'bottom'; }\r\n      else if (name === 'bottom') { name = 'top'   ; }\r\n    }\r\n\r\n    if (name === 'left'  ) { return page.x < ((width  >= 0? rect.left: rect.right ) + margin); }\r\n    if (name === 'top'   ) { return page.y < ((height >= 0? rect.top : rect.bottom) + margin); }\r\n\r\n    if (name === 'right' ) { return page.x > ((width  >= 0? rect.right : rect.left) - margin); }\r\n    if (name === 'bottom') { return page.y > ((height >= 0? rect.bottom: rect.top ) - margin); }\r\n  }\r\n\r\n  // the remaining checks require an element\r\n  if (!utils.is.element(element)) { return false; }\r\n\r\n  return utils.is.element(value)\r\n  // the value is an element to use as a resize handle\r\n    ? value === element\r\n    // otherwise check if element matches value as selector\r\n    : utils.matchesUpTo(element, value, interactableElement);\r\n}\r\n\r\nInteraction.signals.on('new', function (interaction) {\r\n  interaction.resizeAxes = 'xy';\r\n});\r\n\r\nInteractEvent.signals.on('set-delta', function ({ interaction, iEvent, action }) {\r\n  if (action !== 'resize' || !interaction.resizeAxes) { return; }\r\n\r\n  const options = interaction.target.options;\r\n\r\n  if (options.resize.square) {\r\n    if (interaction.resizeAxes === 'y') {\r\n      iEvent.dx = iEvent.dy;\r\n    }\r\n    else {\r\n      iEvent.dy = iEvent.dx;\r\n    }\r\n    iEvent.axes = 'xy';\r\n  }\r\n  else {\r\n    iEvent.axes = interaction.resizeAxes;\r\n\r\n    if (interaction.resizeAxes === 'x') {\r\n      iEvent.dy = 0;\r\n    }\r\n    else if (interaction.resizeAxes === 'y') {\r\n      iEvent.dx = 0;\r\n    }\r\n  }\r\n});\r\n\r\nactions.resize = resize;\r\nactions.names.push('resize');\r\nutils.merge(Interactable.eventTypes, [\r\n  'resizestart',\r\n  'resizemove',\r\n  'resizeinertiastart',\r\n  'resizeinertiaresume',\r\n  'resizeend',\r\n]);\r\nactions.methodDict.resize = 'resizable';\r\n\r\ndefaultOptions.resize = resize.defaults;\r\n\r\nmodule.exports = resize;\r\n","const raf            = require('./utils/raf');\r\nconst getWindow      = require('./utils/window').getWindow;\r\nconst is             = require('./utils/is');\r\nconst domUtils       = require('./utils/domUtils');\r\nconst Interaction    = require('./Interaction');\r\nconst defaultOptions = require('./defaultOptions');\r\n\r\nconst autoScroll = {\r\n  defaults: {\r\n    enabled  : false,\r\n    container: null,     // the item that is scrolled (Window or HTMLElement)\r\n    margin   : 60,\r\n    speed    : 300,      // the scroll speed in pixels per second\r\n  },\r\n\r\n  interaction: null,\r\n  i: null,    // the handle returned by window.setInterval\r\n  x: 0, y: 0, // Direction each pulse is to scroll in\r\n\r\n  isScrolling: false,\r\n  prevTime: 0,\r\n\r\n  parentIframePageInfo: null, //Property to handle page info of parent iframe (iFrameResizer)\r\n\r\n  start: function (interaction) {\r\n    autoScroll.isScrolling = true;\r\n    raf.cancel(autoScroll.i);\r\n\r\n    autoScroll.interaction = interaction;\r\n    autoScroll.prevTime = new Date().getTime();\r\n    autoScroll.i = raf.request(autoScroll.scroll);\r\n    if (typeof window !== undefined && window.parentIFrame) { //iFrameResizer\r\n        window.parentIFrame.getPageInfo(function(pageInfo) {\r\n            autoScroll.parentIframePageInfo = pageInfo;\r\n        });\r\n    }\r\n  },\r\n\r\n  stop: function () {\r\n    autoScroll.isScrolling = false;\r\n    raf.cancel(autoScroll.i);\r\n    autoScroll.parentIframePageInfo = null; //iFrameResizer\r\n  },\r\n\r\n  // scroll the window by the values in scroll.x/y\r\n  scroll: function () {\r\n    const options = autoScroll.interaction.target.options[autoScroll.interaction.prepared.name].autoScroll;\r\n    const container = options.container || getWindow(autoScroll.interaction.element);\r\n    const now = new Date().getTime();\r\n    // change in time in seconds\r\n    const dt = (now - autoScroll.prevTime) / 1000;\r\n    // displacement\r\n    const s = options.speed * dt;\r\n\r\n    if (s >= 1) {\r\n      if (autoScroll.parentIframePageInfo && autoScroll.parentIframePageInfo.innerHeight) { //iFrameResizer\r\n        autoScroll.parentIframePageInfo.scrollLeft += autoScroll.x * s;\r\n        autoScroll.parentIframePageInfo.scrollTop += autoScroll.y * s;\r\n          if (autoScroll.x != 0 || autoScroll.y != 0) {\r\n            window.parentIFrame.scrollTo(autoScroll.parentIframePageInfo.scrollLeft,\r\n             autoScroll.parentIframePageInfo.scrollTop);\r\n          }\r\n      }\r\n      if (is.window(container)) {\r\n        container.scrollBy(autoScroll.x * s, autoScroll.y * s);\r\n      }\r\n      else if (container) {\r\n        container.scrollLeft += autoScroll.x * s;\r\n        container.scrollTop  += autoScroll.y * s;\r\n      }\r\n\r\n      autoScroll.prevTime = now;\r\n    }\r\n\r\n    if (autoScroll.isScrolling) {\r\n      raf.cancel(autoScroll.i);\r\n      autoScroll.i = raf.request(autoScroll.scroll);\r\n    }\r\n  },\r\n  check: function (interactable, actionName) {\r\n    const options = interactable.options;\r\n\r\n    return options[actionName].autoScroll && options[actionName].autoScroll.enabled;\r\n  },\r\n  onInteractionMove: function ({ interaction, pointer }) {\r\n    if (!(interaction.interacting()\r\n          && autoScroll.check(interaction.target, interaction.prepared.name))) {\r\n      return;\r\n    }\r\n\r\n    if (interaction.simulation) {\r\n      autoScroll.x = autoScroll.y = 0;\r\n      return;\r\n    }\r\n\r\n    let top;\r\n    let right;\r\n    let bottom;\r\n    let left;\r\n\r\n    const options = interaction.target.options[interaction.prepared.name].autoScroll;\r\n    const container = options.container || getWindow(interaction.element);\r\n\r\n    if (autoScroll.parentIframePageInfo && autoScroll.parentIframePageInfo.innerHeight) { //iFrameResizer\r\n        //calculate real pointer coordinates on the screen\r\n        let screenX = pointer.clientX -\r\n            autoScroll.parentIframePageInfo.scrollLeft +\r\n            autoScroll.parentIframePageInfo.offsetLeft;\r\n        let screenY = pointer.clientY -\r\n            autoScroll.parentIframePageInfo.scrollTop +\r\n            autoScroll.parentIframePageInfo.offsetTop;\r\n\r\n        left = screenX < autoScroll.margin;\r\n        top = screenY < autoScroll.margin;\r\n        right = screenX > autoScroll.parentIframePageInfo.innerWidth - autoScroll.margin;\r\n        bottom = screenY > autoScroll.parentIframePageInfo.innerHeight - autoScroll.margin;\r\n    }\r\n    else if (is.window(container)) {\r\n      left   = pointer.clientX < autoScroll.margin;\r\n      top    = pointer.clientY < autoScroll.margin;\r\n      right  = pointer.clientX > container.innerWidth  - autoScroll.margin;\r\n      bottom = pointer.clientY > container.innerHeight - autoScroll.margin;\r\n    }\r\n    else {\r\n      const rect = domUtils.getElementClientRect(container);\r\n\r\n      left   = pointer.clientX < rect.left   + autoScroll.margin;\r\n      top    = pointer.clientY < rect.top    + autoScroll.margin;\r\n      right  = pointer.clientX > rect.right  - autoScroll.margin;\r\n      bottom = pointer.clientY > rect.bottom - autoScroll.margin;\r\n    }\r\n\r\n    autoScroll.x = (right ? 1: left? -1: 0);\r\n    autoScroll.y = (bottom? 1:  top? -1: 0);\r\n\r\n    if (!autoScroll.isScrolling) {\r\n      // set the autoScroll properties to those of the target\r\n      autoScroll.margin = options.margin;\r\n      autoScroll.speed  = options.speed;\r\n\r\n      autoScroll.start(interaction);\r\n    }\r\n  },\r\n};\r\n\r\nInteraction.signals.on('stop-active', function () {\r\n  autoScroll.stop();\r\n});\r\n\r\nInteraction.signals.on('action-move', autoScroll.onInteractionMove);\r\n\r\ndefaultOptions.perAction.autoScroll = autoScroll.defaults;\r\n\r\nmodule.exports = autoScroll;\r\n","const Interactable = require('../Interactable');\r\nconst actions      = require('../actions/base');\r\nconst is           = require('../utils/is');\r\nconst domUtils     = require('../utils/domUtils');\r\n\r\nInteractable.prototype.getAction = function (pointer, event, interaction, element) {\r\n  const action = this.defaultActionChecker(pointer, event, interaction, element);\r\n\r\n  if (this.options.actionChecker) {\r\n    return this.options.actionChecker(pointer, event, action, this, element, interaction);\r\n  }\r\n\r\n  return action;\r\n};\r\n\r\n/*\\\r\n * Interactable.ignoreFrom\r\n [ method ]\r\n *\r\n * If the target of the `mousedown`, `pointerdown` or `touchstart`\r\n * event or any of it's parents match the given CSS selector or\r\n * Element, no drag/resize/gesture is started.\r\n *\r\n - newValue (string | Element | null) #optional a CSS selector string, an Element or `null` to not ignore any elements\r\n = (string | Element | object) The current ignoreFrom value or this Interactable\r\n **\r\n | interact(element, { ignoreFrom: document.getElementById('no-action') });\r\n | // or\r\n | interact(element).ignoreFrom('input, textarea, a');\r\n\\*/\r\nInteractable.prototype.ignoreFrom = function (newValue) {\r\n  return this._backCompatOption('ignoreFrom', newValue);\r\n};\r\n\r\n/*\\\r\n * Interactable.allowFrom\r\n [ method ]\r\n *\r\n * A drag/resize/gesture is started only If the target of the\r\n * `mousedown`, `pointerdown` or `touchstart` event or any of it's\r\n * parents match the given CSS selector or Element.\r\n *\r\n - newValue (string | Element | null) #optional a CSS selector string, an Element or `null` to allow from any element\r\n = (string | Element | object) The current allowFrom value or this Interactable\r\n **\r\n | interact(element, { allowFrom: document.getElementById('drag-handle') });\r\n | // or\r\n | interact(element).allowFrom('.handle');\r\n\\*/\r\nInteractable.prototype.allowFrom = function (newValue) {\r\n  return this._backCompatOption('allowFrom', newValue);\r\n};\r\n\r\nInteractable.prototype.testIgnore = function (ignoreFrom, interactableElement, element) {\r\n  if (!ignoreFrom || !is.element(element)) { return false; }\r\n\r\n  if (is.string(ignoreFrom)) {\r\n    return domUtils.matchesUpTo(element, ignoreFrom, interactableElement);\r\n  }\r\n  else if (is.element(ignoreFrom)) {\r\n    return domUtils.nodeContains(ignoreFrom, element);\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nInteractable.prototype.testAllow = function (allowFrom, interactableElement, element) {\r\n  if (!allowFrom) { return true; }\r\n\r\n  if (!is.element(element)) { return false; }\r\n\r\n  if (is.string(allowFrom)) {\r\n    return domUtils.matchesUpTo(element, allowFrom, interactableElement);\r\n  }\r\n  else if (is.element(allowFrom)) {\r\n    return domUtils.nodeContains(allowFrom, element);\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nInteractable.prototype.testIgnoreAllow = function (options, interactableElement, eventTarget) {\r\n  return (!this.testIgnore(options.ignoreFrom, interactableElement, eventTarget)\r\n    && this.testAllow(options.allowFrom, interactableElement, eventTarget));\r\n};\r\n\r\n/*\\\r\n * Interactable.actionChecker\r\n [ method ]\r\n *\r\n * Gets or sets the function used to check action to be performed on\r\n * pointerDown\r\n *\r\n - checker (function | null) #optional A function which takes a pointer event, defaultAction string, interactable, element and interaction as parameters and returns an object with name property 'drag' 'resize' or 'gesture' and optionally an `edges` object with boolean 'top', 'left', 'bottom' and right props.\r\n = (Function | Interactable) The checker function or this Interactable\r\n *\r\n | interact('.resize-drag')\r\n |   .resizable(true)\r\n |   .draggable(true)\r\n |   .actionChecker(function (pointer, event, action, interactable, element, interaction) {\r\n |\r\n |   if (interact.matchesSelector(event.target, '.drag-handle') {\r\n |     // force drag with handle target\r\n |     action.name = drag;\r\n |   }\r\n |   else {\r\n |     // resize from the top and right edges\r\n |     action.name  = 'resize';\r\n |     action.edges = { top: true, right: true };\r\n |   }\r\n |\r\n |   return action;\r\n | });\r\n\\*/\r\nInteractable.prototype.actionChecker = function (checker) {\r\n  if (is.function(checker)) {\r\n    this.options.actionChecker = checker;\r\n\r\n    return this;\r\n  }\r\n\r\n  if (checker === null) {\r\n    delete this.options.actionChecker;\r\n\r\n    return this;\r\n  }\r\n\r\n  return this.options.actionChecker;\r\n};\r\n\r\n/*\\\r\n * Interactable.styleCursor\r\n [ method ]\r\n *\r\n * Returns or sets whether the the cursor should be changed depending on the\r\n * action that would be performed if the mouse were pressed and dragged.\r\n *\r\n - newValue (boolean) #optional\r\n = (boolean | Interactable) The current setting or this Interactable\r\n\\*/\r\nInteractable.prototype.styleCursor = function (newValue) {\r\n  if (is.bool(newValue)) {\r\n    this.options.styleCursor = newValue;\r\n\r\n    return this;\r\n  }\r\n\r\n  if (newValue === null) {\r\n    delete this.options.styleCursor;\r\n\r\n    return this;\r\n  }\r\n\r\n  return this.options.styleCursor;\r\n};\r\n\r\nInteractable.prototype.defaultActionChecker = function (pointer, event, interaction, element) {\r\n  const rect = this.getRect(element);\r\n  let action = null;\r\n\r\n  for (const actionName of actions.names) {\r\n    // check mouseButton setting if the pointer is down\r\n    if (interaction.pointerIsDown\r\n        && interaction.mouse\r\n        && (event.buttons & this.options[actionName].mouseButtons) === 0) {\r\n      continue;\r\n    }\r\n\r\n    action = actions[actionName].checker(pointer, event, this, element, interaction, rect);\r\n\r\n    if (action) {\r\n      return action;\r\n    }\r\n  }\r\n};\r\n\r\n","const interact       = require('../interact');\r\nconst Interactable   = require('../Interactable');\r\nconst Interaction    = require('../Interaction');\r\nconst actions        = require('../actions/base');\r\nconst defaultOptions = require('../defaultOptions');\r\nconst browser        = require('../utils/browser');\r\nconst scope          = require('../scope');\r\nconst utils          = require('../utils');\r\nconst signals        = require('../utils/Signals').new();\r\n\r\nrequire('./InteractableMethods');\r\n\r\nconst autoStart = {\r\n  signals,\r\n  withinInteractionLimit,\r\n  // Allow this many interactions to happen simultaneously\r\n  maxInteractions: Infinity,\r\n  defaults: {\r\n    perAction: {\r\n      manualStart: false,\r\n      max: Infinity,\r\n      maxPerElement: 1,\r\n      allowFrom:  null,\r\n      ignoreFrom: null,\r\n    },\r\n  },\r\n  setActionDefaults: function (action) {\r\n    utils.extend(action.defaults, autoStart.defaults.perAction);\r\n  },\r\n};\r\n\r\n// set cursor style on mousedown\r\nInteraction.signals.on('down', function ({ interaction, pointer, event, eventTarget }) {\r\n  if (interaction.interacting()) { return; }\r\n\r\n  const actionInfo = getActionInfo(interaction, pointer, event, eventTarget);\r\n  prepare(interaction, actionInfo);\r\n});\r\n\r\n// set cursor style on mousemove\r\nInteraction.signals.on('move', function ({ interaction, pointer, event, eventTarget }) {\r\n  if (!interaction.mouse\r\n      || interaction.pointerIsDown\r\n      || interaction.interacting()) { return; }\r\n\r\n  const actionInfo = getActionInfo(interaction, pointer, event, eventTarget);\r\n  prepare(interaction, actionInfo);\r\n});\r\n\r\nInteraction.signals.on('move', function (arg) {\r\n  const { interaction, event } = arg;\r\n\r\n  if (!interaction.pointerIsDown\r\n      || interaction.interacting()\r\n      || !interaction.pointerWasMoved\r\n      || !interaction.prepared.name) {\r\n    return;\r\n  }\r\n\r\n  signals.fire('before-start', arg);\r\n\r\n  const target = interaction.target;\r\n\r\n  if (interaction.prepared.name && target) {\r\n    // check manualStart and interaction limit\r\n    if (target.options[interaction.prepared.name].manualStart\r\n        || !withinInteractionLimit(target, interaction.element, interaction.prepared)) {\r\n      interaction.stop(event);\r\n    }\r\n    else {\r\n      interaction.start(interaction.prepared, target, interaction.element);\r\n    }\r\n  }\r\n});\r\n\r\n// Check if the current target supports the action.\r\n// If so, return the validated action. Otherwise, return null\r\nfunction validateAction (action, interactable, element, eventTarget) {\r\n  if (utils.is.object(action)\r\n      && interactable.testIgnoreAllow(interactable.options[action.name], element, eventTarget)\r\n      && interactable.options[action.name].enabled\r\n      && withinInteractionLimit(interactable, element, action)) {\r\n    return action;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nfunction validateSelector (interaction, pointer, event, matches, matchElements, eventTarget) {\r\n  for (let i = 0, len = matches.length; i < len; i++) {\r\n    const match = matches[i];\r\n    const matchElement = matchElements[i];\r\n    const action = validateAction(match.getAction(pointer, event, interaction, matchElement),\r\n                                  match,\r\n                                  matchElement,\r\n                                  eventTarget);\r\n\r\n    if (action) {\r\n      return {\r\n        action,\r\n        target: match,\r\n        element: matchElement,\r\n      };\r\n    }\r\n  }\r\n\r\n  return {};\r\n}\r\n\r\nfunction getActionInfo (interaction, pointer, event, eventTarget) {\r\n  let matches = [];\r\n  let matchElements = [];\r\n\r\n  let element = eventTarget;\r\n  let action = null;\r\n\r\n  function pushMatches (interactable, selector, context) {\r\n    const elements = (browser.useMatchesSelectorPolyfill\r\n      ? context.querySelectorAll(selector)\r\n      : undefined);\r\n\r\n    if (utils.matchesSelector(element, selector, elements)) {\r\n\r\n      matches.push(interactable);\r\n      matchElements.push(element);\r\n    }\r\n  }\r\n\r\n  while (utils.is.element(element)) {\r\n    matches = [];\r\n    matchElements = [];\r\n\r\n    const elementInteractable = scope.interactables.get(element);\r\n\r\n    if (elementInteractable\r\n        && (action = validateAction(elementInteractable.getAction(pointer, event, interaction, element, eventTarget),\r\n                                    elementInteractable,\r\n                                    element,\r\n                                    eventTarget))\r\n        && !elementInteractable.options[action.name].manualStart) {\r\n      return {\r\n        element,\r\n        action,\r\n        target: elementInteractable,\r\n      };\r\n    }\r\n    else {\r\n      scope.interactables.forEachSelector(pushMatches, element);\r\n\r\n      const actionInfo = validateSelector(interaction, pointer, event, matches, matchElements, eventTarget);\r\n\r\n      if (actionInfo.action\r\n          && !actionInfo.target.options[actionInfo.action.name].manualStart) {\r\n        return actionInfo;\r\n      }\r\n    }\r\n\r\n    element = utils.parentNode(element);\r\n  }\r\n\r\n  return {};\r\n}\r\n\r\nfunction prepare (interaction, { action, target, element }) {\r\n  action = action || {};\r\n\r\n  if (interaction.target && interaction.target.options.styleCursor) {\r\n    interaction.target._doc.documentElement.style.cursor = '';\r\n  }\r\n\r\n  interaction.target = target;\r\n  interaction.element = element;\r\n  utils.copyAction(interaction.prepared, action);\r\n\r\n  if (target && target.options.styleCursor) {\r\n    const cursor = action? actions[action.name].getCursor(action) : '';\r\n    interaction.target._doc.documentElement.style.cursor = cursor;\r\n  }\r\n\r\n  signals.fire('prepared', { interaction: interaction });\r\n}\r\n\r\nInteraction.signals.on('stop', function ({ interaction }) {\r\n  const target = interaction.target;\r\n\r\n  if (target && target.options.styleCursor) {\r\n    target._doc.documentElement.style.cursor = '';\r\n  }\r\n});\r\n\r\nInteractable.prototype.getAction = function (pointer, event, interaction, element) {\r\n  const action = this.defaultActionChecker(pointer, event, interaction, element);\r\n\r\n  if (this.options.actionChecker) {\r\n    return this.options.actionChecker(pointer, event, action, this, element, interaction);\r\n  }\r\n\r\n  return action;\r\n};\r\n\r\n/*\\\r\n * Interactable.actionChecker\r\n [ method ]\r\n *\r\n * Gets or sets the function used to check action to be performed on\r\n * pointerDown\r\n *\r\n - checker (function | null) #optional A function which takes a pointer event, defaultAction string, interactable, element and interaction as parameters and returns an object with name property 'drag' 'resize' or 'gesture' and optionally an `edges` object with boolean 'top', 'left', 'bottom' and right props.\r\n = (Function | Interactable) The checker function or this Interactable\r\n *\r\n | interact('.resize-drag')\r\n |   .resizable(true)\r\n |   .draggable(true)\r\n |   .actionChecker(function (pointer, event, action, interactable, element, interaction) {\r\n |\r\n |   if (interact.matchesSelector(event.target, '.drag-handle') {\r\n |     // force drag with handle target\r\n |     action.name = drag;\r\n |   }\r\n |   else {\r\n |     // resize from the top and right edges\r\n |     action.name  = 'resize';\r\n |     action.edges = { top: true, right: true };\r\n |   }\r\n |\r\n |   return action;\r\n | });\r\n\\*/\r\nInteractable.prototype.actionChecker = function (checker) {\r\n  if (utils.is.function(checker)) {\r\n    this.options.actionChecker = checker;\r\n\r\n    return this;\r\n  }\r\n\r\n  if (checker === null) {\r\n    delete this.options.actionChecker;\r\n\r\n    return this;\r\n  }\r\n\r\n  return this.options.actionChecker;\r\n};\r\n\r\n/*\\\r\n * Interactable.styleCursor\r\n [ method ]\r\n *\r\n * Returns or sets whether the the cursor should be changed depending on the\r\n * action that would be performed if the mouse were pressed and dragged.\r\n *\r\n - newValue (boolean) #optional\r\n = (boolean | Interactable) The current setting or this Interactable\r\n\\*/\r\nInteractable.prototype.styleCursor = function (newValue) {\r\n  if (utils.is.bool(newValue)) {\r\n    this.options.styleCursor = newValue;\r\n\r\n    return this;\r\n  }\r\n\r\n  if (newValue === null) {\r\n    delete this.options.styleCursor;\r\n\r\n    return this;\r\n  }\r\n\r\n  return this.options.styleCursor;\r\n};\r\n\r\nInteractable.prototype.defaultActionChecker = function (pointer, event, interaction, element) {\r\n  const rect = this.getRect(element);\r\n  const buttons = event.buttons || ({\r\n    0: 1,\r\n    1: 4,\r\n    3: 8,\r\n    4: 16,\r\n  })[event.button];\r\n  let action = null;\r\n\r\n  for (const actionName of actions.names) {\r\n    // check mouseButton setting if the pointer is down\r\n    if (interaction.pointerIsDown\r\n        && interaction.mouse\r\n        && (buttons & this.options[actionName].mouseButtons) === 0) {\r\n      continue;\r\n    }\r\n\r\n    action = actions[actionName].checker(pointer, event, this, element, interaction, rect);\r\n\r\n    if (action) {\r\n      return action;\r\n    }\r\n  }\r\n};\r\n\r\nfunction withinInteractionLimit (interactable, element, action) {\r\n  const options = interactable.options;\r\n  const maxActions = options[action.name].max;\r\n  const maxPerElement = options[action.name].maxPerElement;\r\n  let activeInteractions = 0;\r\n  let targetCount = 0;\r\n  let targetElementCount = 0;\r\n\r\n  // no actions if any of these values == 0\r\n  if (!(maxActions && maxPerElement && autoStart.maxInteractions)) { return; }\r\n\r\n  for (let i = 0, len = scope.interactions.length; i < len; i++) {\r\n    const interaction = scope.interactions[i];\r\n    const otherAction = interaction.prepared.name;\r\n\r\n    if (!interaction.interacting()) { continue; }\r\n\r\n    activeInteractions++;\r\n\r\n    if (activeInteractions >= autoStart.maxInteractions) {\r\n      return false;\r\n    }\r\n\r\n    if (interaction.target !== interactable) { continue; }\r\n\r\n    targetCount += (otherAction === action.name)|0;\r\n\r\n    if (targetCount >= maxActions) {\r\n      return false;\r\n    }\r\n\r\n    if (interaction.element === element) {\r\n      targetElementCount++;\r\n\r\n      if (otherAction !== action.name || targetElementCount >= maxPerElement) {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n\r\n  return autoStart.maxInteractions > 0;\r\n}\r\n\r\n/*\\\r\n * interact.maxInteractions\r\n [ method ]\r\n **\r\n * Returns or sets the maximum number of concurrent interactions allowed.\r\n * By default only 1 interaction is allowed at a time (for backwards\r\n * compatibility). To allow multiple interactions on the same Interactables\r\n * and elements, you need to enable it in the draggable, resizable and\r\n * gesturable `'max'` and `'maxPerElement'` options.\r\n **\r\n - newValue (number) #optional Any number. newValue <= 0 means no interactions.\r\n\\*/\r\ninteract.maxInteractions = function (newValue) {\r\n  if (utils.is.number(newValue)) {\r\n    autoStart.maxInteractions = newValue;\r\n\r\n    return this;\r\n  }\r\n\r\n  return autoStart.maxInteractions;\r\n};\r\n\r\nInteractable.settingsMethods.push('styleCursor');\r\nInteractable.settingsMethods.push('actionChecker');\r\nInteractable.settingsMethods.push('ignoreFrom');\r\nInteractable.settingsMethods.push('allowFrom');\r\n\r\ndefaultOptions.base.actionChecker = null;\r\ndefaultOptions.base.styleCursor = true;\r\n\r\nutils.extend(defaultOptions.perAction, autoStart.defaults.perAction);\r\n\r\nmodule.exports = autoStart;\r\n","const autoStart   = require('./base');\r\nconst Interaction = require('../Interaction');\r\n\r\nInteraction.signals.on('new', function (interaction) {\r\n  interaction.delayTimer = null;\r\n});\r\n\r\nautoStart.signals.on('prepared', function ({ interaction }) {\r\n  const actionName = interaction.prepared.name;\r\n\r\n  if (!actionName) { return; }\r\n\r\n  const delay = interaction.target.options[actionName].delay;\r\n\r\n  if (delay > 0) {\r\n    interaction.delayTimer = setTimeout(() => {\r\n      interaction.start(interaction.prepared, interaction.target, interaction.element);\r\n    }, delay);\r\n  }\r\n});\r\n\r\nInteraction.signals.on('move', function ({ interaction, duplicate }) {\r\n  if (interaction.pointerWasMoved && !duplicate) {\r\n    clearTimeout(interaction.delayTimer);\r\n  }\r\n});\r\n\r\n// prevent regular down->move autoStart\r\nautoStart.signals.on('before-start', function ({ interaction }) {\r\n  const actionName = interaction.prepared.name;\r\n\r\n  if (!actionName) { return; }\r\n\r\n  const delay = interaction.target.options[actionName].delay;\r\n\r\n  if (delay > 0) {\r\n    interaction.prepared.name = null;\r\n  }\r\n});\r\n","const autoStart = require('./base');\r\nconst scope     = require('../scope');\r\nconst browser   = require('../utils/browser');\r\nconst is        = require('../utils/is');\r\n\r\nconst { matchesSelector, parentNode } = require('../utils/domUtils');\r\n\r\nautoStart.setActionDefaults(require('../actions/drag'));\r\n\r\nautoStart.signals.on('before-start',  function ({ interaction, eventTarget, dx, dy }) {\r\n  if (interaction.prepared.name !== 'drag') { return; }\r\n\r\n  // check if a drag is in the correct axis\r\n  const absX = Math.abs(dx);\r\n  const absY = Math.abs(dy);\r\n  const options = interaction.target.options.drag;\r\n  const startAxis = options.startAxis;\r\n  const currentAxis = (absX > absY ? 'x' : absX < absY ? 'y' : 'xy');\r\n\r\n  interaction.prepared.axis = options.lockAxis === 'start'\r\n    ? currentAxis[0] // always lock to one axis even if currentAxis === 'xy'\r\n    : options.lockAxis;\r\n\r\n  // if the movement isn't in the startAxis of the interactable\r\n  if (currentAxis !== 'xy' && startAxis !== 'xy' && startAxis !== currentAxis) {\r\n    // cancel the prepared action\r\n    interaction.prepared.name = null;\r\n\r\n    // then try to get a drag from another ineractable\r\n\r\n    if (!interaction.prepared.name) {\r\n\r\n      let element = eventTarget;\r\n\r\n      const getDraggable = function (interactable, selector, context) {\r\n        const elements = browser.useMatchesSelectorPolyfill\r\n            ? context.querySelectorAll(selector)\r\n            : undefined;\r\n\r\n        if (interactable === interaction.target) { return; }\r\n\r\n        if (!options.manualStart\r\n            && !interactable.testIgnoreAllow(options, element, eventTarget)\r\n            && matchesSelector(element, selector, elements)) {\r\n\r\n          const action = interactable.getAction(interaction.downPointer,\r\n                                                interaction.downEvent,\r\n                                                interaction,\r\n                                                element);\r\n\r\n          if (action\r\n              && action.name === 'drag'\r\n              && checkStartAxis(currentAxis, interactable)\r\n              && autoStart.validateAction(action, interactable, element, eventTarget)) {\r\n\r\n            return interactable;\r\n          }\r\n        }\r\n      };\r\n\r\n      let action = null;\r\n\r\n      // check all interactables\r\n      while (is.element(element)) {\r\n        const elementInteractable = scope.interactables.get(element);\r\n\r\n        if (elementInteractable\r\n            && elementInteractable !== interaction.target\r\n            && !elementInteractable.options.drag.manualStart) {\r\n\r\n          action = elementInteractable.getAction(interaction.downPointer, interaction.downEvent, interaction, element);\r\n        }\r\n        if (action\r\n            && action.name === 'drag'\r\n            && checkStartAxis(currentAxis, elementInteractable)) {\r\n\r\n          interaction.prepared.name = 'drag';\r\n          interaction.target = elementInteractable;\r\n          interaction.element = element;\r\n          break;\r\n        }\r\n\r\n        const selectorInteractable = scope.interactables.forEachSelector(getDraggable, element);\r\n\r\n        if (selectorInteractable) {\r\n          interaction.prepared.name = 'drag';\r\n          interaction.target = selectorInteractable;\r\n          interaction.element = element;\r\n          break;\r\n        }\r\n\r\n        element = parentNode(element);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nfunction checkStartAxis (startAxis, interactable) {\r\n  if (!interactable) { return false; }\r\n\r\n  const thisAxis = interactable.options.drag.startAxis;\r\n\r\n  return (startAxis === 'xy' || thisAxis === 'xy' || thisAxis === startAxis);\r\n}\r\n","require('./base').setActionDefaults(require('../actions/gesture'));\r\n","require('./base').setActionDefaults(require('../actions/resize'));\r\n","module.exports = {\r\n  base: {\r\n    accept        : null,\r\n    preventDefault: 'auto',\r\n    deltaSource   : 'page',\r\n  },\r\n\r\n  perAction: {\r\n    origin: { x: 0, y: 0 },\r\n\r\n    // only allow left button by default\r\n    // see https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons#Return_value\r\n    mouseButtons: 1,\r\n\r\n    inertia: {\r\n      enabled          : false,\r\n      resistance       : 10,    // the lambda in exponential decay\r\n      minSpeed         : 100,   // target speed must be above this for inertia to start\r\n      endSpeed         : 10,    // the speed at which inertia is slow enough to stop\r\n      allowResume      : true,  // allow resuming an action in inertia phase\r\n      smoothEndDuration: 300,   // animate to snap/restrict endOnly if there's no inertia\r\n    },\r\n  },\r\n};\r\n","/* browser entry point */\r\n\r\n// Legacy browser support\r\nrequire('./legacyBrowsers');\r\n\r\n// inertia\r\nrequire('./inertia');\r\n\r\n// modifiers\r\nrequire('./modifiers/snap');\r\nrequire('./modifiers/restrict');\r\n\r\n// pointerEvents\r\nrequire('./pointerEvents/base');\r\nrequire('./pointerEvents/holdRepeat');\r\nrequire('./pointerEvents/interactableTargets');\r\n\r\n// delay\r\nrequire('./autoStart/delay');\r\n\r\n// actions\r\nrequire('./actions/gesture');\r\nrequire('./actions/resize');\r\nrequire('./actions/drag');\r\nrequire('./actions/drop');\r\n\r\n// load these modifiers after resize is loaded\r\nrequire('./modifiers/snapSize');\r\nrequire('./modifiers/restrictEdges');\r\nrequire('./modifiers/restrictSize');\r\n\r\n// autoStart actions\r\nrequire('./autoStart/gesture');\r\nrequire('./autoStart/resize');\r\nrequire('./autoStart/drag');\r\n\r\n// Interactable preventDefault setting\r\nrequire('./interactablePreventDefault.js');\r\n\r\n// autoScroll\r\nrequire('./autoScroll');\r\n\r\n// export interact\r\nmodule.exports = require('./interact');\r\n","const InteractEvent  = require('./InteractEvent');\r\nconst Interaction    = require('./Interaction');\r\nconst modifiers      = require('./modifiers');\r\nconst utils          = require('./utils');\r\nconst animationFrame = require('./utils/raf');\r\n\r\nInteraction.signals.on('new', function (interaction) {\r\n  interaction.inertiaStatus = {\r\n    active     : false,\r\n    smoothEnd  : false,\r\n    allowResume: false,\r\n\r\n    startEvent: null,\r\n    upCoords  : {},\r\n\r\n    xe: 0, ye: 0,\r\n    sx: 0, sy: 0,\r\n\r\n    t0: 0,\r\n    vx0: 0, vys: 0,\r\n    duration: 0,\r\n\r\n    lambda_v0: 0,\r\n    one_ve_v0: 0,\r\n    i  : null,\r\n  };\r\n\r\n  interaction.boundInertiaFrame   = () => inertiaFrame  .apply(interaction);\r\n  interaction.boundSmoothEndFrame = () => smoothEndFrame.apply(interaction);\r\n});\r\n\r\nInteraction.signals.on('down', function ({ interaction, event, pointer, eventTarget }) {\r\n  const status = interaction.inertiaStatus;\r\n\r\n  // Check if the down event hits the current inertia target\r\n  if (status.active) {\r\n    let element = eventTarget;\r\n\r\n    // climb up the DOM tree from the event target\r\n    while (utils.is.element(element)) {\r\n\r\n      // if interaction element is the current inertia target element\r\n      if (element === interaction.element) {\r\n        // stop inertia\r\n        animationFrame.cancel(status.i);\r\n        status.active = false;\r\n        interaction.simulation = null;\r\n\r\n        // update pointers to the down event's coordinates\r\n        interaction.updatePointer(pointer);\r\n        utils.setCoords(interaction.curCoords, interaction.pointers);\r\n\r\n        // fire appropriate signals\r\n        const signalArg = { interaction };\r\n        Interaction.signals.fire('before-action-move', signalArg);\r\n        Interaction.signals.fire('action-resume'     , signalArg);\r\n\r\n        // fire a reume event\r\n        const resumeEvent = new InteractEvent(interaction,\r\n                                              event,\r\n                                              interaction.prepared.name,\r\n                                              'inertiaresume',\r\n                                              interaction.element);\r\n\r\n        interaction.target.fire(resumeEvent);\r\n        interaction.prevEvent = resumeEvent;\r\n        modifiers.resetStatuses(interaction.modifierStatuses);\r\n\r\n        utils.copyCoords(interaction.prevCoords, interaction.curCoords);\r\n        break;\r\n      }\r\n\r\n      element = utils.parentNode(element);\r\n    }\r\n  }\r\n});\r\n\r\nInteraction.signals.on('up', function ({ interaction, event }) {\r\n  const status = interaction.inertiaStatus;\r\n\r\n  if (!interaction.interacting() || status.active) { return; }\r\n\r\n  const target = interaction.target;\r\n  const options = target && target.options;\r\n  const inertiaOptions = options && interaction.prepared.name && options[interaction.prepared.name].inertia;\r\n\r\n  const now = new Date().getTime();\r\n  const statuses = {};\r\n  const page = utils.extend({}, interaction.curCoords.page);\r\n  const pointerSpeed = interaction.pointerDelta.client.speed;\r\n  let inertiaPossible = false;\r\n  let inertia = false;\r\n  let smoothEnd = false;\r\n  let modifierResult;\r\n\r\n  // check if inertia should be started\r\n  inertiaPossible = (inertiaOptions && inertiaOptions.enabled\r\n                     && interaction.prepared.name !== 'gesture'\r\n                     && event !== status.startEvent);\r\n\r\n  inertia = (inertiaPossible\r\n            && (now - interaction.curCoords.timeStamp) < 50\r\n            && pointerSpeed > inertiaOptions.minSpeed\r\n            && pointerSpeed > inertiaOptions.endSpeed);\r\n\r\n  const modifierArg = {\r\n    interaction,\r\n    page,\r\n    statuses,\r\n    preEnd: true,\r\n    requireEndOnly: true,\r\n  };\r\n\r\n  // smoothEnd\r\n  if (inertiaPossible && !inertia) {\r\n    modifiers.resetStatuses(statuses);\r\n\r\n    modifierResult = modifiers.setAll(modifierArg);\r\n\r\n    if (modifierResult.shouldMove && modifierResult.locked) {\r\n      smoothEnd = true;\r\n    }\r\n  }\r\n\r\n  if (!(inertia || smoothEnd)) { return; }\r\n\r\n  utils.copyCoords(status.upCoords, interaction.curCoords);\r\n\r\n  interaction.pointers[0] = status.startEvent =\r\n    new InteractEvent(interaction, event, interaction.prepared.name, 'inertiastart', interaction.element);\r\n\r\n  status.t0 = now;\r\n\r\n  status.active = true;\r\n  status.allowResume = inertiaOptions.allowResume;\r\n  interaction.simulation = status;\r\n\r\n  target.fire(status.startEvent);\r\n\r\n  if (inertia) {\r\n    status.vx0 = interaction.pointerDelta.client.vx;\r\n    status.vy0 = interaction.pointerDelta.client.vy;\r\n    status.v0 = pointerSpeed;\r\n\r\n    calcInertia(interaction, status);\r\n\r\n    utils.extend(page, interaction.curCoords.page);\r\n\r\n    page.x += status.xe;\r\n    page.y += status.ye;\r\n\r\n    modifiers.resetStatuses(statuses);\r\n\r\n    modifierResult = modifiers.setAll(modifierArg);\r\n\r\n    status.modifiedXe += modifierResult.dx;\r\n    status.modifiedYe += modifierResult.dy;\r\n\r\n    status.i = animationFrame.request(interaction.boundInertiaFrame);\r\n  }\r\n  else {\r\n    status.smoothEnd = true;\r\n    status.xe = modifierResult.dx;\r\n    status.ye = modifierResult.dy;\r\n\r\n    status.sx = status.sy = 0;\r\n\r\n    status.i = animationFrame.request(interaction.boundSmoothEndFrame);\r\n  }\r\n});\r\n\r\nInteraction.signals.on('stop-active', function ({ interaction }) {\r\n  const status = interaction.inertiaStatus;\r\n\r\n  if (status.active) {\r\n    animationFrame.cancel(status.i);\r\n    status.active = false;\r\n    interaction.simulation = null;\r\n  }\r\n});\r\n\r\nfunction calcInertia (interaction, status) {\r\n  const inertiaOptions = interaction.target.options[interaction.prepared.name].inertia;\r\n  const lambda = inertiaOptions.resistance;\r\n  const inertiaDur = -Math.log(inertiaOptions.endSpeed / status.v0) / lambda;\r\n\r\n  status.x0 = interaction.prevEvent.pageX;\r\n  status.y0 = interaction.prevEvent.pageY;\r\n  status.t0 = status.startEvent.timeStamp / 1000;\r\n  status.sx = status.sy = 0;\r\n\r\n  status.modifiedXe = status.xe = (status.vx0 - inertiaDur) / lambda;\r\n  status.modifiedYe = status.ye = (status.vy0 - inertiaDur) / lambda;\r\n  status.te = inertiaDur;\r\n\r\n  status.lambda_v0 = lambda / status.v0;\r\n  status.one_ve_v0 = 1 - inertiaOptions.endSpeed / status.v0;\r\n}\r\n\r\nfunction inertiaFrame () {\r\n  updateInertiaCoords(this);\r\n  utils.setCoordDeltas(this.pointerDelta, this.prevCoords, this.curCoords);\r\n\r\n  const status = this.inertiaStatus;\r\n  const options = this.target.options[this.prepared.name].inertia;\r\n  const lambda = options.resistance;\r\n  const t = new Date().getTime() / 1000 - status.t0;\r\n\r\n  if (t < status.te) {\r\n\r\n    const progress =  1 - (Math.exp(-lambda * t) - status.lambda_v0) / status.one_ve_v0;\r\n\r\n    if (status.modifiedXe === status.xe && status.modifiedYe === status.ye) {\r\n      status.sx = status.xe * progress;\r\n      status.sy = status.ye * progress;\r\n    }\r\n    else {\r\n      const quadPoint = utils.getQuadraticCurvePoint(0, 0,\r\n                                                     status.xe,\r\n                                                     status.ye,\r\n                                                     status.modifiedXe,\r\n                                                     status.modifiedYe,\r\n                                                     progress);\r\n\r\n      status.sx = quadPoint.x;\r\n      status.sy = quadPoint.y;\r\n    }\r\n\r\n    this.doMove();\r\n\r\n    status.i = animationFrame.request(this.boundInertiaFrame);\r\n  }\r\n  else {\r\n    status.sx = status.modifiedXe;\r\n    status.sy = status.modifiedYe;\r\n\r\n    this.doMove();\r\n    this.end(status.startEvent);\r\n    status.active = false;\r\n    this.simulation = null;\r\n  }\r\n\r\n  utils.copyCoords(this.prevCoords, this.curCoords);\r\n}\r\n\r\nfunction smoothEndFrame () {\r\n  updateInertiaCoords(this);\r\n\r\n  const status = this.inertiaStatus;\r\n  const t = new Date().getTime() - status.t0;\r\n  const duration = this.target.options[this.prepared.name].inertia.smoothEndDuration;\r\n\r\n  if (t < duration) {\r\n    status.sx = utils.easeOutQuad(t, 0, status.xe, duration);\r\n    status.sy = utils.easeOutQuad(t, 0, status.ye, duration);\r\n\r\n    this.pointerMove(status.startEvent, status.startEvent);\r\n\r\n    status.i = animationFrame.request(this.boundSmoothEndFrame);\r\n  }\r\n  else {\r\n    status.sx = status.xe;\r\n    status.sy = status.ye;\r\n\r\n    this.pointerMove(status.startEvent, status.startEvent);\r\n    this.end(status.startEvent);\r\n\r\n    status.smoothEnd =\r\n      status.active = false;\r\n    this.simulation = null;\r\n  }\r\n}\r\n\r\nfunction updateInertiaCoords (interaction) {\r\n  const status = interaction.inertiaStatus;\r\n\r\n  // return if inertia isn't running\r\n  if (!status.active) { return; }\r\n\r\n  const pageUp   = status.upCoords.page;\r\n  const clientUp = status.upCoords.client;\r\n\r\n  utils.setCoords(interaction.curCoords, [ {\r\n    pageX  : pageUp.x   + status.sx,\r\n    pageY  : pageUp.y   + status.sy,\r\n    clientX: clientUp.x + status.sx,\r\n    clientY: clientUp.y + status.sy,\r\n  } ]);\r\n}\r\n","const browser      = require('./utils/browser');\r\nconst events       = require('./utils/events');\r\nconst utils        = require('./utils');\r\nconst scope        = require('./scope');\r\nconst Interactable = require('./Interactable');\r\nconst Interaction  = require('./Interaction');\r\n\r\nconst globalEvents = {};\r\n\r\n/*\\\r\n * interact\r\n [ method ]\r\n *\r\n * The methods of this variable can be used to set elements as\r\n * interactables and also to change various default settings.\r\n *\r\n * Calling it as a function and passing an element or a valid CSS selector\r\n * string returns an Interactable object which has various methods to\r\n * configure it.\r\n *\r\n - element (Element | string) The HTML or SVG Element to interact with or CSS selector\r\n = (object) An @Interactable\r\n *\r\n > Usage\r\n | interact('#draggable').draggable(true);\r\n |\r\n | var rectables = interact('rect');\r\n | rectables\r\n |     .gesturable(true)\r\n |     .on('gesturemove', function (event) {\r\n |         // ...\r\n |     });\r\n\\*/\r\nfunction interact (element, options) {\r\n  let interactable = scope.interactables.get(element, options);\r\n\r\n  if (!interactable) {\r\n    interactable = new Interactable(element, options);\r\n    interactable.events.global = globalEvents;\r\n  }\r\n\r\n  return interactable;\r\n}\r\n\r\n/*\\\r\n * interact.isSet\r\n [ method ]\r\n *\r\n * Check if an element has been set\r\n - element (Element) The Element being searched for\r\n = (boolean) Indicates if the element or CSS selector was previously passed to interact\r\n\\*/\r\ninteract.isSet = function (element, options) {\r\n  return scope.interactables.indexOfElement(element, options && options.context) !== -1;\r\n};\r\n\r\n/*\\\r\n * interact.on\r\n [ method ]\r\n *\r\n * Adds a global listener for an InteractEvent or adds a DOM event to\r\n * `document`\r\n *\r\n - type       (string | array | object) The types of events to listen for\r\n - listener   (function) The function event (s)\r\n - useCapture (boolean) #optional useCapture flag for addEventListener\r\n = (object) interact\r\n\\*/\r\ninteract.on = function (type, listener, useCapture) {\r\n  if (utils.is.string(type) && type.search(' ') !== -1) {\r\n    type = type.trim().split(/ +/);\r\n  }\r\n\r\n  if (utils.is.array(type)) {\r\n    for (const eventType of type) {\r\n      interact.on(eventType, listener, useCapture);\r\n    }\r\n\r\n    return interact;\r\n  }\r\n\r\n  if (utils.is.object(type)) {\r\n    for (const prop in type) {\r\n      interact.on(prop, type[prop], listener);\r\n    }\r\n\r\n    return interact;\r\n  }\r\n\r\n  // if it is an InteractEvent type, add listener to globalEvents\r\n  if (utils.contains(Interactable.eventTypes, type)) {\r\n    // if this type of event was never bound\r\n    if (!globalEvents[type]) {\r\n      globalEvents[type] = [listener];\r\n    }\r\n    else {\r\n      globalEvents[type].push(listener);\r\n    }\r\n  }\r\n  // If non InteractEvent type, addEventListener to document\r\n  else {\r\n    events.add(scope.document, type, listener, useCapture);\r\n  }\r\n\r\n  return interact;\r\n};\r\n\r\n/*\\\r\n * interact.off\r\n [ method ]\r\n *\r\n * Removes a global InteractEvent listener or DOM event from `document`\r\n *\r\n - type       (string | array | object) The types of events that were listened for\r\n - listener   (function) The listener function to be removed\r\n - useCapture (boolean) #optional useCapture flag for removeEventListener\r\n = (object) interact\r\n \\*/\r\ninteract.off = function (type, listener, useCapture) {\r\n  if (utils.is.string(type) && type.search(' ') !== -1) {\r\n    type = type.trim().split(/ +/);\r\n  }\r\n\r\n  if (utils.is.array(type)) {\r\n    for (const eventType of type) {\r\n      interact.off(eventType, listener, useCapture);\r\n    }\r\n\r\n    return interact;\r\n  }\r\n\r\n  if (utils.is.object(type)) {\r\n    for (const prop in type) {\r\n      interact.off(prop, type[prop], listener);\r\n    }\r\n\r\n    return interact;\r\n  }\r\n\r\n  if (!utils.contains(Interactable.eventTypes, type)) {\r\n    events.remove(scope.document, type, listener, useCapture);\r\n  }\r\n  else {\r\n    let index;\r\n\r\n    if (type in globalEvents\r\n        && (index = utils.indexOf(globalEvents[type], listener)) !== -1) {\r\n      globalEvents[type].splice(index, 1);\r\n    }\r\n  }\r\n\r\n  return interact;\r\n};\r\n\r\n/*\\\r\n * interact.debug\r\n [ method ]\r\n *\r\n * Returns an object which exposes internal data\r\n = (object) An object with properties that outline the current state and expose internal functions and variables\r\n\\*/\r\ninteract.debug = function () {\r\n  return scope;\r\n};\r\n\r\n// expose the functions used to calculate multi-touch properties\r\ninteract.getPointerAverage  = utils.pointerAverage;\r\ninteract.getTouchBBox       = utils.touchBBox;\r\ninteract.getTouchDistance   = utils.touchDistance;\r\ninteract.getTouchAngle      = utils.touchAngle;\r\n\r\ninteract.getElementRect       = utils.getElementRect;\r\ninteract.getElementClientRect = utils.getElementClientRect;\r\ninteract.matchesSelector      = utils.matchesSelector;\r\ninteract.closest              = utils.closest;\r\n\r\n/*\\\r\n * interact.supportsTouch\r\n [ method ]\r\n *\r\n = (boolean) Whether or not the browser supports touch input\r\n\\*/\r\ninteract.supportsTouch = function () {\r\n  return browser.supportsTouch;\r\n};\r\n\r\n/*\\\r\n * interact.supportsPointerEvent\r\n [ method ]\r\n *\r\n = (boolean) Whether or not the browser supports PointerEvents\r\n\\*/\r\ninteract.supportsPointerEvent = function () {\r\n  return browser.supportsPointerEvent;\r\n};\r\n\r\n/*\\\r\n * interact.stop\r\n [ method ]\r\n *\r\n * Cancels all interactions (end events are not fired)\r\n *\r\n - event (Event) An event on which to call preventDefault()\r\n = (object) interact\r\n\\*/\r\ninteract.stop = function (event) {\r\n  for (let i = scope.interactions.length - 1; i >= 0; i--) {\r\n    scope.interactions[i].stop(event);\r\n  }\r\n\r\n  return interact;\r\n};\r\n\r\n/*\\\r\n * interact.pointerMoveTolerance\r\n [ method ]\r\n * Returns or sets the distance the pointer must be moved before an action\r\n * sequence occurs. This also affects tolerance for tap events.\r\n *\r\n - newValue (number) #optional The movement from the start position must be greater than this value\r\n = (number | Interactable) The current setting or interact\r\n\\*/\r\ninteract.pointerMoveTolerance = function (newValue) {\r\n  if (utils.is.number(newValue)) {\r\n    Interaction.pointerMoveTolerance = newValue;\r\n\r\n    return this;\r\n  }\r\n\r\n  return Interaction.pointerMoveTolerance;\r\n};\r\n\r\ninteract.addDocument    = scope.addDocument;\r\ninteract.removeDocument = scope.removeDocument;\r\n\r\nscope.interact = interact;\r\n\r\nmodule.exports = interact;\r\n","const Interactable = require('./Interactable');\r\nconst Interaction  = require('./Interaction');\r\nconst scope        = require('./scope');\r\nconst is           = require('./utils/is');\r\n\r\nconst { nodeContains, matchesSelector } = require('./utils/domUtils');\r\n\r\n/*\\\r\n * Interactable.preventDefault\r\n [ method ]\r\n *\r\n * Returns or sets whether to prevent the browser's default behaviour\r\n * in response to pointer events. Can be set to:\r\n *  - `'always'` to always prevent\r\n *  - `'never'` to never prevent\r\n *  - `'auto'` to let interact.js try to determine what would be best\r\n *\r\n - newValue (string) #optional `true`, `false` or `'auto'`\r\n = (string | Interactable) The current setting or this Interactable\r\n\\*/\r\nInteractable.prototype.preventDefault = function (newValue) {\r\n  if (/^(always|never|auto)$/.test(newValue)) {\r\n    this.options.preventDefault = newValue;\r\n    return this;\r\n  }\r\n\r\n  if (is.bool(newValue)) {\r\n    this.options.preventDefault = newValue? 'always' : 'never';\r\n    return this;\r\n  }\r\n\r\n  return this.options.preventDefault;\r\n};\r\n\r\nInteractable.prototype.checkAndPreventDefault = function (event) {\r\n  const setting = this.options.preventDefault;\r\n\r\n  if (setting === 'never') { return; }\r\n\r\n  if (setting === 'always') {\r\n    event.preventDefault();\r\n    return;\r\n  }\r\n\r\n  // setting === 'auto'\r\n\r\n  // don't preventDefault of pointerdown events\r\n  if (/^(mouse|pointer|touch)*(down|start)/i.test(event.type)) {\r\n    return;\r\n  }\r\n\r\n  // don't preventDefault on editable elements\r\n  if (matchesSelector(event.target, 'input,select,textarea,[contenteditable=true],[contenteditable=true] *')) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n};\r\n\r\nfunction onInteractionEvent ({ interaction, event }) {\r\n  if (interaction.target) {\r\n    interaction.target.checkAndPreventDefault(event);\r\n  }\r\n}\r\n\r\nfor (const eventSignal of ['down', 'move', 'up', 'cancel']) {\r\n  Interaction.signals.on(eventSignal, onInteractionEvent);\r\n}\r\n\r\n// prevent native HTML5 drag on interact.js target elements\r\nInteraction.docEvents.dragstart = function preventNativeDrag (event) {\r\n  for (const interaction of scope.interactions) {\r\n\r\n    if (interaction.element\r\n        && (interaction.element === event.target\r\n            || nodeContains(interaction.element, event.target))) {\r\n\r\n      interaction.target.checkAndPreventDefault(event);\r\n      return;\r\n    }\r\n  }\r\n};\r\n","const scope         = require('./scope');\r\nconst events        = require('./utils/events');\r\nconst browser       = require('./utils/browser');\r\nconst iFinder       = require('./utils/interactionFinder');\r\nconst pointerEvents = require('./pointerEvents/base');\r\n\r\nconst { window } = require('./utils/window');\r\n\r\nconst toString = Object.prototype.toString;\r\n\r\nif (!window.Array.isArray) {\r\n  window.Array.isArray = function (obj) {\r\n    return toString.call(obj) === '[object Array]';\r\n  };\r\n}\r\n\r\nif (!String.prototype.trim) {\r\n  String.prototype.trim = function () {\r\n    return this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\r\n  };\r\n}\r\n\r\n// http://www.quirksmode.org/dom/events/click.html\r\n// >Events leading to dblclick\r\n//\r\n// IE8 doesn't fire down event before dblclick.\r\n// This workaround tries to fire a tap and doubletap after dblclick\r\nfunction onIE8Dblclick (event) {\r\n  const eventTarget = event.target;\r\n  const interaction = iFinder.search(event, event.type, eventTarget);\r\n\r\n  if (!interaction) { return; }\r\n\r\n  if (interaction.prevTap\r\n      && event.clientX === interaction.prevTap.clientX\r\n      && event.clientY === interaction.prevTap.clientY\r\n      && eventTarget   === interaction.prevTap.target) {\r\n\r\n    interaction.downTargets[0] = eventTarget;\r\n    interaction.downTimes  [0] = new Date().getTime();\r\n\r\n    pointerEvents.fire({\r\n      interaction,\r\n      event,\r\n      eventTarget,\r\n      pointer: event,\r\n      type: 'tap',\r\n    });\r\n  }\r\n}\r\n\r\nif (browser.isIE8) {\r\n  const selectFix = function (event) {\r\n    for (const interaction of scope.interactions) {\r\n      if (interaction.interacting()) {\r\n        interaction.target.checkAndPreventDefault(event);\r\n      }\r\n    }\r\n  };\r\n\r\n  const onDocIE8 = function onDocIE8 ({ doc, win }, signalName) {\r\n    const eventMethod = signalName.indexOf('listen') === 0\r\n      ? events.add : events.remove;\r\n\r\n    // For IE's lack of Event#preventDefault\r\n    eventMethod(doc, 'selectstart', selectFix);\r\n\r\n    if (pointerEvents) {\r\n      eventMethod(doc, 'dblclick', onIE8Dblclick);\r\n    }\r\n  };\r\n\r\n  scope.signals.on('add-document'   , onDocIE8);\r\n  scope.signals.on('remove-document', onDocIE8);\r\n}\r\n\r\nmodule.exports = null;\r\n","const InteractEvent = require('../InteractEvent');\r\nconst Interaction   = require('../Interaction');\r\nconst extend        = require('../utils/extend');\r\n\r\nconst modifiers = {\r\n  names: [],\r\n\r\n  setOffsets: function (arg) {\r\n    const { interaction, pageCoords: page } = arg;\r\n    const { target, element, startOffset } = interaction;\r\n    const rect = target.getRect(element);\r\n\r\n    if (rect) {\r\n      startOffset.left = page.x - rect.left;\r\n      startOffset.top  = page.y - rect.top;\r\n\r\n      startOffset.right  = rect.right  - page.x;\r\n      startOffset.bottom = rect.bottom - page.y;\r\n\r\n      if (!('width'  in rect)) { rect.width  = rect.right  - rect.left; }\r\n      if (!('height' in rect)) { rect.height = rect.bottom - rect.top ; }\r\n    }\r\n    else {\r\n      startOffset.left = startOffset.top = startOffset.right = startOffset.bottom = 0;\r\n    }\r\n\r\n    arg.rect = rect;\r\n    arg.interactable = target;\r\n    arg.element = element;\r\n\r\n    for (let i = 0; i < modifiers.names.length; i++) {\r\n      const modifierName = modifiers.names[i];\r\n\r\n      arg.options = target.options[interaction.prepared.name][modifierName];\r\n\r\n      if (!arg.options) {\r\n        continue;\r\n      }\r\n\r\n      interaction.modifierOffsets[modifierName] = modifiers[modifierName].setOffset(arg);\r\n    }\r\n  },\r\n\r\n  setAll: function (arg) {\r\n    const { interaction, statuses, preEnd, requireEndOnly } = arg;\r\n    const coords = extend({}, arg.pageCoords);\r\n    const result = {\r\n      dx: 0,\r\n      dy: 0,\r\n      changed: false,\r\n      locked: false,\r\n      shouldMove: true,\r\n    };\r\n\r\n    for (const modifierName of modifiers.names) {\r\n      const modifier = modifiers[modifierName];\r\n      const options = interaction.target.options[interaction.prepared.name][modifierName];\r\n\r\n      if (!shouldDo(options, preEnd, requireEndOnly)) { continue; }\r\n\r\n      arg.status = arg.status = statuses[modifierName];\r\n      arg.options = options;\r\n      arg.offset = arg.interaction.modifierOffsets[modifierName];\r\n\r\n      modifier.set(arg);\r\n\r\n      if (arg.status.locked) {\r\n        coords.x += arg.status.dx;\r\n        coords.y += arg.status.dy;\r\n\r\n        result.dx += arg.status.dx;\r\n        result.dy += arg.status.dy;\r\n\r\n        result.locked = true;\r\n      }\r\n    }\r\n\r\n    // a move should be fired if:\r\n    //  - there are no modifiers enabled,\r\n    //  - no modifiers are \"locked\" i.e. have changed the pointer's coordinates, or\r\n    //  - the locked coords have changed since the last pointer move\r\n    result.shouldMove = !arg.status || !result.locked || arg.status.changed;\r\n\r\n    return result;\r\n  },\r\n\r\n  resetStatuses: function (statuses) {\r\n    for (const modifierName of modifiers.names) {\r\n      const status = statuses[modifierName] || {};\r\n\r\n      status.dx = status.dy = 0;\r\n      status.modifiedX = status.modifiedY = NaN;\r\n      status.locked = false;\r\n      status.changed = true;\r\n\r\n      statuses[modifierName] = status;\r\n    }\r\n\r\n    return statuses;\r\n  },\r\n\r\n  start: function ({ interaction }, signalName) {\r\n    const arg = {\r\n      interaction,\r\n      pageCoords: (signalName === 'action-resume' ?\r\n                   interaction.curCoords : interaction.startCoords).page,\r\n      startOffset: interaction.startOffset,\r\n      statuses: interaction.modifierStatuses,\r\n      preEnd: false,\r\n      requireEndOnly: false,\r\n    };\r\n\r\n    modifiers.setOffsets(arg);\r\n    modifiers.resetStatuses(arg.statuses);\r\n\r\n    arg.pageCoords = extend({}, interaction.startCoords.page);\r\n    interaction.modifierResult = modifiers.setAll(arg);\r\n  },\r\n};\r\n\r\nInteraction.signals.on('new', function (interaction) {\r\n  interaction.startOffset      = { left: 0, right: 0, top: 0, bottom: 0 };\r\n  interaction.modifierOffsets  = {};\r\n  interaction.modifierStatuses = modifiers.resetStatuses({});\r\n  interaction.modifierResult   = null;\r\n});\r\n\r\nInteraction.signals.on('action-start' , modifiers.start);\r\nInteraction.signals.on('action-resume', modifiers.start);\r\n\r\nInteraction.signals.on('before-action-move', function ({ interaction, preEnd, interactingBeforeMove }) {\r\n  const modifierResult = modifiers.setAll({\r\n    interaction,\r\n    preEnd,\r\n    pageCoords: interaction.curCoords.page,\r\n    statuses: interaction.modifierStatuses,\r\n    requireEndOnly: false,\r\n  });\r\n\r\n  // don't fire an action move if a modifier would keep the event in the same\r\n  // cordinates as before\r\n  if (!modifierResult.shouldMove && interactingBeforeMove) {\r\n    interaction._dontFireMove = true;\r\n  }\r\n\r\n  interaction.modifierResult = modifierResult;\r\n});\r\n\r\nInteraction.signals.on('action-end', function ({ interaction, event }) {\r\n  for (let i = 0; i < modifiers.names.length; i++) {\r\n    const options = interaction.target.options[interaction.prepared.name][modifiers.names[i]];\r\n\r\n    // if the endOnly option is true for any modifier\r\n    if (shouldDo(options, true, true)) {\r\n      // fire a move event at the modified coordinates\r\n      interaction.doMove({ event, preEnd: true });\r\n      break;\r\n    }\r\n  }\r\n});\r\n\r\nInteractEvent.signals.on('set-xy', function (arg) {\r\n  const { iEvent, interaction } = arg;\r\n  const modifierArg = extend({}, arg);\r\n\r\n  for (let i = 0; i < modifiers.names.length; i++) {\r\n    const modifierName = modifiers.names[i];\r\n    modifierArg.options = interaction.target.options[interaction.prepared.name][modifierName];\r\n\r\n    if (!modifierArg.options) {\r\n      continue;\r\n    }\r\n\r\n    const modifier = modifiers[modifierName];\r\n\r\n    modifierArg.status = interaction.modifierStatuses[modifierName];\r\n\r\n    iEvent[modifierName] = modifier.modifyCoords(modifierArg);\r\n  }\r\n});\r\n\r\nfunction shouldDo (options, preEnd, requireEndOnly) {\r\n  return (options && options.enabled\r\n          && (preEnd || !options.endOnly)\r\n          && (!requireEndOnly || options.endOnly));\r\n}\r\n\r\nmodule.exports = modifiers;\r\n","const modifiers      = require('./index');\r\nconst utils          = require('../utils');\r\nconst defaultOptions = require('../defaultOptions');\r\n\r\nconst restrict = {\r\n  defaults: {\r\n    enabled    : false,\r\n    endOnly    : false,\r\n    restriction: null,\r\n    elementRect: null,\r\n  },\r\n\r\n  setOffset: function ({ rect, startOffset, options }) {\r\n    const elementRect = options && options.elementRect;\r\n    const offset = {};\r\n\r\n    if (rect && elementRect) {\r\n      offset.left = startOffset.left - (rect.width  * elementRect.left);\r\n      offset.top  = startOffset.top  - (rect.height * elementRect.top);\r\n\r\n      offset.right  = startOffset.right  - (rect.width  * (1 - elementRect.right));\r\n      offset.bottom = startOffset.bottom - (rect.height * (1 - elementRect.bottom));\r\n    }\r\n    else {\r\n      offset.left = offset.top = offset.right = offset.bottom = 0;\r\n    }\r\n\r\n    return offset;\r\n  },\r\n\r\n  set: function ({ pageCoords, interaction, status, options }) {\r\n    if (!options) { return status; }\r\n\r\n    const page = status.useStatusXY\r\n      ? { x: status.x, y: status.y }\r\n      : utils.extend({}, pageCoords);\r\n\r\n    const restriction = getRestrictionRect(options.restriction, interaction, page);\r\n\r\n    if (!restriction) { return status; }\r\n\r\n    status.dx = 0;\r\n    status.dy = 0;\r\n    status.locked = false;\r\n\r\n    const rect = restriction;\r\n    let modifiedX = page.x;\r\n    let modifiedY = page.y;\r\n\r\n    const offset = interaction.modifierOffsets.restrict;\r\n\r\n    // object is assumed to have\r\n    // x, y, width, height or\r\n    // left, top, right, bottom\r\n    if ('x' in restriction && 'y' in restriction) {\r\n      modifiedX = Math.max(Math.min(rect.x + rect.width  - offset.right , page.x), rect.x + offset.left);\r\n      modifiedY = Math.max(Math.min(rect.y + rect.height - offset.bottom, page.y), rect.y + offset.top );\r\n    }\r\n    else {\r\n      modifiedX = Math.max(Math.min(rect.right  - offset.right , page.x), rect.left + offset.left);\r\n      modifiedY = Math.max(Math.min(rect.bottom - offset.bottom, page.y), rect.top  + offset.top );\r\n    }\r\n\r\n    status.dx = modifiedX - page.x;\r\n    status.dy = modifiedY - page.y;\r\n\r\n    status.changed = status.modifiedX !== modifiedX || status.modifiedY !== modifiedY;\r\n    status.locked = !!(status.dx || status.dy);\r\n\r\n    status.modifiedX = modifiedX;\r\n    status.modifiedY = modifiedY;\r\n  },\r\n\r\n  modifyCoords: function ({ page, client, status, phase, options }) {\r\n    const elementRect = options && options.elementRect;\r\n\r\n    if (options && options.enabled\r\n        && !(phase === 'start' && elementRect && status.locked)) {\r\n\r\n      if (status.locked) {\r\n        page.x += status.dx;\r\n        page.y += status.dy;\r\n        client.x += status.dx;\r\n        client.y += status.dy;\r\n\r\n        return {\r\n          dx: status.dx,\r\n          dy: status.dy,\r\n        };\r\n      }\r\n    }\r\n  },\r\n\r\n  getRestrictionRect,\r\n};\r\n\r\nfunction getRestrictionRect (value, interaction, page) {\r\n  if (utils.is.function(value)) {\r\n    return utils.resolveRectLike(value, interaction.target, interaction.element, [page.x, page.y, interaction]);\r\n  } else {\r\n    return utils.resolveRectLike(value, interaction.target, interaction.element);\r\n  }\r\n}\r\n\r\nmodifiers.restrict = restrict;\r\nmodifiers.names.push('restrict');\r\n\r\ndefaultOptions.perAction.restrict = restrict.defaults;\r\n\r\nmodule.exports = restrict;\r\n","// This module adds the options.resize.restrictEdges setting which sets min and\r\n// max for the top, left, bottom and right edges of the target being resized.\r\n//\r\n// interact(target).resize({\r\n//   edges: { top: true, left: true },\r\n//   restrictEdges: {\r\n//     inner: { top: 200, left: 200, right: 400, bottom: 400 },\r\n//     outer: { top:   0, left:   0, right: 600, bottom: 600 },\r\n//   },\r\n// });\r\n\r\nconst modifiers      = require('./index');\r\nconst utils          = require('../utils');\r\nconst rectUtils      = require('../utils/rect');\r\nconst defaultOptions = require('../defaultOptions');\r\nconst resize         = require('../actions/resize');\r\n\r\nconst { getRestrictionRect } = require('./restrict');\r\n\r\nconst noInner = { top: +Infinity, left: +Infinity, bottom: -Infinity, right: -Infinity };\r\nconst noOuter = { top: -Infinity, left: -Infinity, bottom: +Infinity, right: +Infinity };\r\n\r\nconst restrictEdges = {\r\n  defaults: {\r\n    enabled: false,\r\n    endOnly: false,\r\n    min: null,\r\n    max: null,\r\n    offset: null,\r\n  },\r\n\r\n  setOffset: function ({ interaction, startOffset, options }) {\r\n    if (!options) {\r\n      return utils.extend({}, startOffset);\r\n    }\r\n\r\n    const offset = getRestrictionRect(options.offset, interaction, interaction.startCoords.page);\r\n\r\n    if (offset) {\r\n      return {\r\n        top:    startOffset.top    + offset.y,\r\n        left:   startOffset.left   + offset.x,\r\n        bottom: startOffset.bottom + offset.y,\r\n        right:  startOffset.right  + offset.x,\r\n      };\r\n    }\r\n\r\n    return startOffset;\r\n  },\r\n\r\n  set: function ({ pageCoords, interaction, status, offset, options }) {\r\n    const edges = interaction.prepared.linkedEdges || interaction.prepared.edges;\r\n\r\n    if (!interaction.interacting() || !edges) {\r\n      return;\r\n    }\r\n\r\n    const page = status.useStatusXY\r\n      ? { x: status.x, y: status.y }\r\n      : utils.extend({}, pageCoords);\r\n    const inner = rectUtils.xywhToTlbr(getRestrictionRect(options.inner, interaction, page)) || noInner;\r\n    const outer = rectUtils.xywhToTlbr(getRestrictionRect(options.outer, interaction, page)) || noOuter;\r\n\r\n    let modifiedX = page.x;\r\n    let modifiedY = page.y;\r\n\r\n    status.dx = 0;\r\n    status.dy = 0;\r\n    status.locked = false;\r\n\r\n    if (edges.top) {\r\n      modifiedY = Math.min(Math.max(outer.top    + offset.top,    page.y), inner.top    + offset.top);\r\n    }\r\n    else if (edges.bottom) {\r\n      modifiedY = Math.max(Math.min(outer.bottom - offset.bottom, page.y), inner.bottom - offset.bottom);\r\n    }\r\n    if (edges.left) {\r\n      modifiedX = Math.min(Math.max(outer.left   + offset.left,   page.x), inner.left   + offset.left);\r\n    }\r\n    else if (edges.right) {\r\n      modifiedX = Math.max(Math.min(outer.right  - offset.right,  page.x), inner.right  - offset.right);\r\n    }\r\n\r\n    status.dx = modifiedX - page.x;\r\n    status.dy = modifiedY - page.y;\r\n\r\n    status.changed = status.modifiedX !== modifiedX || status.modifiedY !== modifiedY;\r\n    status.locked = !!(status.dx || status.dy);\r\n\r\n    status.modifiedX = modifiedX;\r\n    status.modifiedY = modifiedY;\r\n  },\r\n\r\n  modifyCoords: function ({ page, client, status, phase, options }) {\r\n    if (options && options.enabled\r\n        && !(phase === 'start' && status.locked)) {\r\n\r\n      if (status.locked) {\r\n        page.x += status.dx;\r\n        page.y += status.dy;\r\n        client.x += status.dx;\r\n        client.y += status.dy;\r\n\r\n        return {\r\n          dx: status.dx,\r\n          dy: status.dy,\r\n        };\r\n      }\r\n    }\r\n  },\r\n\r\n  noInner,\r\n  noOuter,\r\n  getRestrictionRect,\r\n};\r\n\r\nmodifiers.restrictEdges = restrictEdges;\r\nmodifiers.names.push('restrictEdges');\r\n\r\ndefaultOptions.perAction.restrictEdges = restrictEdges.defaults;\r\nresize.defaults.restrictEdges          = restrictEdges.defaults;\r\n\r\nmodule.exports = restrictEdges;\r\n","// This module adds the options.resize.restrictSize setting which sets min and\r\n// max width and height for the target being resized.\r\n//\r\n// interact(target).resize({\r\n//   edges: { top: true, left: true },\r\n//   restrictSize: {\r\n//     min: { width: -600, height: -600 },\r\n//     max: { width:  600, height:  600 },\r\n//   },\r\n// });\r\n\r\nconst modifiers      = require('./index');\r\nconst restrictEdges  = require('./restrictEdges');\r\nconst utils          = require('../utils');\r\nconst rectUtils      = require('../utils/rect');\r\nconst defaultOptions = require('../defaultOptions');\r\nconst resize         = require('../actions/resize');\r\n\r\nconst noMin = { width: -Infinity, height: -Infinity };\r\nconst noMax = { width: +Infinity, height: +Infinity };\r\n\r\nconst restrictSize = {\r\n  defaults: {\r\n    enabled: false,\r\n    endOnly: false,\r\n    min: null,\r\n    max: null,\r\n  },\r\n\r\n  setOffset: function ({ interaction }) {\r\n    return interaction.startOffset;\r\n  },\r\n\r\n  set: function (arg) {\r\n    const { interaction, options } = arg;\r\n    const edges = interaction.prepared.linkedEdges || interaction.prepared.edges;\r\n\r\n    if (!interaction.interacting() || !edges) {\r\n      return;\r\n    }\r\n\r\n    const rect = rectUtils.xywhToTlbr(interaction.resizeRects.inverted);\r\n\r\n    const minSize = rectUtils.tlbrToXywh(restrictEdges.getRestrictionRect(options.min, interaction)) || noMin;\r\n    const maxSize = rectUtils.tlbrToXywh(restrictEdges.getRestrictionRect(options.max, interaction)) || noMax;\r\n\r\n    arg.options = {\r\n      enabled: options.enabled,\r\n      endOnly: options.endOnly,\r\n      inner: utils.extend({}, restrictEdges.noInner),\r\n      outer: utils.extend({}, restrictEdges.noOuter),\r\n    };\r\n\r\n    if (edges.top) {\r\n      arg.options.inner.top = rect.bottom - minSize.height;\r\n      arg.options.outer.top = rect.bottom - maxSize.height;\r\n    }\r\n    else if (edges.bottom) {\r\n      arg.options.inner.bottom = rect.top + minSize.height;\r\n      arg.options.outer.bottom = rect.top + maxSize.height;\r\n    }\r\n    if (edges.left) {\r\n      arg.options.inner.left = rect.right - minSize.width;\r\n      arg.options.outer.left = rect.right - maxSize.width;\r\n    }\r\n    else if (edges.right) {\r\n      arg.options.inner.right = rect.left + minSize.width;\r\n      arg.options.outer.right = rect.left + maxSize.width;\r\n    }\r\n\r\n    restrictEdges.set(arg);\r\n  },\r\n\r\n  modifyCoords: restrictEdges.modifyCoords,\r\n};\r\n\r\nmodifiers.restrictSize = restrictSize;\r\nmodifiers.names.push('restrictSize');\r\n\r\ndefaultOptions.perAction.restrictSize = restrictSize.defaults;\r\nresize.defaults.restrictSize          = restrictSize.defaults;\r\n\r\nmodule.exports = restrictSize;\r\n","const modifiers      = require('./index');\r\nconst interact       = require('../interact');\r\nconst utils          = require('../utils');\r\nconst defaultOptions = require('../defaultOptions');\r\n\r\nconst snap = {\r\n  defaults: {\r\n    enabled: false,\r\n    endOnly: false,\r\n    range  : Infinity,\r\n    targets: null,\r\n    offsets: null,\r\n\r\n    relativePoints: null,\r\n  },\r\n\r\n  setOffset: function ({ interaction, interactable, element, rect, startOffset, options }) {\r\n    const offsets = [];\r\n    const optionsOrigin = utils.rectToXY(utils.resolveRectLike(options.origin));\r\n    const origin = optionsOrigin || utils.getOriginXY(interactable, element, interaction.prepared.name);\r\n    options = options || interactable.options[interaction.prepared.name].snap || {};\r\n\r\n    let snapOffset;\r\n\r\n    if (options.offset === 'startCoords') {\r\n      snapOffset = {\r\n        x: interaction.startCoords.page.x - origin.x,\r\n        y: interaction.startCoords.page.y - origin.y,\r\n      };\r\n    }\r\n    else  {\r\n      const offsetRect = utils.resolveRectLike(options.offset, interactable, element, [interaction]);\r\n\r\n      snapOffset = utils.rectToXY(offsetRect) || { x: 0, y: 0 };\r\n    }\r\n\r\n    if (rect && options.relativePoints && options.relativePoints.length) {\r\n      for (const { x: relativeX, y: relativeY } of options.relativePoints) {\r\n        offsets.push({\r\n          x: startOffset.left - (rect.width  * relativeX) + snapOffset.x,\r\n          y: startOffset.top  - (rect.height * relativeY) + snapOffset.y,\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      offsets.push(snapOffset);\r\n    }\r\n\r\n    return offsets;\r\n  },\r\n\r\n  set: function ({ interaction, pageCoords, status, options, offset: offsets }) {\r\n    const targets = [];\r\n    let target;\r\n    let page;\r\n    let i;\r\n\r\n    if (status.useStatusXY) {\r\n      page = { x: status.x, y: status.y };\r\n    }\r\n    else {\r\n      const origin = utils.getOriginXY(interaction.target, interaction.element, interaction.prepared.name);\r\n\r\n      page = utils.extend({}, pageCoords);\r\n\r\n      page.x -= origin.x;\r\n      page.y -= origin.y;\r\n    }\r\n\r\n    status.realX = page.x;\r\n    status.realY = page.y;\r\n\r\n    let len = options.targets? options.targets.length : 0;\r\n\r\n    for (const { x: offsetX, y: offsetY } of offsets) {\r\n      const relativeX = page.x - offsetX;\r\n      const relativeY = page.y - offsetY;\r\n\r\n      for (const snapTarget of options.targets) {\r\n        if (utils.is.function(snapTarget)) {\r\n          target = snapTarget(relativeX, relativeY, interaction);\r\n        }\r\n        else {\r\n          target = snapTarget;\r\n        }\r\n\r\n        if (!target) { continue; }\r\n\r\n        targets.push({\r\n          x: utils.is.number(target.x) ? (target.x + offsetX) : relativeX,\r\n          y: utils.is.number(target.y) ? (target.y + offsetY) : relativeY,\r\n\r\n          range: utils.is.number(target.range)? target.range: options.range,\r\n        });\r\n      }\r\n    }\r\n\r\n    const closest = {\r\n      target: null,\r\n      inRange: false,\r\n      distance: 0,\r\n      range: 0,\r\n      dx: 0,\r\n      dy: 0,\r\n    };\r\n\r\n    for (i = 0, len = targets.length; i < len; i++) {\r\n      target = targets[i];\r\n\r\n      const range = target.range;\r\n      const dx = target.x - page.x;\r\n      const dy = target.y - page.y;\r\n      const distance = utils.hypot(dx, dy);\r\n      let inRange = distance <= range;\r\n\r\n      // Infinite targets count as being out of range\r\n      // compared to non infinite ones that are in range\r\n      if (range === Infinity && closest.inRange && closest.range !== Infinity) {\r\n        inRange = false;\r\n      }\r\n\r\n      if (!closest.target || (inRange\r\n          // is the closest target in range?\r\n          ? (closest.inRange && range !== Infinity\r\n          // the pointer is relatively deeper in this target\r\n          ? distance / range < closest.distance / closest.range\r\n          // this target has Infinite range and the closest doesn't\r\n          : (range === Infinity && closest.range !== Infinity)\r\n          // OR this target is closer that the previous closest\r\n        || distance < closest.distance)\r\n          // The other is not in range and the pointer is closer to this target\r\n          : (!closest.inRange && distance < closest.distance))) {\r\n\r\n        closest.target = target;\r\n        closest.distance = distance;\r\n        closest.range = range;\r\n        closest.inRange = inRange;\r\n        closest.dx = dx;\r\n        closest.dy = dy;\r\n\r\n        status.range = range;\r\n      }\r\n    }\r\n\r\n    let snapChanged;\r\n\r\n    if (closest.target) {\r\n      snapChanged = (status.modifiedX !== closest.target.x || status.modifiedY !== closest.target.y);\r\n\r\n      status.modifiedX = closest.target.x;\r\n      status.modifiedY = closest.target.y;\r\n    }\r\n    else {\r\n      snapChanged = true;\r\n\r\n      status.modifiedX = NaN;\r\n      status.modifiedY = NaN;\r\n    }\r\n\r\n    status.dx = closest.dx;\r\n    status.dy = closest.dy;\r\n\r\n    status.changed = (snapChanged || (closest.inRange && !status.locked));\r\n    status.locked = closest.inRange;\r\n  },\r\n\r\n  modifyCoords: function ({ page, client, status, phase, options }) {\r\n    const relativePoints = options && options.relativePoints;\r\n\r\n    if (options && options.enabled\r\n        && !(phase === 'start' && relativePoints && relativePoints.length)) {\r\n\r\n      if (status.locked) {\r\n        page.x += status.dx;\r\n        page.y += status.dy;\r\n        client.x += status.dx;\r\n        client.y += status.dy;\r\n      }\r\n\r\n      return {\r\n        range  : status.range,\r\n        locked : status.locked,\r\n        x      : status.modifiedX,\r\n        y      : status.modifiedY,\r\n        realX  : status.realX,\r\n        realY  : status.realY,\r\n        dx     : status.dx,\r\n        dy     : status.dy,\r\n      };\r\n    }\r\n  },\r\n};\r\n\r\ninteract.createSnapGrid = function (grid) {\r\n  return function (x, y) {\r\n    const limits = grid.limits || {\r\n      left  : -Infinity,\r\n      right :  Infinity,\r\n      top   : -Infinity,\r\n      bottom:  Infinity,\r\n    };\r\n    let offsetX = 0;\r\n    let offsetY = 0;\r\n\r\n    if (utils.is.object(grid.offset)) {\r\n      offsetX = grid.offset.x;\r\n      offsetY = grid.offset.y;\r\n    }\r\n\r\n    const gridx = Math.round((x - offsetX) / grid.x);\r\n    const gridy = Math.round((y - offsetY) / grid.y);\r\n\r\n    const newX = Math.max(limits.left, Math.min(limits.right , gridx * grid.x + offsetX));\r\n    const newY = Math.max(limits.top , Math.min(limits.bottom, gridy * grid.y + offsetY));\r\n\r\n    return {\r\n      x: newX,\r\n      y: newY,\r\n      range: grid.range,\r\n    };\r\n  };\r\n};\r\n\r\nmodifiers.snap = snap;\r\nmodifiers.names.push('snap');\r\n\r\ndefaultOptions.perAction.snap = snap.defaults;\r\n\r\nmodule.exports = snap;\r\n","// This module allows snapping of the size of targets during resize\r\n// interactions.\r\n\r\nconst modifiers      = require('./index');\r\nconst snap           = require('./snap');\r\nconst defaultOptions = require('../defaultOptions');\r\nconst resize         = require('../actions/resize');\r\nconst utils          = require('../utils/');\r\n\r\nconst snapSize = {\r\n  defaults: {\r\n    enabled: false,\r\n    endOnly: false,\r\n    range  : Infinity,\r\n    targets: null,\r\n    offsets: null,\r\n  },\r\n\r\n  setOffset: function (arg) {\r\n    const { interaction, options } = arg;\r\n    const edges = interaction.prepared.edges;\r\n\r\n    if (!edges) { return; }\r\n\r\n    arg.options = {\r\n      relativePoints: [{\r\n        x: edges.left? 0 : 1,\r\n        y: edges.top ? 0 : 1,\r\n      }],\r\n      origin: { x: 0, y: 0 },\r\n      offset: 'self',\r\n      range: options.range,\r\n    };\r\n\r\n    const offsets = snap.setOffset(arg);\r\n    arg.options = options;\r\n\r\n    return offsets;\r\n  },\r\n\r\n  set: function (arg) {\r\n    const { interaction, options, offset, pageCoords } = arg;\r\n    const page = utils.extend({}, pageCoords);\r\n    const relativeX = page.x - offset[0].x;\r\n    const relativeY = page.y - offset[0].y;\r\n\r\n    arg.options = utils.extend({}, options);\r\n    arg.options.targets = [];\r\n\r\n    for (const snapTarget of options.targets) {\r\n      let target;\r\n\r\n      if (utils.is.function(snapTarget)) {\r\n        target = snapTarget(relativeX, relativeY, interaction);\r\n      }\r\n      else {\r\n        target = snapTarget;\r\n      }\r\n\r\n      if (!target) { continue; }\r\n\r\n      if ('width' in target && 'height' in target) {\r\n        target.x = target.width;\r\n        target.y = target.height;\r\n      }\r\n\r\n      arg.options.targets.push(target);\r\n    }\r\n\r\n    snap.set(arg);\r\n  },\r\n\r\n  modifyCoords: function (arg) {\r\n    const { options } = arg;\r\n\r\n    arg.options = utils.extend({}, options);\r\n    arg.options.enabled = options.enabled;\r\n    arg.options.relativePoints = [null];\r\n\r\n    snap.modifyCoords(arg);\r\n  },\r\n};\r\n\r\nmodifiers.snapSize = snapSize;\r\nmodifiers.names.push('snapSize');\r\n\r\ndefaultOptions.perAction.snapSize = snapSize.defaults;\r\nresize.defaults.snapSize          = snapSize.defaults;\r\n\r\nmodule.exports = snapSize;\r\n","const pointerUtils = require('../utils/pointerUtils');\r\n\r\nmodule.exports = class PointerEvent {\r\n  constructor (type, pointer, event, eventTarget, interaction) {\r\n    pointerUtils.pointerExtend(this, event);\r\n\r\n    if (event !== pointer) {\r\n      pointerUtils.pointerExtend(this, pointer);\r\n    }\r\n\r\n    this.interaction = interaction;\r\n\r\n    this.timeStamp     = new Date().getTime();\r\n    this.originalEvent = event;\r\n    this.type          = type;\r\n    this.pointerId     = pointerUtils.getPointerId(pointer);\r\n    this.pointerType   = pointerUtils.getPointerType(pointer, interaction);\r\n    this.target        = eventTarget;\r\n    this.currentTarget = null;\r\n\r\n    if (type === 'tap') {\r\n      const pointerIndex = interaction.getPointerIndex(pointer);\r\n      this.dt = this.timeStamp - interaction.downTimes[pointerIndex];\r\n\r\n      const interval = this.timeStamp - interaction.tapTime;\r\n\r\n      this.double = !!(interaction.prevTap\r\n        && interaction.prevTap.type !== 'doubletap'\r\n        && interaction.prevTap.target === this.target\r\n        && interval < 500);\r\n    }\r\n    else if (type === 'doubletap') {\r\n      this.dt = pointer.timeStamp - interaction.tapTime;\r\n    }\r\n  }\r\n\r\n  subtractOrigin ({ x: originX, y: originY }) {\r\n    this.pageX   -= originX;\r\n    this.pageY   -= originY;\r\n    this.clientX -= originX;\r\n    this.clientY -= originY;\r\n\r\n    return this;\r\n  }\r\n\r\n  addOrigin ({ x: originX, y: originY }) {\r\n    this.pageX   += originX;\r\n    this.pageY   += originY;\r\n    this.clientX += originX;\r\n    this.clientY += originY;\r\n\r\n    return this;\r\n  }\r\n\r\n  preventDefault () {\r\n    this.originalEvent.preventDefault();\r\n  }\r\n\r\n  stopPropagation () {\r\n    this.propagationStopped = true;\r\n  }\r\n\r\n  stopImmediatePropagation () {\r\n    this.immediatePropagationStopped = this.propagationStopped = true;\r\n  }\r\n};\r\n","const PointerEvent = require('./PointerEvent');\r\nconst Interaction  = require('../Interaction');\r\nconst utils        = require('../utils');\r\nconst browser      = require('../utils/browser');\r\nconst defaults     = require('../defaultOptions');\r\nconst signals      = require('../utils/Signals').new();\r\nconst { filter }   = require('../utils/arr');\r\n\r\nconst simpleSignals = [ 'down', 'up', 'cancel' ];\r\nconst simpleEvents  = [ 'down', 'up', 'cancel' ];\r\n\r\nconst pointerEvents = {\r\n  PointerEvent,\r\n  fire,\r\n  collectEventTargets,\r\n  signals,\r\n  defaults: {\r\n    holdDuration: 600,\r\n    ignoreFrom  : null,\r\n    allowFrom   : null,\r\n    origin      : { x: 0, y: 0 },\r\n  },\r\n  types: [\r\n    'down',\r\n    'move',\r\n    'up',\r\n    'cancel',\r\n    'tap',\r\n    'doubletap',\r\n    'hold',\r\n  ],\r\n};\r\n\r\nfunction fire (arg) {\r\n  const {\r\n    interaction, pointer, event, eventTarget,\r\n    type = arg.pointerEvent.type,\r\n    targets = collectEventTargets(arg),\r\n    pointerEvent = new PointerEvent(type, pointer, event, eventTarget, interaction),\r\n  } = arg;\r\n\r\n  const signalArg = {\r\n    interaction,\r\n    pointer,\r\n    event,\r\n    eventTarget,\r\n    targets,\r\n    type,\r\n    pointerEvent,\r\n  };\r\n\r\n  for (let i = 0; i < targets.length; i++) {\r\n    const target = targets[i];\r\n\r\n    for (const prop in target.props || {}) {\r\n      pointerEvent[prop] = target.props[prop];\r\n    }\r\n\r\n    const origin = utils.getOriginXY(target.eventable, target.element);\r\n\r\n    pointerEvent.subtractOrigin(origin);\r\n    pointerEvent.eventable = target.eventable;\r\n    pointerEvent.currentTarget = target.element;\r\n\r\n    target.eventable.fire(pointerEvent);\r\n\r\n    pointerEvent.addOrigin(origin);\r\n\r\n    if (pointerEvent.immediatePropagationStopped\r\n        || (pointerEvent.propagationStopped\r\n            && (i + 1) < targets.length && targets[i + 1].element !== pointerEvent.currentTarget)) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  signals.fire('fired', signalArg);\r\n\r\n  if (type === 'tap') {\r\n    // if pointerEvent should make a double tap, create and fire a doubletap\r\n    // PointerEvent and use that as the prevTap\r\n    const prevTap = pointerEvent.double\r\n      ? fire({\r\n        interaction, pointer, event, eventTarget,\r\n        type: 'doubletap',\r\n      })\r\n      : pointerEvent;\r\n\r\n    interaction.prevTap = prevTap;\r\n    interaction.tapTime = prevTap.timeStamp;\r\n  }\r\n\r\n  return pointerEvent;\r\n}\r\n\r\nfunction collectEventTargets ({ interaction, pointer, event, eventTarget, type }) {\r\n  const pointerIndex = interaction.getPointerIndex(pointer);\r\n\r\n  // do not fire a tap event if the pointer was moved before being lifted\r\n  if (type === 'tap' && (interaction.pointerWasMoved\r\n      // or if the pointerup target is different to the pointerdown target\r\n      || !(interaction.downTargets[pointerIndex] && interaction.downTargets[pointerIndex] === eventTarget))) {\r\n    return [];\r\n  }\r\n\r\n  const path = utils.getPath(eventTarget);\r\n  const signalArg = {\r\n    interaction,\r\n    pointer,\r\n    event,\r\n    eventTarget,\r\n    type,\r\n    path,\r\n    targets: [],\r\n    element: null,\r\n  };\r\n\r\n  for (const element of path) {\r\n    signalArg.element = element;\r\n\r\n    signals.fire('collect-targets', signalArg);\r\n  }\r\n\r\n  if (type === 'hold') {\r\n    signalArg.targets = filter(signalArg.targets, target =>\r\n      target.eventable.options.holdDuration === interaction.holdTimers[pointerIndex].duration);\r\n  }\r\n\r\n  return signalArg.targets;\r\n}\r\n\r\nInteraction.signals.on('update-pointer-down', function ({ interaction, pointerIndex }) {\r\n  interaction.holdTimers[pointerIndex] = { duration: Infinity, timeout: null };\r\n});\r\n\r\nInteraction.signals.on('remove-pointer', function ({ interaction, pointerIndex }) {\r\n  interaction.holdTimers.splice(pointerIndex, 1);\r\n});\r\n\r\nInteraction.signals.on('move', function ({ interaction, pointer, event, eventTarget, duplicateMove }) {\r\n  const pointerIndex = interaction.getPointerIndex(pointer);\r\n\r\n  if (!duplicateMove && (!interaction.pointerIsDown || interaction.pointerWasMoved)) {\r\n    if (interaction.pointerIsDown) {\r\n      clearTimeout(interaction.holdTimers[pointerIndex].timeout);\r\n    }\r\n\r\n    fire({\r\n      interaction, pointer, event, eventTarget,\r\n      type: 'move',\r\n    });\r\n  }\r\n});\r\n\r\nInteraction.signals.on('down', function ({ interaction, pointer, event, eventTarget, pointerIndex }) {\r\n  // copy event to be used in timeout for IE8\r\n  const eventCopy = browser.isIE8? utils.extend({}, event) : event;\r\n\r\n  const timer = interaction.holdTimers[pointerIndex];\r\n  const path = utils.getPath(eventTarget);\r\n  const signalArg = {\r\n    interaction,\r\n    pointer,\r\n    event,\r\n    eventTarget,\r\n    type: 'hold',\r\n    targets: [],\r\n    path,\r\n    element: null,\r\n  };\r\n\r\n  for (const element of path) {\r\n    signalArg.element = element;\r\n\r\n    signals.fire('collect-targets', signalArg);\r\n  }\r\n\r\n  if (!signalArg.targets.length) { return; }\r\n\r\n  let minDuration = Infinity;\r\n\r\n  for (let i = 0; i < signalArg.targets.length; i++) {\r\n    const target = signalArg.targets[i];\r\n    const holdDuration = target.eventable.options.holdDuration;\r\n\r\n    if (holdDuration < minDuration) {\r\n      minDuration = holdDuration;\r\n    }\r\n  }\r\n\r\n  timer.duration = minDuration;\r\n  timer.timeout = setTimeout(function () {\r\n    fire({\r\n      interaction, eventCopy, eventTarget,\r\n      pointer: browser.isIE8? eventCopy : pointer,\r\n      type: 'hold',\r\n    });\r\n  }, minDuration);\r\n});\r\n\r\nInteraction.signals.on('up', ({ interaction, pointer, event, eventTarget }) => {\r\n  if (!interaction.pointerWasMoved) {\r\n    fire({ interaction, eventTarget, pointer, event, type: 'tap' });\r\n  }\r\n});\r\n\r\n['up', 'cancel'].forEach(function (signalName) {\r\n  Interaction.signals.on(signalName, function ({ interaction, pointerIndex }) {\r\n    if (interaction.holdTimers[pointerIndex]) {\r\n      clearTimeout(interaction.holdTimers[pointerIndex].timeout);\r\n    }\r\n  });\r\n});\r\n\r\nfunction createSignalListener (type) {\r\n  return function ({ interaction, pointer, event, eventTarget }) {\r\n    fire({ interaction, eventTarget, pointer, event, type });\r\n  };\r\n}\r\n\r\nfor (let i = 0; i < simpleSignals.length; i++) {\r\n  Interaction.signals.on(simpleSignals[i], createSignalListener(simpleEvents[i]));\r\n}\r\n\r\nInteraction.signals.on('new', function (interaction) {\r\n  interaction.prevTap    = null;  // the most recent tap event on this interaction\r\n  interaction.tapTime    = 0;     // time of the most recent tap event\r\n  interaction.holdTimers = [];    // [{ duration, timeout }]\r\n});\r\n\r\ndefaults.pointerEvents = pointerEvents.defaults;\r\nmodule.exports = pointerEvents;\r\n","const pointerEvents = require('./base');\r\nconst Interaction   = require('../Interaction');\r\n\r\npointerEvents.signals.on('new', onNew);\r\npointerEvents.signals.on('fired', onFired);\r\n\r\nfor (const signal of ['move', 'up', 'cancel', 'endall']) {\r\n  Interaction.signals.on(signal, endHoldRepeat);\r\n}\r\n\r\nfunction onNew ({ pointerEvent }) {\r\n  if (pointerEvent.type !== 'hold') { return; }\r\n\r\n  pointerEvent.count = (pointerEvent.count || 0) + 1;\r\n}\r\n\r\nfunction onFired ({ interaction, pointerEvent, eventTarget, targets }) {\r\n  if (pointerEvent.type !== 'hold' || !targets.length) { return; }\r\n\r\n  // get the repeat interval from the first eventable\r\n  const interval = targets[0].eventable.options.holdRepeatInterval;\r\n\r\n  // don't repeat if the interval is 0 or less\r\n  if (interval <= 0) { return; }\r\n\r\n  // set a timeout to fire the holdrepeat event\r\n  interaction.holdIntervalHandle = setTimeout(function () {\r\n    pointerEvents.fire({\r\n      interaction,\r\n      eventTarget,\r\n      type: 'hold',\r\n      pointer: pointerEvent,\r\n      event: pointerEvent,\r\n    });\r\n  }, interval);\r\n}\r\n\r\nfunction endHoldRepeat ({ interaction }) {\r\n  // set the interaction's holdStopTime property\r\n  // to stop further holdRepeat events\r\n  if (interaction.holdIntervalHandle) {\r\n    clearInterval(interaction.holdIntervalHandle);\r\n    interaction.holdIntervalHandle = null;\r\n  }\r\n}\r\n\r\n// don't repeat by default\r\npointerEvents.defaults.holdRepeatInterval = 0;\r\npointerEvents.types.push('holdrepeat');\r\n\r\nmodule.exports = {\r\n  onNew,\r\n  onFired,\r\n  endHoldRepeat,\r\n};\r\n","const pointerEvents = require('./base');\r\nconst Interactable  = require('../Interactable');\r\nconst browser       = require('../utils/browser');\r\nconst is            = require('../utils/is');\r\nconst domUtils      = require('../utils/domUtils');\r\nconst scope         = require('../scope');\r\nconst extend        = require('../utils/extend');\r\nconst { merge }     = require('../utils/arr');\r\n\r\npointerEvents.signals.on('collect-targets', function ({ targets, element, type, eventTarget }) {\r\n  function collectSelectors (interactable, selector, context) {\r\n    const els = browser.useMatchesSelectorPolyfill\r\n        ? context.querySelectorAll(selector)\r\n        : undefined;\r\n\r\n    const eventable = interactable.events;\r\n    const options = eventable.options;\r\n\r\n    if (eventable[type]\r\n        && is.element(element)\r\n        && domUtils.matchesSelector(element, selector, els)\r\n        && interactable.testIgnoreAllow(options, element, eventTarget)) {\r\n\r\n      targets.push({\r\n        element,\r\n        eventable,\r\n        props: { interactable },\r\n      });\r\n    }\r\n  }\r\n\r\n  const interactable = scope.interactables.get(element);\r\n\r\n  if (interactable) {\r\n    const eventable = interactable.events;\r\n    const options = eventable.options;\r\n\r\n    if (eventable[type]\r\n        && interactable.testIgnoreAllow(options, element, eventTarget)) {\r\n      targets.push({\r\n        element,\r\n        eventable,\r\n        props: { interactable },\r\n      });\r\n    }\r\n  }\r\n\r\n  scope.interactables.forEachSelector(collectSelectors, element);\r\n});\r\n\r\nInteractable.signals.on('new', function ({ interactable }) {\r\n  interactable.events.getRect = function (element) {\r\n    return interactable.getRect(element);\r\n  };\r\n});\r\n\r\nInteractable.signals.on('set', function ({ interactable, options }) {\r\n  extend(interactable.events.options, pointerEvents.defaults);\r\n  extend(interactable.events.options, options);\r\n});\r\n\r\nmerge(Interactable.eventTypes, pointerEvents.types);\r\n\r\nInteractable.prototype.pointerEvents = function (options) {\r\n  extend(this.events.options, options);\r\n\r\n  return this;\r\n};\r\n\r\nconst __backCompatOption = Interactable.prototype._backCompatOption;\r\n\r\nInteractable.prototype._backCompatOption = function (optionName, newValue) {\r\n  const ret = __backCompatOption.call(this, optionName, newValue);\r\n\r\n  if (ret === this) {\r\n    this.events.options[optionName] = newValue;\r\n  }\r\n\r\n  return ret;\r\n};\r\n\r\nInteractable.settingsMethods.push('pointerEvents');\r\n","const utils   = require('./utils');\r\nconst events  = require('./utils/events');\r\nconst signals = require('./utils/Signals').new();\r\n\r\nconst scope = {\r\n  signals,\r\n  events,\r\n  utils,\r\n\r\n  // main document\r\n  document: require('./utils/domObjects').document,\r\n  // all documents being listened to\r\n  documents: [],\r\n\r\n  addDocument: function (doc, win) {\r\n    // do nothing if document is already known\r\n    if (utils.contains(scope.documents, doc)) { return false; }\r\n\r\n    win = win || scope.getWindow(doc);\r\n\r\n    scope.documents.push(doc);\r\n    events.documents.push(doc);\r\n\r\n    // don't add an unload event for the main document\r\n    // so that the page may be cached in browser history\r\n    if (doc !== scope.document) {\r\n      events.add(win, 'unload', scope.onWindowUnload);\r\n    }\r\n\r\n    signals.fire('add-document', { doc, win });\r\n  },\r\n\r\n  removeDocument: function (doc, win) {\r\n    const index = utils.indexOf(scope.documents, doc);\r\n\r\n    win = win || scope.getWindow(doc);\r\n\r\n    events.remove(win, 'unload', scope.onWindowUnload);\r\n\r\n    scope.documents.splice(index, 1);\r\n    events.documents.splice(index, 1);\r\n\r\n    signals.fire('remove-document', { win, doc });\r\n  },\r\n\r\n  onWindowUnload: function () {\r\n    scope.removeDocument(this.document, this);\r\n  },\r\n};\r\n\r\nmodule.exports = scope;\r\n","const { indexOf } = require('./arr');\r\n\r\nclass Signals {\r\n  constructor () {\r\n    this.listeners = {\r\n      // signalName: [listeners],\r\n    };\r\n  }\r\n\r\n  on (name, listener) {\r\n    if (!this.listeners[name]) {\r\n      this.listeners[name] = [listener];\r\n      return;\r\n    }\r\n\r\n    this.listeners[name].push(listener);\r\n  }\r\n\r\n  off (name, listener) {\r\n    if (!this.listeners[name]) { return; }\r\n\r\n    const index = indexOf(this.listeners[name], listener);\r\n\r\n    if (index !== -1) {\r\n      this.listeners[name].splice(index, 1);\r\n    }\r\n  }\r\n\r\n  fire (name, arg) {\r\n    const targetListeners = this.listeners[name];\r\n\r\n    if (!targetListeners) { return; }\r\n\r\n    for (let i = 0; i < targetListeners.length; i++) {\r\n      if (targetListeners[i](arg, name) === false) {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nSignals.new = function () {\r\n  return new Signals();\r\n};\r\n\r\nmodule.exports = Signals;\r\n","function indexOf (array, target) {\r\n  for (let i = 0, len = array.length; i < len; i++) {\r\n    if (array[i] === target) {\r\n      return i;\r\n    }\r\n  }\r\n\r\n  return -1;\r\n}\r\n\r\nfunction contains (array, target) {\r\n  return indexOf(array, target) !== -1;\r\n}\r\n\r\nfunction merge (target, source) {\r\n  for (let i = 0; i < source.length; i++) {\r\n    target.push(source[i]);\r\n  }\r\n\r\n  return target;\r\n}\r\n\r\nfunction filter (array, test) {\r\n  const result = [];\r\n\r\n  for (let i = 0; i < array.length; i++) {\r\n    if (test(array[i])) {\r\n      result.push(array[i]);\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports = {\r\n  indexOf,\r\n  contains,\r\n  merge,\r\n  filter,\r\n};\r\n","const { window } = require('./window');\r\nconst is     = require('./is');\r\nconst domObjects = require('./domObjects');\r\n\r\nconst Element = domObjects.Element;\r\nconst navigator  = window.navigator;\r\n\r\nconst browser = {\r\n  // Does the browser support touch input?\r\n  supportsTouch: !!(('ontouchstart' in window) || is.function(window.DocumentTouch)\r\n                     && domObjects.document instanceof window.DocumentTouch),\r\n\r\n  // Does the browser support PointerEvents\r\n  supportsPointerEvent: !!domObjects.PointerEvent,\r\n\r\n  isIE8: ('attachEvent' in window) && !('addEventListener' in window),\r\n\r\n  // Opera Mobile must be handled differently\r\n  isOperaMobile: (navigator.appName === 'Opera'\r\n      && browser.supportsTouch\r\n      && navigator.userAgent.match('Presto')),\r\n\r\n  // scrolling doesn't change the result of getClientRects on iOS 7\r\n  isIOS7: (/iP(hone|od|ad)/.test(navigator.platform)\r\n           && /OS 7[^\\d]/.test(navigator.appVersion)),\r\n\r\n  isIe9OrOlder: /MSIE (8|9)/.test(navigator.userAgent),\r\n\r\n  // prefix matchesSelector\r\n  prefixedMatchesSelector: 'matches' in Element.prototype\r\n    ? 'matches': 'webkitMatchesSelector' in Element.prototype\r\n    ? 'webkitMatchesSelector': 'mozMatchesSelector' in Element.prototype\r\n    ? 'mozMatchesSelector': 'oMatchesSelector' in Element.prototype\r\n    ? 'oMatchesSelector': 'msMatchesSelector',\r\n\r\n  useMatchesSelectorPolyfill: false,\r\n\r\n  pEventTypes: (domObjects.PointerEvent\r\n    ? (domObjects.PointerEvent === window.MSPointerEvent\r\n      ? {\r\n        up:     'MSPointerUp',\r\n        down:   'MSPointerDown',\r\n        over:   'mouseover',\r\n        out:    'mouseout',\r\n        move:   'MSPointerMove',\r\n        cancel: 'MSPointerCancel',\r\n      }\r\n      : {\r\n        up:     'pointerup',\r\n        down:   'pointerdown',\r\n        over:   'pointerover',\r\n        out:    'pointerout',\r\n        move:   'pointermove',\r\n        cancel: 'pointercancel',\r\n      })\r\n    : null),\r\n\r\n  // because Webkit and Opera still use 'mousewheel' event type\r\n  wheelEvent: 'onmousewheel' in domObjects.document? 'mousewheel': 'wheel',\r\n\r\n};\r\n\r\nbrowser.useMatchesSelectorPolyfill = !is.function(Element.prototype[browser.prefixedMatchesSelector]);\r\n\r\nmodule.exports = browser;\r\n","const domObjects = {};\r\nconst win = require('./window').window;\r\n\r\nfunction blank () {}\r\n\r\ndomObjects.document           = win.document;\r\ndomObjects.DocumentFragment   = win.DocumentFragment   || blank;\r\ndomObjects.SVGElement         = win.SVGElement         || blank;\r\ndomObjects.SVGSVGElement      = win.SVGSVGElement      || blank;\r\ndomObjects.SVGElementInstance = win.SVGElementInstance || blank;\r\ndomObjects.Element            = win.Element            || blank;\r\ndomObjects.HTMLElement        = win.HTMLElement        || domObjects.Element;\r\n\r\ndomObjects.Event        = win.Event;\r\ndomObjects.Touch        = win.Touch || blank;\r\ndomObjects.PointerEvent = (win.PointerEvent || win.MSPointerEvent);\r\n\r\nmodule.exports = domObjects;\r\n","const win        = require('./window');\r\nconst browser    = require('./browser');\r\nconst is         = require('./is');\r\nconst domObjects = require('./domObjects');\r\n\r\nconst domUtils = {\r\n  nodeContains: function (parent, child) {\r\n    while (child) {\r\n      if (child === parent) {\r\n        return true;\r\n      }\r\n\r\n      child = child.parentNode;\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  closest: function (element, selector) {\r\n    while (is.element(element)) {\r\n      if (domUtils.matchesSelector(element, selector)) { return element; }\r\n\r\n      element = domUtils.parentNode(element);\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  parentNode: function (node) {\r\n    let parent = node.parentNode;\r\n\r\n    if (is.docFrag(parent)) {\r\n      // skip past #shado-root fragments\r\n      while ((parent = parent.host) && is.docFrag(parent)) {\r\n        continue;\r\n      }\r\n\r\n      return parent;\r\n    }\r\n\r\n    return parent;\r\n  },\r\n\r\n  // taken from http://tanalin.com/en/blog/2012/12/matches-selector-ie8/ and modified\r\n  matchesSelectorPolyfill: browser.useMatchesSelectorPolyfill\r\n    ? function (element, selector, elems) {\r\n      elems = elems || element.parentNode.querySelectorAll(selector);\r\n\r\n      for (let i = 0, len = elems.length; i < len; i++) {\r\n        if (elems[i] === element) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    }\r\n    : null,\r\n\r\n  matchesSelector: function (element, selector, nodeList) {\r\n    if (browser.useMatchesSelectorPolyfill) {\r\n      return domUtils.matchesSelectorPolyfill(element, selector, nodeList);\r\n    }\r\n\r\n    // remove /deep/ from selectors if shadowDOM polyfill is used\r\n    if (win.window !== win.realWindow) {\r\n      selector = selector.replace(/\\/deep\\//g, ' ');\r\n    }\r\n\r\n    return element[browser.prefixedMatchesSelector](selector);\r\n  },\r\n\r\n  // Test for the element that's \"above\" all other qualifiers\r\n  indexOfDeepestElement: function (elements) {\r\n    let deepestZoneParents = [];\r\n    let dropzoneParents = [];\r\n    let dropzone;\r\n    let deepestZone = elements[0];\r\n    let index = deepestZone? 0: -1;\r\n    let parent;\r\n    let child;\r\n    let i;\r\n    let n;\r\n\r\n    for (i = 1; i < elements.length; i++) {\r\n      dropzone = elements[i];\r\n\r\n      // an element might belong to multiple selector dropzones\r\n      if (!dropzone || dropzone === deepestZone) {\r\n        continue;\r\n      }\r\n\r\n      if (!deepestZone) {\r\n        deepestZone = dropzone;\r\n        index = i;\r\n        continue;\r\n      }\r\n\r\n      // check if the deepest or current are document.documentElement or document.rootElement\r\n      // - if the current dropzone is, do nothing and continue\r\n      if (dropzone.parentNode === dropzone.ownerDocument) {\r\n        continue;\r\n      }\r\n      // - if deepest is, update with the current dropzone and continue to next\r\n      else if (deepestZone.parentNode === dropzone.ownerDocument) {\r\n        deepestZone = dropzone;\r\n        index = i;\r\n        continue;\r\n      }\r\n\r\n      if (!deepestZoneParents.length) {\r\n        parent = deepestZone;\r\n        while (parent.parentNode && parent.parentNode !== parent.ownerDocument) {\r\n          deepestZoneParents.unshift(parent);\r\n          parent = parent.parentNode;\r\n        }\r\n      }\r\n\r\n      // if this element is an svg element and the current deepest is\r\n      // an HTMLElement\r\n      if (deepestZone instanceof domObjects.HTMLElement\r\n          && dropzone instanceof domObjects.SVGElement\r\n          && !(dropzone instanceof domObjects.SVGSVGElement)) {\r\n\r\n        if (dropzone === deepestZone.parentNode) {\r\n          continue;\r\n        }\r\n\r\n        parent = dropzone.ownerSVGElement;\r\n      }\r\n      else {\r\n        parent = dropzone;\r\n      }\r\n\r\n      dropzoneParents = [];\r\n\r\n      while (parent.parentNode !== parent.ownerDocument) {\r\n        dropzoneParents.unshift(parent);\r\n        parent = parent.parentNode;\r\n      }\r\n\r\n      n = 0;\r\n\r\n      // get (position of last common ancestor) + 1\r\n      while (dropzoneParents[n] && dropzoneParents[n] === deepestZoneParents[n]) {\r\n        n++;\r\n      }\r\n\r\n      const parents = [\r\n        dropzoneParents[n - 1],\r\n        dropzoneParents[n],\r\n        deepestZoneParents[n],\r\n      ];\r\n\r\n      child = parents[0].lastChild;\r\n\r\n      while (child) {\r\n        if (child === parents[1]) {\r\n          deepestZone = dropzone;\r\n          index = i;\r\n          deepestZoneParents = [];\r\n\r\n          break;\r\n        }\r\n        else if (child === parents[2]) {\r\n          break;\r\n        }\r\n\r\n        child = child.previousSibling;\r\n      }\r\n    }\r\n\r\n    return index;\r\n  },\r\n\r\n  matchesUpTo: function (element, selector, limit) {\r\n    while (is.element(element)) {\r\n      if (domUtils.matchesSelector(element, selector)) {\r\n        return true;\r\n      }\r\n\r\n      element = domUtils.parentNode(element);\r\n\r\n      if (element === limit) {\r\n        return domUtils.matchesSelector(element, selector);\r\n      }\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  getActualElement: function (element) {\r\n    return (element instanceof domObjects.SVGElementInstance\r\n      ? element.correspondingUseElement\r\n      : element);\r\n  },\r\n\r\n  getScrollXY: function (relevantWindow) {\r\n    relevantWindow = relevantWindow || win.window;\r\n    return {\r\n      x: relevantWindow.scrollX || relevantWindow.document.documentElement.scrollLeft,\r\n      y: relevantWindow.scrollY || relevantWindow.document.documentElement.scrollTop,\r\n    };\r\n  },\r\n\r\n  getElementClientRect: function (element) {\r\n    const clientRect = (element instanceof domObjects.SVGElement\r\n      ? element.getBoundingClientRect()\r\n      : element.getClientRects()[0]);\r\n\r\n    return clientRect && {\r\n      left  : clientRect.left,\r\n      right : clientRect.right,\r\n      top   : clientRect.top,\r\n      bottom: clientRect.bottom,\r\n      width : clientRect.width  || clientRect.right  - clientRect.left,\r\n      height: clientRect.height || clientRect.bottom - clientRect.top,\r\n    };\r\n  },\r\n\r\n  getElementRect: function (element) {\r\n    const clientRect = domUtils.getElementClientRect(element);\r\n\r\n    if (!browser.isIOS7 && clientRect) {\r\n      const scroll = domUtils.getScrollXY(win.getWindow(element));\r\n\r\n      clientRect.left   += scroll.x;\r\n      clientRect.right  += scroll.x;\r\n      clientRect.top    += scroll.y;\r\n      clientRect.bottom += scroll.y;\r\n    }\r\n\r\n    return clientRect;\r\n  },\r\n\r\n  getPath: function (element) {\r\n    const path = [];\r\n\r\n    while (element) {\r\n      path.push(element);\r\n      element = domUtils.parentNode(element);\r\n    }\r\n\r\n    return path;\r\n  },\r\n\r\n  trySelector: value => {\r\n    if (!is.string(value)) { return false; }\r\n\r\n    // an exception will be raised if it is invalid\r\n    domObjects.document.querySelector(value);\r\n    return true;\r\n  },\r\n};\r\n\r\nmodule.exports = domUtils;\r\n","const is   = require('./is');\r\nconst domUtils = require('./domUtils');\r\nconst pExtend  = require('./pointerExtend');\r\n\r\nconst { window, getWindow }  = require('./window');\r\nconst { indexOf, contains } = require('./arr');\r\n\r\nconst useAttachEvent = ('attachEvent' in window) && !('addEventListener' in window);\r\nconst addEvent       = useAttachEvent?  'attachEvent': 'addEventListener';\r\nconst removeEvent    = useAttachEvent?  'detachEvent': 'removeEventListener';\r\nconst on             = useAttachEvent? 'on': '';\r\n\r\nconst elements          = [];\r\nconst targets           = [];\r\nconst attachedListeners = [];\r\n\r\n// {\r\n//   type: {\r\n//     selectors: ['selector', ...],\r\n//     contexts : [document, ...],\r\n//     listeners: [[listener, capture, passive], ...]\r\n//   }\r\n//  }\r\nconst delegatedEvents = {};\r\n\r\nconst documents = [];\r\n\r\nconst supportsOptions = !useAttachEvent && (() => {\r\n  let supported = false;\r\n\r\n  window.document.createElement('div').addEventListener('test', null, {\r\n    get capture () { supported = true; },\r\n  });\r\n\r\n  return supported;\r\n})();\r\n\r\nfunction add (element, type, listener, optionalArg) {\r\n  const options = getOptions(optionalArg);\r\n  let elementIndex = indexOf(elements, element);\r\n  let target = targets[elementIndex];\r\n\r\n  if (!target) {\r\n    target = {\r\n      events: {},\r\n      typeCount: 0,\r\n    };\r\n\r\n    elementIndex = elements.push(element) - 1;\r\n    targets.push(target);\r\n\r\n    attachedListeners.push(useAttachEvent\r\n      ? {\r\n        supplied: [],\r\n        wrapped : [],\r\n        useCount: [],\r\n      }\r\n      : null);\r\n  }\r\n\r\n  if (!target.events[type]) {\r\n    target.events[type] = [];\r\n    target.typeCount++;\r\n  }\r\n\r\n  if (!contains(target.events[type], listener)) {\r\n    let ret;\r\n\r\n    if (useAttachEvent) {\r\n      const { supplied, wrapped, useCount } = attachedListeners[elementIndex];\r\n      const listenerIndex = indexOf(supplied, listener);\r\n\r\n      const wrappedListener = wrapped[listenerIndex] || function (event) {\r\n        if (!event.immediatePropagationStopped) {\r\n          event.target = event.srcElement;\r\n          event.currentTarget = element;\r\n\r\n          event.preventDefault           = event.preventDefault           || preventDef;\r\n          event.stopPropagation          = event.stopPropagation          || stopProp;\r\n          event.stopImmediatePropagation = event.stopImmediatePropagation || stopImmProp;\r\n\r\n          if (/mouse|click/.test(event.type)) {\r\n            event.pageX = event.clientX + getWindow(element).document.documentElement.scrollLeft;\r\n            event.pageY = event.clientY + getWindow(element).document.documentElement.scrollTop;\r\n          }\r\n\r\n          listener(event);\r\n        }\r\n      };\r\n\r\n      ret = element[addEvent](on + type, wrappedListener, !!options.capture);\r\n\r\n      if (listenerIndex === -1) {\r\n        supplied.push(listener);\r\n        wrapped.push(wrappedListener);\r\n        useCount.push(1);\r\n      }\r\n      else {\r\n        useCount[listenerIndex]++;\r\n      }\r\n    }\r\n    else {\r\n      ret = element[addEvent](type, listener, supportsOptions? options : !!options.capture);\r\n    }\r\n    target.events[type].push(listener);\r\n\r\n    return ret;\r\n  }\r\n}\r\n\r\nfunction remove (element, type, listener, optionalArg) {\r\n  const options = getOptions(optionalArg);\r\n  const elementIndex = indexOf(elements, element);\r\n  const target = targets[elementIndex];\r\n\r\n  if (!target || !target.events) {\r\n    return;\r\n  }\r\n\r\n  let wrappedListener = listener;\r\n  let listeners;\r\n  let listenerIndex;\r\n\r\n  if (useAttachEvent) {\r\n    listeners = attachedListeners[elementIndex];\r\n    listenerIndex = indexOf(listeners.supplied, listener);\r\n    wrappedListener = listeners.wrapped[listenerIndex];\r\n  }\r\n\r\n  if (type === 'all') {\r\n    for (type in target.events) {\r\n      if (target.events.hasOwnProperty(type)) {\r\n        remove(element, type, 'all');\r\n      }\r\n    }\r\n    return;\r\n  }\r\n\r\n  if (target.events[type]) {\r\n    const len = target.events[type].length;\r\n\r\n    if (listener === 'all') {\r\n      for (let i = 0; i < len; i++) {\r\n        remove(element, type, target.events[type][i], options);\r\n      }\r\n      return;\r\n    }\r\n    else {\r\n      for (let i = 0; i < len; i++) {\r\n        if (target.events[type][i] === listener) {\r\n          element[removeEvent](on + type, wrappedListener, supportsOptions? options : !!options.capture);\r\n          target.events[type].splice(i, 1);\r\n\r\n          if (useAttachEvent && listeners) {\r\n            listeners.useCount[listenerIndex]--;\r\n            if (listeners.useCount[listenerIndex] === 0) {\r\n              listeners.supplied.splice(listenerIndex, 1);\r\n              listeners.wrapped.splice(listenerIndex, 1);\r\n              listeners.useCount.splice(listenerIndex, 1);\r\n            }\r\n          }\r\n\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (target.events[type] && target.events[type].length === 0) {\r\n      target.events[type] = null;\r\n      target.typeCount--;\r\n    }\r\n  }\r\n\r\n  if (!target.typeCount) {\r\n    targets.splice(elementIndex, 1);\r\n    elements.splice(elementIndex, 1);\r\n    attachedListeners.splice(elementIndex, 1);\r\n  }\r\n}\r\n\r\nfunction addDelegate (selector, context, type, listener, optionalArg) {\r\n  const options = getOptions(optionalArg);\r\n  if (!delegatedEvents[type]) {\r\n    delegatedEvents[type] = {\r\n      selectors: [],\r\n      contexts : [],\r\n      listeners: [],\r\n    };\r\n\r\n    // add delegate listener functions\r\n    for (let i = 0; i < documents.length; i++) {\r\n      add(documents[i], type, delegateListener);\r\n      add(documents[i], type, delegateUseCapture, true);\r\n    }\r\n  }\r\n\r\n  const delegated = delegatedEvents[type];\r\n  let index;\r\n\r\n  for (index = delegated.selectors.length - 1; index >= 0; index--) {\r\n    if (delegated.selectors[index] === selector\r\n        && delegated.contexts[index] === context) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (index === -1) {\r\n    index = delegated.selectors.length;\r\n\r\n    delegated.selectors.push(selector);\r\n    delegated.contexts .push(context);\r\n    delegated.listeners.push([]);\r\n  }\r\n\r\n  // keep listener and capture and passive flags\r\n  delegated.listeners[index].push([listener, !!options.capture, options.passive]);\r\n}\r\n\r\nfunction removeDelegate (selector, context, type, listener, optionalArg) {\r\n  const options = getOptions(optionalArg);\r\n  const delegated = delegatedEvents[type];\r\n  let matchFound = false;\r\n  let index;\r\n\r\n  if (!delegated) { return; }\r\n\r\n  // count from last index of delegated to 0\r\n  for (index = delegated.selectors.length - 1; index >= 0; index--) {\r\n    // look for matching selector and context Node\r\n    if (delegated.selectors[index] === selector\r\n        && delegated.contexts[index] === context) {\r\n\r\n      const listeners = delegated.listeners[index];\r\n\r\n      // each item of the listeners array is an array: [function, capture, passive]\r\n      for (let i = listeners.length - 1; i >= 0; i--) {\r\n        const [fn, capture, passive] = listeners[i];\r\n\r\n        // check if the listener functions and capture and passive flags match\r\n        if (fn === listener && capture === !!options.capture && passive === options.passive) {\r\n          // remove the listener from the array of listeners\r\n          listeners.splice(i, 1);\r\n\r\n          // if all listeners for this interactable have been removed\r\n          // remove the interactable from the delegated arrays\r\n          if (!listeners.length) {\r\n            delegated.selectors.splice(index, 1);\r\n            delegated.contexts .splice(index, 1);\r\n            delegated.listeners.splice(index, 1);\r\n\r\n            // remove delegate function from context\r\n            remove(context, type, delegateListener);\r\n            remove(context, type, delegateUseCapture, true);\r\n\r\n            // remove the arrays if they are empty\r\n            if (!delegated.selectors.length) {\r\n              delegatedEvents[type] = null;\r\n            }\r\n          }\r\n\r\n          // only remove one listener\r\n          matchFound = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (matchFound) { break; }\r\n    }\r\n  }\r\n}\r\n\r\n// bound to the interactable context when a DOM event\r\n// listener is added to a selector interactable\r\nfunction delegateListener (event, optionalArg) {\r\n  const options = getOptions(optionalArg);\r\n  const fakeEvent = {};\r\n  const delegated = delegatedEvents[event.type];\r\n  const eventTarget = (domUtils.getActualElement(event.path\r\n    ? event.path[0]\r\n    : event.target));\r\n  let element = eventTarget;\r\n\r\n  // duplicate the event so that currentTarget can be changed\r\n  pExtend(fakeEvent, event);\r\n\r\n  fakeEvent.originalEvent = event;\r\n  fakeEvent.preventDefault = preventOriginalDefault;\r\n\r\n  // climb up document tree looking for selector matches\r\n  while (is.element(element)) {\r\n    for (let i = 0; i < delegated.selectors.length; i++) {\r\n      const selector = delegated.selectors[i];\r\n      const context = delegated.contexts[i];\r\n\r\n      if (domUtils.matchesSelector(element, selector)\r\n          && domUtils.nodeContains(context, eventTarget)\r\n          && domUtils.nodeContains(context, element)) {\r\n\r\n        const listeners = delegated.listeners[i];\r\n\r\n        fakeEvent.currentTarget = element;\r\n\r\n        for (let j = 0; j < listeners.length; j++) {\r\n          const [fn, capture, passive] = listeners[j];\r\n\r\n          if (capture === !!options.capture && passive === options.passive) {\r\n            fn(fakeEvent);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    element = domUtils.parentNode(element);\r\n  }\r\n}\r\n\r\nfunction delegateUseCapture (event) {\r\n  return delegateListener.call(this, event, true);\r\n}\r\n\r\nfunction preventDef () {\r\n  this.returnValue = false;\r\n}\r\n\r\nfunction preventOriginalDefault () {\r\n  this.originalEvent.preventDefault();\r\n}\r\n\r\nfunction stopProp () {\r\n  this.cancelBubble = true;\r\n}\r\n\r\nfunction stopImmProp () {\r\n  this.cancelBubble = true;\r\n  this.immediatePropagationStopped = true;\r\n}\r\n\r\nfunction getOptions (param) {\r\n  return is.object(param)? param : { capture: param };\r\n}\r\n\r\nmodule.exports = {\r\n  add,\r\n  remove,\r\n\r\n  addDelegate,\r\n  removeDelegate,\r\n\r\n  delegateListener,\r\n  delegateUseCapture,\r\n  delegatedEvents,\r\n  documents,\r\n\r\n  useAttachEvent,\r\n  supportsOptions,\r\n\r\n  _elements: elements,\r\n  _targets: targets,\r\n  _attachedListeners: attachedListeners,\r\n};\r\n","module.exports = function extend (dest, source) {\r\n  for (const prop in source) {\r\n    dest[prop] = source[prop];\r\n  }\r\n  return dest;\r\n};\r\n","const {\r\n  resolveRectLike,\r\n  rectToXY,\r\n} = require('./rect');\r\n\r\nmodule.exports = function (target, element, action) {\r\n  const actionOptions = target.options[action];\r\n  const actionOrigin = actionOptions && actionOptions.origin;\r\n  const origin = actionOrigin || target.options.origin;\r\n\r\n  const originRect = resolveRectLike(origin, target, element, [target && element]);\r\n\r\n  return rectToXY(originRect) || { x: 0, y: 0 };\r\n};\r\n","module.exports = (x, y) =>  Math.sqrt(x * x + y * y);\r\n","const extend = require('./extend');\r\nconst win    = require('./window');\r\n\r\nconst utils = {\r\n  warnOnce: function (method, message) {\r\n    let warned = false;\r\n\r\n    return function () {\r\n      if (!warned) {\r\n        win.window.console.warn(message);\r\n        warned = true;\r\n      }\r\n\r\n      return method.apply(this, arguments);\r\n    };\r\n  },\r\n\r\n  // http://stackoverflow.com/a/5634528/2280888\r\n  _getQBezierValue: function (t, p1, p2, p3) {\r\n    const iT = 1 - t;\r\n    return iT * iT * p1 + 2 * iT * t * p2 + t * t * p3;\r\n  },\r\n\r\n  getQuadraticCurvePoint: function (startX, startY, cpX, cpY, endX, endY, position) {\r\n    return {\r\n      x:  utils._getQBezierValue(position, startX, cpX, endX),\r\n      y:  utils._getQBezierValue(position, startY, cpY, endY),\r\n    };\r\n  },\r\n\r\n  // http://gizma.com/easing/\r\n  easeOutQuad: function (t, b, c, d) {\r\n    t /= d;\r\n    return -c * t*(t-2) + b;\r\n  },\r\n\r\n  copyAction: function (dest, src) {\r\n    dest.name  = src.name;\r\n    dest.axis  = src.axis;\r\n    dest.edges = src.edges;\r\n\r\n    return dest;\r\n  },\r\n\r\n  is         : require('./is'),\r\n  extend     : extend,\r\n  hypot      : require('./hypot'),\r\n  getOriginXY: require('./getOriginXY'),\r\n};\r\n\r\nextend(utils, require('./arr'));\r\nextend(utils, require('./domUtils'));\r\nextend(utils, require('./pointerUtils'));\r\nextend(utils, require('./rect'));\r\n\r\nmodule.exports = utils;\r\n","const scope   = require('../scope');\r\nconst utils   = require('./index');\r\nconst browser = require('./browser');\r\n\r\nconst finder = {\r\n  methodOrder: [ 'simulationResume', 'mouse', 'hasPointer', 'idle' ],\r\n\r\n  search: function (pointer, eventType, eventTarget) {\r\n    const mouseEvent = (/mouse/i.test(pointer.pointerType || eventType)\r\n                        // MSPointerEvent.MSPOINTER_TYPE_MOUSE\r\n                        || pointer.pointerType === 4);\r\n    const pointerId = utils.getPointerId(pointer);\r\n    const details = { pointer, pointerId, mouseEvent, eventType, eventTarget };\r\n\r\n    for (const method of finder.methodOrder) {\r\n      const interaction = finder[method](details);\r\n\r\n      if (interaction) {\r\n        return interaction;\r\n      }\r\n    }\r\n  },\r\n\r\n  // try to resume simulation with a new pointer\r\n  simulationResume: function ({ mouseEvent, eventType, eventTarget }) {\r\n    if (!/down|start/i.test(eventType)) {\r\n      return null;\r\n    }\r\n\r\n    for (const interaction of scope.interactions) {\r\n      let element = eventTarget;\r\n\r\n      if (interaction.simulation && interaction.simulation.allowResume\r\n          && (interaction.mouse === mouseEvent)) {\r\n        while (element) {\r\n          // if the element is the interaction element\r\n          if (element === interaction.element) {\r\n            return interaction;\r\n          }\r\n          element = utils.parentNode(element);\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  // if it's a mouse interaction\r\n  mouse: function ({ pointerId, mouseEvent, eventType }) {\r\n    if (!mouseEvent && (browser.supportsTouch || browser.supportsPointerEvent)) {\r\n      return null;\r\n    }\r\n\r\n    let firstNonActive;\r\n\r\n    for (const interaction of scope.interactions) {\r\n      if (interaction.mouse) {\r\n        // if it's a down event, skip interactions with running simulations\r\n        if (interaction.simulation && !utils.contains(interaction.pointerIds, pointerId)) { continue; }\r\n\r\n        // if the interaction is active, return it immediately\r\n        if (interaction.interacting()) {\r\n          return interaction;\r\n        }\r\n        // otherwise save it and look for another active interaction\r\n        else if (!firstNonActive) {\r\n          firstNonActive = interaction;\r\n        }\r\n      }\r\n    }\r\n\r\n    // if no active mouse interaction was found use the first inactive mouse\r\n    // interaction\r\n    if (firstNonActive) {\r\n      return firstNonActive;\r\n    }\r\n\r\n    // Find any interaction specifically for mouse.\r\n    // ignore the interaction if the eventType is a mousedown, and a simulation\r\n    // is active\r\n    for (const interaction of scope.interactions) {\r\n      if (interaction.mouse && !(/down/.test(eventType) && interaction.simulation)) {\r\n        return interaction;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  // get interaction that has this pointer\r\n  hasPointer: function ({ pointerId }) {\r\n    for (const interaction of scope.interactions) {\r\n      if (utils.contains(interaction.pointerIds, pointerId)) {\r\n        return interaction;\r\n      }\r\n    }\r\n  },\r\n\r\n  // get first idle interaction\r\n  idle: function ({ mouseEvent }) {\r\n    for (const interaction of scope.interactions) {\r\n      // if there's already a pointer held down\r\n      if (interaction.pointerIds.length === 1) {\r\n        const target = interaction.target;\r\n        // don't add this pointer if there is a target interactable and it\r\n        // isn't gesturable\r\n        if (target && !target.options.gesture.enabled) {\r\n          continue;\r\n        }\r\n      }\r\n      // maximum of 2 pointers per interaction\r\n      else if (interaction.pointerIds.length >= 2) {\r\n        continue;\r\n      }\r\n\r\n      if (!interaction.interacting() && (mouseEvent === interaction.mouse)) {\r\n        return interaction;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  },\r\n};\r\n\r\nmodule.exports = finder;\r\n","const win        = require('./window');\r\nconst isWindow   = require('./isWindow');\r\n\r\nconst is = {\r\n  array   : () => {},\r\n\r\n  window  : thing => thing === win.window || isWindow(thing),\r\n\r\n  docFrag : thing => is.object(thing) && thing.nodeType === 11,\r\n\r\n  object  : thing => !!thing && (typeof thing === 'object'),\r\n\r\n  function: thing => typeof thing === 'function',\r\n\r\n  number  : thing => typeof thing === 'number'  ,\r\n\r\n  bool    : thing => typeof thing === 'boolean' ,\r\n\r\n  string  : thing => typeof thing === 'string'  ,\r\n\r\n  element: thing => {\r\n    if (!thing || (typeof thing !== 'object')) { return false; }\r\n\r\n    const _window = win.getWindow(thing) || win.window;\r\n\r\n    return (/object|function/.test(typeof _window.Element)\r\n      ? thing instanceof _window.Element //DOM2\r\n      : thing.nodeType === 1 && typeof thing.nodeName === 'string');\r\n  },\r\n};\r\n\r\nis.array = thing => (is.object(thing)\r\n  && (typeof thing.length !== 'undefined')\r\n  && is.function(thing.splice));\r\n\r\nmodule.exports = is;\r\n","module.exports = (thing) => !!(thing && thing.Window) && (thing instanceof thing.Window);\r\n","function pointerExtend (dest, source) {\r\n  for (const prop in source) {\r\n    const prefixedPropREs = module.exports.prefixedPropREs;\r\n    let deprecated = false;\r\n\r\n    // skip deprecated prefixed properties\r\n    for (const vendor in prefixedPropREs) {\r\n      if (prop.indexOf(vendor) === 0 && prefixedPropREs[vendor].test(prop)) {\r\n        deprecated = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (!deprecated && typeof source[prop] !== 'function') {\r\n      dest[prop] = source[prop];\r\n    }\r\n  }\r\n  return dest;\r\n}\r\n\r\npointerExtend.prefixedPropREs = {\r\n  webkit: /(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,\r\n};\r\n\r\nmodule.exports = pointerExtend;\r\n","const hypot         = require('./hypot');\r\nconst browser       = require('./browser');\r\nconst dom           = require('./domObjects');\r\nconst domUtils      = require('./domUtils');\r\nconst is            = require('./is');\r\nconst pointerExtend = require('./pointerExtend');\r\n\r\nconst pointerUtils = {\r\n  copyCoords: function (dest, src) {\r\n    dest.page = dest.page || {};\r\n    dest.page.x = src.page.x;\r\n    dest.page.y = src.page.y;\r\n\r\n    dest.client = dest.client || {};\r\n    dest.client.x = src.client.x;\r\n    dest.client.y = src.client.y;\r\n\r\n    dest.timeStamp = src.timeStamp;\r\n  },\r\n\r\n  setCoordDeltas: function (targetObj, prev, cur) {\r\n    targetObj.page.x    = cur.page.x    - prev.page.x;\r\n    targetObj.page.y    = cur.page.y    - prev.page.y;\r\n    targetObj.client.x  = cur.client.x  - prev.client.x;\r\n    targetObj.client.y  = cur.client.y  - prev.client.y;\r\n    targetObj.timeStamp = cur.timeStamp - prev.timeStamp;\r\n\r\n    // set pointer velocity\r\n    const dt = Math.max(targetObj.timeStamp / 1000, 0.001);\r\n\r\n    targetObj.page.speed   = hypot(targetObj.page.x, targetObj.page.y) / dt;\r\n    targetObj.page.vx      = targetObj.page.x / dt;\r\n    targetObj.page.vy      = targetObj.page.y / dt;\r\n\r\n    targetObj.client.speed = hypot(targetObj.client.x, targetObj.page.y) / dt;\r\n    targetObj.client.vx    = targetObj.client.x / dt;\r\n    targetObj.client.vy    = targetObj.client.y / dt;\r\n  },\r\n\r\n  isNativePointer: function  (pointer) {\r\n    return (pointer instanceof dom.Event || pointer instanceof dom.Touch);\r\n  },\r\n\r\n  // Get specified X/Y coords for mouse or event.touches[0]\r\n  getXY: function (type, pointer, xy) {\r\n    xy = xy || {};\r\n    type = type || 'page';\r\n\r\n    xy.x = pointer[type + 'X'];\r\n    xy.y = pointer[type + 'Y'];\r\n\r\n    return xy;\r\n  },\r\n\r\n  getPageXY: function (pointer, page) {\r\n    page = page || {};\r\n\r\n    // Opera Mobile handles the viewport and scrolling oddly\r\n    if (browser.isOperaMobile && pointerUtils.isNativePointer(pointer)) {\r\n      pointerUtils.getXY('screen', pointer, page);\r\n\r\n      page.x += window.scrollX;\r\n      page.y += window.scrollY;\r\n    }\r\n    else {\r\n      pointerUtils.getXY('page', pointer, page);\r\n    }\r\n\r\n    return page;\r\n  },\r\n\r\n  getClientXY: function (pointer, client) {\r\n    client = client || {};\r\n\r\n    if (browser.isOperaMobile && pointerUtils.isNativePointer(pointer)) {\r\n      // Opera Mobile handles the viewport and scrolling oddly\r\n      pointerUtils.getXY('screen', pointer, client);\r\n    }\r\n    else {\r\n      pointerUtils.getXY('client', pointer, client);\r\n    }\r\n\r\n    return client;\r\n  },\r\n\r\n  getPointerId: function (pointer) {\r\n    return is.number(pointer.pointerId)? pointer.pointerId : pointer.identifier;\r\n  },\r\n\r\n  setCoords: function (targetObj, pointers, timeStamp) {\r\n    const pointer = (pointers.length > 1\r\n                     ? pointerUtils.pointerAverage(pointers)\r\n                     : pointers[0]);\r\n\r\n    const tmpXY = {};\r\n\r\n    pointerUtils.getPageXY(pointer, tmpXY);\r\n    targetObj.page.x = tmpXY.x;\r\n    targetObj.page.y = tmpXY.y;\r\n\r\n    pointerUtils.getClientXY(pointer, tmpXY);\r\n    targetObj.client.x = tmpXY.x;\r\n    targetObj.client.y = tmpXY.y;\r\n\r\n    targetObj.timeStamp = is.number(timeStamp) ? timeStamp :new Date().getTime();\r\n  },\r\n\r\n  pointerExtend: pointerExtend,\r\n\r\n  getTouchPair: function (event) {\r\n    const touches = [];\r\n\r\n    // array of touches is supplied\r\n    if (is.array(event)) {\r\n      touches[0] = event[0];\r\n      touches[1] = event[1];\r\n    }\r\n    // an event\r\n    else {\r\n      if (event.type === 'touchend') {\r\n        if (event.touches.length === 1) {\r\n          touches[0] = event.touches[0];\r\n          touches[1] = event.changedTouches[0];\r\n        }\r\n        else if (event.touches.length === 0) {\r\n          touches[0] = event.changedTouches[0];\r\n          touches[1] = event.changedTouches[1];\r\n        }\r\n      }\r\n      else {\r\n        touches[0] = event.touches[0];\r\n        touches[1] = event.touches[1];\r\n      }\r\n    }\r\n\r\n    return touches;\r\n  },\r\n\r\n  pointerAverage: function (pointers) {\r\n    const average = {\r\n      pageX  : 0,\r\n      pageY  : 0,\r\n      clientX: 0,\r\n      clientY: 0,\r\n      screenX: 0,\r\n      screenY: 0,\r\n    };\r\n\r\n    for (const pointer of pointers) {\r\n      for (const prop in average) {\r\n        average[prop] += pointer[prop];\r\n      }\r\n    }\r\n    for (const prop in average) {\r\n      average[prop] /= pointers.length;\r\n    }\r\n\r\n    return average;\r\n  },\r\n\r\n  touchBBox: function (event) {\r\n    if (!event.length && !(event.touches && event.touches.length > 1)) {\r\n      return;\r\n    }\r\n\r\n    const touches = pointerUtils.getTouchPair(event);\r\n    const minX = Math.min(touches[0].pageX, touches[1].pageX);\r\n    const minY = Math.min(touches[0].pageY, touches[1].pageY);\r\n    const maxX = Math.max(touches[0].pageX, touches[1].pageX);\r\n    const maxY = Math.max(touches[0].pageY, touches[1].pageY);\r\n\r\n    return {\r\n      x: minX,\r\n      y: minY,\r\n      left: minX,\r\n      top: minY,\r\n      width: maxX - minX,\r\n      height: maxY - minY,\r\n    };\r\n  },\r\n\r\n  touchDistance: function (event, deltaSource) {\r\n    const sourceX = deltaSource + 'X';\r\n    const sourceY = deltaSource + 'Y';\r\n    const touches = pointerUtils.getTouchPair(event);\r\n\r\n\r\n    const dx = touches[0][sourceX] - touches[1][sourceX];\r\n    const dy = touches[0][sourceY] - touches[1][sourceY];\r\n\r\n    return hypot(dx, dy);\r\n  },\r\n\r\n  touchAngle: function (event, prevAngle, deltaSource) {\r\n    const sourceX = deltaSource + 'X';\r\n    const sourceY = deltaSource + 'Y';\r\n    const touches = pointerUtils.getTouchPair(event);\r\n    const dx = touches[1][sourceX] - touches[0][sourceX];\r\n    const dy = touches[1][sourceY] - touches[0][sourceY];\r\n    const angle = 180 * Math.atan2(dy , dx) / Math.PI;\r\n\r\n    return  angle;\r\n  },\r\n\r\n  getPointerType: function (pointer, interaction) {\r\n    // if the PointerEvent API isn't available, then the pointer must be ither\r\n    // a MouseEvent or TouchEvent\r\n    if (interaction.mouse)             { return 'mouse'; }\r\n    if (!browser.supportsPointerEvent) { return 'touch'; }\r\n\r\n    return is.string(pointer.pointerType)\r\n      ? pointer.pointerType\r\n      : [undefined, undefined,'touch', 'pen', 'mouse'][pointer.pointerType];\r\n  },\r\n\r\n  // [ event.target, event.currentTarget ]\r\n  getEventTargets: function (event) {\r\n    return [\r\n      domUtils.getActualElement(event.path ? event.path[0] : event.target),\r\n      domUtils.getActualElement(event.currentTarget),\r\n    ];\r\n  },\r\n};\r\n\r\nmodule.exports = pointerUtils;\r\n","const { window } = require('./window');\r\n\r\nconst vendors = ['ms', 'moz', 'webkit', 'o'];\r\nlet lastTime = 0;\r\nlet request;\r\nlet cancel;\r\n\r\nfor (let x = 0; x < vendors.length && !window.requestAnimationFrame; x++) {\r\n  request = window[vendors[x] + 'RequestAnimationFrame'];\r\n  cancel = window[vendors[x] +'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n}\r\n\r\nif (!request) {\r\n  request = function (callback) {\r\n    const currTime = new Date().getTime();\r\n    const timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n    const id = setTimeout(function () { callback(currTime + timeToCall); },\r\n                          timeToCall);\r\n\r\n    lastTime = currTime + timeToCall;\r\n    return id;\r\n  };\r\n}\r\n\r\nif (!cancel) {\r\n  cancel = function (id) {\r\n    clearTimeout(id);\r\n  };\r\n}\r\n\r\nmodule.exports = {\r\n  request,\r\n  cancel,\r\n};\r\n","const extend = require('./extend');\r\nconst is = require('./is');\r\nconst {\r\n  closest,\r\n  parentNode,\r\n  getElementRect,\r\n} = require('./domUtils');\r\n\r\nconst rectUtils = {\r\n  getStringOptionResult: function (value, interactable, element) {\r\n    if (!is.string(value)) {\r\n      return null;\r\n    }\r\n\r\n    if (value === 'parent') {\r\n      value = parentNode(element);\r\n    }\r\n    else if (value === 'self') {\r\n      value = interactable.getRect(element);\r\n    }\r\n    else {\r\n      value = closest(element, value);\r\n    }\r\n\r\n    return value;\r\n  },\r\n\r\n  resolveRectLike: function (value, interactable, element, functionArgs) {\r\n    value = rectUtils.getStringOptionResult(value, interactable, element) || value;\r\n\r\n    if (is.function(value)) {\r\n      value = value.apply(null, functionArgs);\r\n    }\r\n\r\n    if (is.element(value)) {\r\n      value = getElementRect(value);\r\n    }\r\n\r\n    return value;\r\n  },\r\n\r\n  rectToXY: function (rect) {\r\n    return  rect && {\r\n      x: 'x' in rect ? rect.x : rect.left,\r\n      y: 'y' in rect ? rect.y : rect.top,\r\n    };\r\n  },\r\n\r\n  xywhToTlbr: function (rect) {\r\n    if (rect && !('left' in rect && 'top' in rect)) {\r\n      rect = extend({}, rect);\r\n\r\n      rect.left   = rect.x || 0;\r\n      rect.top    = rect.y || 0;\r\n      rect.right  = rect.right   || (rect.left + rect.width);\r\n      rect.bottom = rect.bottom  || (rect.top + rect.height);\r\n    }\r\n\r\n    return rect;\r\n  },\r\n\r\n  tlbrToXywh: function (rect) {\r\n    if (rect && !('x' in rect && 'y' in rect)) {\r\n      rect = extend({}, rect);\r\n\r\n      rect.x      = rect.left || 0;\r\n      rect.top    = rect.top  || 0;\r\n      rect.width  = rect.width  || (rect.right  - rect.x);\r\n      rect.height = rect.height || (rect.bottom - rect.y);\r\n    }\r\n\r\n    return rect;\r\n  },\r\n};\r\n\r\nmodule.exports = rectUtils;\r\n","const win = module.exports;\r\nconst isWindow = require('./isWindow');\r\n\r\nfunction init (window) {\r\n  // get wrapped window if using Shadow DOM polyfill\r\n\r\n  win.realWindow = window;\r\n\r\n  // create a TextNode\r\n  const el = window.document.createTextNode('');\r\n\r\n  // check if it's wrapped by a polyfill\r\n  if (el.ownerDocument !== window.document\r\n      && typeof window.wrap === 'function'\r\n    && window.wrap(el) === el) {\r\n    // use wrapped window\r\n    window = window.wrap(window);\r\n  }\r\n\r\n  win.window = window;\r\n}\r\n\r\nif (typeof window === 'undefined') {\r\n  win.window     = undefined;\r\n  win.realWindow = undefined;\r\n}\r\nelse {\r\n  init(window);\r\n}\r\n\r\nwin.getWindow = function getWindow (node) {\r\n  if (isWindow(node)) {\r\n    return node;\r\n  }\r\n\r\n  const rootNode = (node.ownerDocument || node);\r\n\r\n  return rootNode.defaultView || rootNode.parentWindow || win.window;\r\n};\r\n\r\nwin.init = init;\r\n"]}